function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var lu=Object.defineProperty;var hu=(Pe,ae,Le)=>ae in Pe?lu(Pe,ae,{enumerable:!0,configurable:!0,writable:!0,value:Le}):Pe[ae]=Le;var we=(Pe,ae,Le)=>(hu(Pe,typeof ae!="symbol"?ae+"":ae,Le),Le),Jr=(Pe,ae,Le)=>{if(!ae.has(Pe))throw TypeError("Cannot "+Le)};var i=(Pe,ae,Le)=>(Jr(Pe,ae,"read from private field"),Le?Le.call(Pe):ae.get(Pe)),S=(Pe,ae,Le)=>{if(ae.has(Pe))throw TypeError("Cannot add the same private member more than once");ae instanceof WeakSet?ae.add(Pe):ae.set(Pe,Le)},W=(Pe,ae,Le,Be)=>(Jr(Pe,ae,"write to private field"),Be?Be.call(Pe,Le):ae.set(Pe,Le),Le);var Es=(Pe,ae,Le,Be)=>({set _(lr){W(Pe,ae,lr,Le)},get _(){return i(Pe,ae,Be)}}),U=(Pe,ae,Le)=>(Jr(Pe,ae,"access private method"),Le);(async()=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function Pe(t,e){const n=new Set(t.split(","));return e?s=>n.has(s.toLowerCase()):s=>n.has(s)}const ae={},Le=[],Be=()=>{},lr=()=>!1,ln=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),hr=t=>t.startsWith("onUpdate:"),je=Object.assign,cr=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},yh=Object.prototype.hasOwnProperty,xe=(t,e)=>yh.call(t,e),fe=Array.isArray,si=t=>hn(t)==="[object Map]",Xa=t=>hn(t)==="[object Set]",be=t=>typeof t=="function",Oe=t=>typeof t=="string",ii=t=>typeof t=="symbol",Ie=t=>t!==null&&typeof t=="object",Ya=t=>(Ie(t)||be(t))&&be(t.then)&&be(t.catch),Ka=Object.prototype.toString,hn=t=>Ka.call(t),_h=t=>hn(t).slice(8,-1),Qa=t=>hn(t)==="[object Object]",dr=t=>Oe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ei=Pe(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cn=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},wh=/-(\w)/g,ni=cn(t=>t.replace(wh,(e,n)=>n?n.toUpperCase():"")),Eh=/\B([A-Z])/g,ri=cn(t=>t.replace(Eh,"-$1").toLowerCase()),Ja=cn(t=>t.charAt(0).toUpperCase()+t.slice(1)),ur=cn(t=>t?`on${Ja(t)}`:""),Ss=(t,e)=>!Object.is(t,e),pr=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},dn=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},xh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Za;const to=()=>Za||(Za=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fr(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],o=Oe(s)?Mh(s):fr(s);if(o)for(const h in o)e[h]=o[h]}return e}else if(Oe(t)||Ie(t))return t}const Sh=/;(?![^(]*\))/g,Ch=/:([^]+)/,Th=/\/\*[^]*?\*\//g;function Mh(t){const e={};return t.replace(Th,"").split(Sh).forEach(n=>{if(n){const s=n.split(Ch);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function gr(t){let e="";if(Oe(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const s=gr(t[n]);s&&(e+=s+" ")}else if(Ie(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const kh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rh=Pe(kh);function eo(t){return!!t||t===""}const so=t=>Oe(t)?t:t==null?"":fe(t)||Ie(t)&&(t.toString===Ka||!be(t.toString))?JSON.stringify(t,io,2):String(t),io=(t,e)=>e&&e.__v_isRef?io(t,e.value):si(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,o],h)=>(n[mr(s,h)+" =>"]=o,n),{})}:Xa(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>mr(n))}:ii(e)?mr(e):Ie(e)&&!fe(e)&&!Qa(e)?String(e):e,mr=(t,e="")=>{var n;return ii(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let es;class Ph{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=es,!e&&es&&(this.index=(es.scopes||(es.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=es;try{return es=this,e()}finally{es=n}}}on(){es=this}off(){es=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function Lh(t,e=es){e&&e.active&&e.effects.push(t)}function Fh(){return es}let Us;class vr{constructor(e,n,s,o){this.fn=e,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Lh(this,o)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,js();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Ih(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Vs()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Cs,n=Us;try{return Cs=!0,Us=this,this._runnings++,no(this),this.fn()}finally{ro(this),this._runnings--,Us=n,Cs=e}}stop(){var e;this.active&&(no(this),ro(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function Ih(t){return t.value}function no(t){t._trackId++,t._depsLength=0}function ro(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)ao(t.deps[e],t);t.deps.length=t._depsLength}}function ao(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Cs=!0,br=0;const oo=[];function js(){oo.push(Cs),Cs=!1}function Vs(){const t=oo.pop();Cs=t===void 0?!0:t}function Ar(){br++}function yr(){for(br--;!br&&_r.length;)_r.shift()()}function lo(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&ao(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const _r=[];function ho(t,e,n){Ar();for(const s of t.keys()){let o;s._dirtyLevel<e&&(o??(o=t.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=e),s._shouldSchedule&&(o??(o=t.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&_r.push(s.scheduler)))}yr()}const co=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},wr=new WeakMap,zs=Symbol(""),Er=Symbol("");function Ge(t,e,n){if(Cs&&Us){let s=wr.get(t);s||wr.set(t,s=new Map);let o=s.get(n);o||s.set(n,o=co(()=>s.delete(n))),lo(Us,o)}}function gs(t,e,n,s,o,h){const m=wr.get(t);if(!m)return;let k=[];if(e==="clear")k=[...m.values()];else if(n==="length"&&fe(t)){const w=Number(s);m.forEach((T,_)=>{(_==="length"||!ii(_)&&_>=w)&&k.push(T)})}else switch(n!==void 0&&k.push(m.get(n)),e){case"add":fe(t)?dr(n)&&k.push(m.get("length")):(k.push(m.get(zs)),si(t)&&k.push(m.get(Er)));break;case"delete":fe(t)||(k.push(m.get(zs)),si(t)&&k.push(m.get(Er)));break;case"set":si(t)&&k.push(m.get(zs));break}Ar();for(const w of k)w&&ho(w,4);yr()}const Dh=Pe("__proto__,__v_isRef,__isVue"),uo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ii)),po=Oh();function Oh(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=Se(this);for(let h=0,m=this.length;h<m;h++)Ge(s,"get",h+"");const o=s[e](...n);return o===-1||o===!1?s[e](...n.map(Se)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){js(),Ar();const s=Se(this)[e].apply(this,n);return yr(),Vs(),s}}),t}function Nh(t){const e=Se(this);return Ge(e,"has",t),e.hasOwnProperty(t)}class fo{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const o=this._isReadonly,h=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return h;if(n==="__v_raw")return s===(o?h?Kh:wo:h?_o:yo).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const m=fe(e);if(!o){if(m&&xe(po,n))return Reflect.get(po,n,s);if(n==="hasOwnProperty")return Nh}const k=Reflect.get(e,n,s);return(ii(n)?uo.has(n):Dh(n))||(o||Ge(e,"get",n),h)?k:Xe(k)?m&&dr(n)?k:k.value:Ie(k)?o?Eo(k):Cr(k):k}}class go extends fo{constructor(e=!1){super(!1,e)}set(e,n,s,o){let h=e[n];if(!this._isShallow){const w=oi(h);if(!bn(s)&&!oi(s)&&(h=Se(h),s=Se(s)),!fe(e)&&Xe(h)&&!Xe(s))return w?!1:(h.value=s,!0)}const m=fe(e)&&dr(n)?Number(n)<e.length:xe(e,n),k=Reflect.set(e,n,s,o);return e===Se(o)&&(m?Ss(s,h)&&gs(e,"set",n,s):gs(e,"add",n,s)),k}deleteProperty(e,n){const s=xe(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&s&&gs(e,"delete",n,void 0),o}has(e,n){const s=Reflect.has(e,n);return(!ii(n)||!uo.has(n))&&Ge(e,"has",n),s}ownKeys(e){return Ge(e,"iterate",fe(e)?"length":zs),Reflect.ownKeys(e)}}class Bh extends fo{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Uh=new go,jh=new Bh,Vh=new go(!0),xr=t=>t,un=t=>Reflect.getPrototypeOf(t);function pn(t,e,n=!1,s=!1){t=t.__v_raw;const o=Se(t),h=Se(e);n||(Ss(e,h)&&Ge(o,"get",e),Ge(o,"get",h));const{has:m}=un(o),k=s?xr:n?kr:xi;if(m.call(o,e))return k(t.get(e));if(m.call(o,h))return k(t.get(h));t!==o&&t.get(e)}function fn(t,e=!1){const n=this.__v_raw,s=Se(n),o=Se(t);return e||(Ss(t,o)&&Ge(s,"has",t),Ge(s,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function gn(t,e=!1){return t=t.__v_raw,!e&&Ge(Se(t),"iterate",zs),Reflect.get(t,"size",t)}function mo(t){t=Se(t);const e=Se(this);return un(e).has.call(e,t)||(e.add(t),gs(e,"add",t,t)),this}function vo(t,e){e=Se(e);const n=Se(this),{has:s,get:o}=un(n);let h=s.call(n,t);h||(t=Se(t),h=s.call(n,t));const m=o.call(n,t);return n.set(t,e),h?Ss(e,m)&&gs(n,"set",t,e):gs(n,"add",t,e),this}function bo(t){const e=Se(this),{has:n,get:s}=un(e);let o=n.call(e,t);o||(t=Se(t),o=n.call(e,t)),s&&s.call(e,t);const h=e.delete(t);return o&&gs(e,"delete",t,void 0),h}function Ao(){const t=Se(this),e=t.size!==0,n=t.clear();return e&&gs(t,"clear",void 0,void 0),n}function mn(t,e){return function(n,s){const o=this,h=o.__v_raw,m=Se(h),k=e?xr:t?kr:xi;return!t&&Ge(m,"iterate",zs),h.forEach((w,T)=>n.call(s,k(w),k(T),o))}}function vn(t,e,n){return function(...s){const o=this.__v_raw,h=Se(o),m=si(h),k=t==="entries"||t===Symbol.iterator&&m,w=t==="keys"&&m,T=o[t](...s),_=n?xr:e?kr:xi;return!e&&Ge(h,"iterate",w?Er:zs),{next(){const{value:I,done:N}=T.next();return N?{value:I,done:N}:{value:k?[_(I[0]),_(I[1])]:_(I),done:N}},[Symbol.iterator](){return this}}}}function Ts(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function zh(){const t={get(o){return pn(this,o)},get size(){return gn(this)},has:fn,add:mo,set:vo,delete:bo,clear:Ao,forEach:mn(!1,!1)},e={get(o){return pn(this,o,!1,!0)},get size(){return gn(this)},has:fn,add:mo,set:vo,delete:bo,clear:Ao,forEach:mn(!1,!0)},n={get(o){return pn(this,o,!0)},get size(){return gn(this,!0)},has(o){return fn.call(this,o,!0)},add:Ts("add"),set:Ts("set"),delete:Ts("delete"),clear:Ts("clear"),forEach:mn(!0,!1)},s={get(o){return pn(this,o,!0,!0)},get size(){return gn(this,!0)},has(o){return fn.call(this,o,!0)},add:Ts("add"),set:Ts("set"),delete:Ts("delete"),clear:Ts("clear"),forEach:mn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=vn(o,!1,!1),n[o]=vn(o,!0,!1),e[o]=vn(o,!1,!0),s[o]=vn(o,!0,!0)}),[t,n,e,s]}const[Hh,qh,Wh,$h]=zh();function Sr(t,e){const n=e?t?$h:Wh:t?qh:Hh;return(s,o,h)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?s:Reflect.get(xe(n,o)&&o in s?n:s,o,h)}const Gh={get:Sr(!1,!1)},Xh={get:Sr(!1,!0)},Yh={get:Sr(!0,!1)},yo=new WeakMap,_o=new WeakMap,wo=new WeakMap,Kh=new WeakMap;function Qh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jh(t){return t.__v_skip||!Object.isExtensible(t)?0:Qh(_h(t))}function Cr(t){return oi(t)?t:Tr(t,!1,Uh,Gh,yo)}function Zh(t){return Tr(t,!1,Vh,Xh,_o)}function Eo(t){return Tr(t,!0,jh,Yh,wo)}function Tr(t,e,n,s,o){if(!Ie(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const h=o.get(t);if(h)return h;const m=Jh(t);if(m===0)return t;const k=new Proxy(t,m===2?s:n);return o.set(t,k),k}function ai(t){return oi(t)?ai(t.__v_raw):!!(t&&t.__v_isReactive)}function oi(t){return!!(t&&t.__v_isReadonly)}function bn(t){return!!(t&&t.__v_isShallow)}function xo(t){return ai(t)||oi(t)}function Se(t){const e=t&&t.__v_raw;return e?Se(e):t}function Mr(t){return Object.isExtensible(t)&&dn(t,"__v_skip",!0),t}const xi=t=>Ie(t)?Cr(t):t,kr=t=>Ie(t)?Eo(t):t;class So{constructor(e,n,s,o){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new vr(()=>e(this._value),()=>An(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const e=Se(this);return(!e._cacheable||e.effect.dirty)&&Ss(e._value,e._value=e.effect.run())&&An(e,4),Co(e),e.effect._dirtyLevel>=2&&An(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function tc(t,e,n=!1){let s,o;const h=be(t);return h?(s=t,o=Be):(s=t.get,o=t.set),new So(s,o,h||!o,n)}function Co(t){var e;Cs&&Us&&(t=Se(t),lo(Us,(e=t.dep)!=null?e:t.dep=co(()=>t.dep=void 0,t instanceof So?t:void 0)))}function An(t,e=4,n){t=Se(t);const s=t.dep;s&&ho(s,e)}function Xe(t){return!!(t&&t.__v_isRef===!0)}function yn(t){return ec(t,!1)}function ec(t,e){return Xe(t)?t:new sc(t,e)}class sc{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Se(e),this._value=n?e:xi(e)}get value(){return Co(this),this._value}set value(e){const n=this.__v_isShallow||bn(e)||oi(e);e=n?e:Se(e),Ss(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:xi(e),An(this,4))}}function ic(t){return Xe(t)?t.value:t}const nc={get:(t,e,n)=>ic(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const o=t[e];return Xe(o)&&!Xe(n)?(o.value=n,!0):Reflect.set(t,e,n,s)}};function To(t){return ai(t)?t:new Proxy(t,nc)}function Ms(t,e,n,s){try{return s?t(...s):t()}catch(o){_n(o,e,n)}}function ss(t,e,n,s){if(be(t)){const h=Ms(t,e,n,s);return h&&Ya(h)&&h.catch(m=>{_n(m,e,n)}),h}const o=[];for(let h=0;h<t.length;h++)o.push(ss(t[h],e,n,s));return o}function _n(t,e,n,s=!0){const o=e?e.vnode:null;if(e){let h=e.parent;const m=e.proxy,k=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const T=h.ec;if(T){for(let _=0;_<T.length;_++)if(T[_](t,m,k)===!1)return}h=h.parent}const w=e.appContext.config.errorHandler;if(w){Ms(w,null,10,[t,m,k]);return}}rc(t,n,o,s)}function rc(t,e,n,s=!0){console.error(t)}let Si=!1,Rr=!1;const Ve=[];let ls=0;const li=[];let ks=null,Hs=0;const Mo=Promise.resolve();let Pr=null;function ac(t){const e=Pr||Mo;return t?e.then(this?t.bind(this):t):e}function oc(t){let e=ls+1,n=Ve.length;for(;e<n;){const s=e+n>>>1,o=Ve[s],h=Ci(o);h<t||h===t&&o.pre?e=s+1:n=s}return e}function Lr(t){(!Ve.length||!Ve.includes(t,Si&&t.allowRecurse?ls+1:ls))&&(t.id==null?Ve.push(t):Ve.splice(oc(t.id),0,t),ko())}function ko(){!Si&&!Rr&&(Rr=!0,Pr=Mo.then(Lo))}function lc(t){const e=Ve.indexOf(t);e>ls&&Ve.splice(e,1)}function hc(t){fe(t)?li.push(...t):(!ks||!ks.includes(t,t.allowRecurse?Hs+1:Hs))&&li.push(t),ko()}function Ro(t,e,n=Si?ls+1:0){for(;n<Ve.length;n++){const s=Ve[n];if(s&&s.pre){if(t&&s.id!==t.uid)continue;Ve.splice(n,1),n--,s()}}}function Po(t){if(li.length){const e=[...new Set(li)].sort((n,s)=>Ci(n)-Ci(s));if(li.length=0,ks){ks.push(...e);return}for(ks=e,Hs=0;Hs<ks.length;Hs++)ks[Hs]();ks=null,Hs=0}}const Ci=t=>t.id==null?1/0:t.id,cc=(t,e)=>{const n=Ci(t)-Ci(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Lo(t){Rr=!1,Si=!0,Ve.sort(cc);try{for(ls=0;ls<Ve.length;ls++){const e=Ve[ls];e&&e.active!==!1&&Ms(e,null,14)}}finally{ls=0,Ve.length=0,Po(),Si=!1,Pr=null,(Ve.length||li.length)&&Lo()}}function dc(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ae;let o=n;const h=e.startsWith("update:"),m=h&&e.slice(7);if(m&&m in s){const _=`${m==="modelValue"?"model":m}Modifiers`,{number:I,trim:N}=s[_]||ae;N&&(o=n.map(R=>Oe(R)?R.trim():R)),I&&(o=n.map(xh))}let k,w=s[k=ur(e)]||s[k=ur(ni(e))];!w&&h&&(w=s[k=ur(ri(e))]),w&&ss(w,t,6,o);const T=s[k+"Once"];if(T){if(!t.emitted)t.emitted={};else if(t.emitted[k])return;t.emitted[k]=!0,ss(T,t,6,o)}}function Fo(t,e,n=!1){const s=e.emitsCache,o=s.get(t);if(o!==void 0)return o;const h=t.emits;let m={},k=!1;if(!be(t)){const w=T=>{const _=Fo(T,e,!0);_&&(k=!0,je(m,_))};!n&&e.mixins.length&&e.mixins.forEach(w),t.extends&&w(t.extends),t.mixins&&t.mixins.forEach(w)}return!h&&!k?(Ie(t)&&s.set(t,null),null):(fe(h)?h.forEach(w=>m[w]=null):je(m,h),Ie(t)&&s.set(t,m),m)}function wn(t,e){return!t||!ln(e)?!1:(e=e.slice(2).replace(/Once$/,""),xe(t,e[0].toLowerCase()+e.slice(1))||xe(t,ri(e))||xe(t,e))}let hs=null,En=null;function xn(t){const e=hs;return hs=t,En=t&&t.type.__scopeId||null,e}function uc(t){En=t}function pc(){En=null}function fc(t,e=hs,n){if(!e||t._n)return t;const s=(...o)=>{s._d&&rl(-1);const h=xn(e);let m;try{m=t(...o)}finally{xn(h),s._d&&rl(1)}return m};return s._n=!0,s._c=!0,s._d=!0,s}function Fr(t){const{type:e,vnode:n,proxy:s,withProxy:o,props:h,propsOptions:[m],slots:k,attrs:w,emit:T,render:_,renderCache:I,data:N,setupState:R,ctx:Z,inheritAttrs:L}=t;let H,V;const X=xn(t);try{if(n.shapeFlag&4){const D=o||s,Y=D;H=cs(_.call(Y,D,I,h,R,N,Z)),V=w}else{const D=e;H=cs(D.length>1?D(h,{attrs:w,slots:k,emit:T}):D(h,null)),V=e.props?w:gc(w)}}catch(D){Pi.length=0,_n(D,t,1),H=$s(Ri)}let $=H;if(V&&L!==!1){const D=Object.keys(V),{shapeFlag:Y}=$;D.length&&Y&7&&(m&&D.some(hr)&&(V=mc(V,m)),$=ci($,V))}return n.dirs&&($=ci($),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),H=$,xn(X),H}const gc=t=>{let e;for(const n in t)(n==="class"||n==="style"||ln(n))&&((e||(e={}))[n]=t[n]);return e},mc=(t,e)=>{const n={};for(const s in t)(!hr(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function vc(t,e,n){const{props:s,children:o,component:h}=t,{props:m,children:k,patchFlag:w}=e,T=h.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&w>=0){if(w&1024)return!0;if(w&16)return s?Io(s,m,T):!!m;if(w&8){const _=e.dynamicProps;for(let I=0;I<_.length;I++){const N=_[I];if(m[N]!==s[N]&&!wn(T,N))return!0}}}else return(o||k)&&(!k||!k.$stable)?!0:s===m?!1:s?m?Io(s,m,T):!0:!!m;return!1}function Io(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let o=0;o<s.length;o++){const h=s[o];if(e[h]!==t[h]&&!wn(n,h))return!0}return!1}function bc({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ac=Symbol.for("v-ndc"),yc=t=>t.__isSuspense;function _c(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):hc(t)}const wc=Symbol.for("v-scx"),Ec=()=>kn(wc),Sn={};function Ir(t,e,n){return Do(t,e,n)}function Do(t,e,{immediate:n,deep:s,flush:o,once:h,onTrack:m,onTrigger:k}=ae){if(e&&h){const C=e;e=(...B)=>{C(...B),Y()}}const w=$e,T=C=>s===!0?C:hi(C,s===!1?1:void 0);let _,I=!1,N=!1;if(Xe(t)?(_=()=>t.value,I=bn(t)):ai(t)?(_=()=>T(t),I=!0):fe(t)?(N=!0,I=t.some(C=>ai(C)||bn(C)),_=()=>t.map(C=>{if(Xe(C))return C.value;if(ai(C))return T(C);if(be(C))return Ms(C,w,2)})):be(t)?e?_=()=>Ms(t,w,2):_=()=>(R&&R(),ss(t,w,3,[Z])):_=Be,e&&s){const C=_;_=()=>hi(C())}let R,Z=C=>{R=$.onStop=()=>{Ms(C,w,4),R=$.onStop=void 0}},L;if(In)if(Z=Be,e?n&&ss(e,w,3,[_(),N?[]:void 0,Z]):_(),o==="sync"){const C=Ec();L=C.__watcherHandles||(C.__watcherHandles=[])}else return Be;let H=N?new Array(t.length).fill(Sn):Sn;const V=()=>{if(!(!$.active||!$.dirty))if(e){const C=$.run();(s||I||(N?C.some((B,J)=>Ss(B,H[J])):Ss(C,H)))&&(R&&R(),ss(e,w,3,[C,H===Sn?void 0:N&&H[0]===Sn?[]:H,Z]),H=C)}else $.run()};V.allowRecurse=!!e;let X;o==="sync"?X=V:o==="post"?X=()=>Ye(V,w&&w.suspense):(V.pre=!0,w&&(V.id=w.uid),X=()=>Lr(V));const $=new vr(_,Be,X),D=Fh(),Y=()=>{$.stop(),D&&cr(D.effects,$)};return e?n?V():H=$.run():o==="post"?Ye($.run.bind($),w&&w.suspense):$.run(),L&&L.push(Y),Y}function xc(t,e,n){const s=this.proxy,o=Oe(t)?t.includes(".")?Oo(s,t):()=>s[t]:t.bind(s,s);let h;be(e)?h=e:(h=e.handler,n=e);const m=Oi(this),k=Do(o,h.bind(s),n);return m(),k}function Oo(t,e){const n=e.split(".");return()=>{let s=t;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function hi(t,e,n=0,s){if(!Ie(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(s=s||new Set,s.has(t))return t;if(s.add(t),Xe(t))hi(t.value,e,n,s);else if(fe(t))for(let o=0;o<t.length;o++)hi(t[o],e,n,s);else if(Xa(t)||si(t))t.forEach(o=>{hi(o,e,n,s)});else if(Qa(t))for(const o in t)hi(t[o],e,n,s);return t}function qs(t,e,n,s){const o=t.dirs,h=e&&e.dirs;for(let m=0;m<o.length;m++){const k=o[m];h&&(k.oldValue=h[m].value);let w=k.dir[s];w&&(js(),ss(w,n,8,[t.el,k,t,e]),Vs())}}const Cn=t=>!!t.type.__asyncLoader,No=t=>t.type.__isKeepAlive;function Sc(t,e){Bo(t,"a",e)}function Cc(t,e){Bo(t,"da",e)}function Bo(t,e,n=$e){const s=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Tn(e,s,n),n){let o=n.parent;for(;o&&o.parent;)No(o.parent.vnode)&&Tc(s,e,n,o),o=o.parent}}function Tc(t,e,n,s){const o=Tn(e,t,s,!0);jo(()=>{cr(s[e],o)},n)}function Tn(t,e,n=$e,s=!1){if(n){const o=n[t]||(n[t]=[]),h=e.__weh||(e.__weh=(...m)=>{if(n.isUnmounted)return;js();const k=Oi(n),w=ss(e,n,t,m);return k(),Vs(),w});return s?o.unshift(h):o.push(h),h}}const ms=t=>(e,n=$e)=>(!In||t==="sp")&&Tn(t,(...s)=>e(...s),n),Mc=ms("bm"),Uo=ms("m"),kc=ms("bu"),Rc=ms("u"),Pc=ms("bum"),jo=ms("um"),Lc=ms("sp"),Fc=ms("rtg"),Ic=ms("rtc");function Dc(t,e=$e){Tn("ec",t,e)}function Vo(t,e,n,s){let o;const h=n&&n[s];if(fe(t)||Oe(t)){o=new Array(t.length);for(let m=0,k=t.length;m<k;m++)o[m]=e(t[m],m,void 0,h&&h[m])}else if(typeof t=="number"){o=new Array(t);for(let m=0;m<t;m++)o[m]=e(m+1,m,void 0,h&&h[m])}else if(Ie(t))if(t[Symbol.iterator])o=Array.from(t,(m,k)=>e(m,k,void 0,h&&h[k]));else{const m=Object.keys(t);o=new Array(m.length);for(let k=0,w=m.length;k<w;k++){const T=m[k];o[k]=e(t[T],T,k,h&&h[k])}}else o=[];return n&&(n[s]=o),o}const Dr=t=>t?ll(t)?Gr(t)||t.proxy:Dr(t.parent):null,Ti=je(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Dr(t.parent),$root:t=>Dr(t.root),$emit:t=>t.emit,$options:t=>Br(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Lr(t.update)}),$nextTick:t=>t.n||(t.n=ac.bind(t.proxy)),$watch:t=>xc.bind(t)}),Or=(t,e)=>t!==ae&&!t.__isScriptSetup&&xe(t,e),Oc={get({_:t},e){const{ctx:n,setupState:s,data:o,props:h,accessCache:m,type:k,appContext:w}=t;let T;if(e[0]!=="$"){const R=m[e];if(R!==void 0)switch(R){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return h[e]}else{if(Or(s,e))return m[e]=1,s[e];if(o!==ae&&xe(o,e))return m[e]=2,o[e];if((T=t.propsOptions[0])&&xe(T,e))return m[e]=3,h[e];if(n!==ae&&xe(n,e))return m[e]=4,n[e];Nr&&(m[e]=0)}}const _=Ti[e];let I,N;if(_)return e==="$attrs"&&Ge(t,"get",e),_(t);if((I=k.__cssModules)&&(I=I[e]))return I;if(n!==ae&&xe(n,e))return m[e]=4,n[e];if(N=w.config.globalProperties,xe(N,e))return N[e]},set({_:t},e,n){const{data:s,setupState:o,ctx:h}=t;return Or(o,e)?(o[e]=n,!0):s!==ae&&xe(s,e)?(s[e]=n,!0):xe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(h[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:o,propsOptions:h}},m){let k;return!!n[m]||t!==ae&&xe(t,m)||Or(e,m)||(k=h[0])&&xe(k,m)||xe(s,m)||xe(Ti,m)||xe(o.config.globalProperties,m)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:xe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function zo(t){return fe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Nr=!0;function Nc(t){const e=Br(t),n=t.proxy,s=t.ctx;Nr=!1,e.beforeCreate&&Ho(e.beforeCreate,t,"bc");const{data:o,computed:h,methods:m,watch:k,provide:w,inject:T,created:_,beforeMount:I,mounted:N,beforeUpdate:R,updated:Z,activated:L,deactivated:H,beforeDestroy:V,beforeUnmount:X,destroyed:$,unmounted:D,render:Y,renderTracked:C,renderTriggered:B,errorCaptured:J,serverPrefetch:lt,expose:Q,inheritAttrs:ut,components:wt,directives:jt,filters:Nt}=e;if(T&&Bc(T,s,null),m)for(const Pt in m){const Yt=m[Pt];be(Yt)&&(s[Pt]=Yt.bind(n))}if(o){const Pt=o.call(n,n);Ie(Pt)&&(t.data=Cr(Pt))}if(Nr=!0,h)for(const Pt in h){const Yt=h[Pt],Ht=be(Yt)?Yt.bind(n,n):be(Yt.get)?Yt.get.bind(n,n):Be,ue=!be(Yt)&&be(Yt.set)?Yt.set.bind(n):Be,ie=md({get:Ht,set:ue});Object.defineProperty(s,Pt,{enumerable:!0,configurable:!0,get:()=>ie.value,set:Jt=>ie.value=Jt})}if(k)for(const Pt in k)qo(k[Pt],s,n,Pt);if(w){const Pt=be(w)?w.call(n):w;Reflect.ownKeys(Pt).forEach(Yt=>{qc(Yt,Pt[Yt])})}_&&Ho(_,t,"c");function Ft(Pt,Yt){fe(Yt)?Yt.forEach(Ht=>Pt(Ht.bind(n))):Yt&&Pt(Yt.bind(n))}if(Ft(Mc,I),Ft(Uo,N),Ft(kc,R),Ft(Rc,Z),Ft(Sc,L),Ft(Cc,H),Ft(Dc,J),Ft(Ic,C),Ft(Fc,B),Ft(Pc,X),Ft(jo,D),Ft(Lc,lt),fe(Q))if(Q.length){const Pt=t.exposed||(t.exposed={});Q.forEach(Yt=>{Object.defineProperty(Pt,Yt,{get:()=>n[Yt],set:Ht=>n[Yt]=Ht})})}else t.exposed||(t.exposed={});Y&&t.render===Be&&(t.render=Y),ut!=null&&(t.inheritAttrs=ut),wt&&(t.components=wt),jt&&(t.directives=jt)}function Bc(t,e,n=Be){fe(t)&&(t=Ur(t));for(const s in t){const o=t[s];let h;Ie(o)?"default"in o?h=kn(o.from||s,o.default,!0):h=kn(o.from||s):h=kn(o),Xe(h)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>h.value,set:m=>h.value=m}):e[s]=h}}function Ho(t,e,n){ss(fe(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function qo(t,e,n,s){const o=s.includes(".")?Oo(n,s):()=>n[s];if(Oe(t)){const h=e[t];be(h)&&Ir(o,h)}else if(be(t))Ir(o,t.bind(n));else if(Ie(t))if(fe(t))t.forEach(h=>qo(h,e,n,s));else{const h=be(t.handler)?t.handler.bind(n):e[t.handler];be(h)&&Ir(o,h,t)}}function Br(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:o,optionsCache:h,config:{optionMergeStrategies:m}}=t.appContext,k=h.get(e);let w;return k?w=k:!o.length&&!n&&!s?w=e:(w={},o.length&&o.forEach(T=>Mn(w,T,m,!0)),Mn(w,e,m)),Ie(e)&&h.set(e,w),w}function Mn(t,e,n,s=!1){const{mixins:o,extends:h}=e;h&&Mn(t,h,n,!0),o&&o.forEach(m=>Mn(t,m,n,!0));for(const m in e)if(!(s&&m==="expose")){const k=Uc[m]||n&&n[m];t[m]=k?k(t[m],e[m]):e[m]}return t}const Uc={data:Wo,props:$o,emits:$o,methods:Mi,computed:Mi,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:Mi,directives:Mi,watch:Vc,provide:Wo,inject:jc};function Wo(t,e){return e?t?function(){return je(be(t)?t.call(this,this):t,be(e)?e.call(this,this):e)}:e:t}function jc(t,e){return Mi(Ur(t),Ur(e))}function Ur(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function qe(t,e){return t?[...new Set([].concat(t,e))]:e}function Mi(t,e){return t?je(Object.create(null),t,e):e}function $o(t,e){return t?fe(t)&&fe(e)?[...new Set([...t,...e])]:je(Object.create(null),zo(t),zo(e??{})):e}function Vc(t,e){if(!t)return e;if(!e)return t;const n=je(Object.create(null),t);for(const s in e)n[s]=qe(t[s],e[s]);return n}function Go(){return{app:null,config:{isNativeTag:lr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zc=0;function Hc(t,e){return function(n,s=null){be(n)||(n=je({},n)),s!=null&&!Ie(s)&&(s=null);const o=Go(),h=new WeakSet;let m=!1;const k=o.app={_uid:zc++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:vd,get config(){return o.config},set config(w){},use(w,...T){return h.has(w)||(w&&be(w.install)?(h.add(w),w.install(k,...T)):be(w)&&(h.add(w),w(k,...T))),k},mixin(w){return o.mixins.includes(w)||o.mixins.push(w),k},component(w,T){return T?(o.components[w]=T,k):o.components[w]},directive(w,T){return T?(o.directives[w]=T,k):o.directives[w]},mount(w,T,_){if(!m){const I=$s(n,s);return I.appContext=o,_===!0?_="svg":_===!1&&(_=void 0),T&&e?e(I,w):t(I,w,_),m=!0,k._container=w,w.__vue_app__=k,Gr(I.component)||I.component.proxy}},unmount(){m&&(t(null,k._container),delete k._container.__vue_app__)},provide(w,T){return o.provides[w]=T,k},runWithContext(w){const T=ki;ki=k;try{return w()}finally{ki=T}}};return k}}let ki=null;function qc(t,e){if($e){let n=$e.provides;const s=$e.parent&&$e.parent.provides;s===n&&(n=$e.provides=Object.create(s)),n[t]=e}}function kn(t,e,n=!1){const s=$e||hs;if(s||ki){const o=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:ki._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&be(e)?e.call(s&&s.proxy):e}}function Wc(t,e,n,s=!1){const o={},h={};dn(h,Pn,1),t.propsDefaults=Object.create(null),Xo(t,e,o,h);for(const m in t.propsOptions[0])m in o||(o[m]=void 0);n?t.props=s?o:Zh(o):t.type.props?t.props=o:t.props=h,t.attrs=h}function $c(t,e,n,s){const{props:o,attrs:h,vnode:{patchFlag:m}}=t,k=Se(o),[w]=t.propsOptions;let T=!1;if((s||m>0)&&!(m&16)){if(m&8){const _=t.vnode.dynamicProps;for(let I=0;I<_.length;I++){let N=_[I];if(wn(t.emitsOptions,N))continue;const R=e[N];if(w)if(xe(h,N))R!==h[N]&&(h[N]=R,T=!0);else{const Z=ni(N);o[Z]=jr(w,k,Z,R,t,!1)}else R!==h[N]&&(h[N]=R,T=!0)}}}else{Xo(t,e,o,h)&&(T=!0);let _;for(const I in k)(!e||!xe(e,I)&&((_=ri(I))===I||!xe(e,_)))&&(w?n&&(n[I]!==void 0||n[_]!==void 0)&&(o[I]=jr(w,k,I,void 0,t,!0)):delete o[I]);if(h!==k)for(const I in h)(!e||!xe(e,I))&&(delete h[I],T=!0)}T&&gs(t,"set","$attrs")}function Xo(t,e,n,s){const[o,h]=t.propsOptions;let m=!1,k;if(e)for(let w in e){if(Ei(w))continue;const T=e[w];let _;o&&xe(o,_=ni(w))?!h||!h.includes(_)?n[_]=T:(k||(k={}))[_]=T:wn(t.emitsOptions,w)||(!(w in s)||T!==s[w])&&(s[w]=T,m=!0)}if(h){const w=Se(n),T=k||ae;for(let _=0;_<h.length;_++){const I=h[_];n[I]=jr(o,w,I,T[I],t,!xe(T,I))}}return m}function jr(t,e,n,s,o,h){const m=t[n];if(m!=null){const k=xe(m,"default");if(k&&s===void 0){const w=m.default;if(m.type!==Function&&!m.skipFactory&&be(w)){const{propsDefaults:T}=o;if(n in T)s=T[n];else{const _=Oi(o);s=T[n]=w.call(null,e),_()}}else s=w}m[0]&&(h&&!k?s=!1:m[1]&&(s===""||s===ri(n))&&(s=!0))}return s}function Yo(t,e,n=!1){const s=e.propsCache,o=s.get(t);if(o)return o;const h=t.props,m={},k=[];let w=!1;if(!be(t)){const _=I=>{w=!0;const[N,R]=Yo(I,e,!0);je(m,N),R&&k.push(...R)};!n&&e.mixins.length&&e.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}if(!h&&!w)return Ie(t)&&s.set(t,Le),Le;if(fe(h))for(let _=0;_<h.length;_++){const I=ni(h[_]);Ko(I)&&(m[I]=ae)}else if(h)for(const _ in h){const I=ni(_);if(Ko(I)){const N=h[_],R=m[I]=fe(N)||be(N)?{type:N}:je({},N);if(R){const Z=Zo(Boolean,R.type),L=Zo(String,R.type);R[0]=Z>-1,R[1]=L<0||Z<L,(Z>-1||xe(R,"default"))&&k.push(I)}}}const T=[m,k];return Ie(t)&&s.set(t,T),T}function Ko(t){return t[0]!=="$"&&!Ei(t)}function Qo(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Jo(t,e){return Qo(t)===Qo(e)}function Zo(t,e){return fe(e)?e.findIndex(n=>Jo(n,t)):be(e)&&Jo(e,t)?0:-1}const tl=t=>t[0]==="_"||t==="$stable",Vr=t=>fe(t)?t.map(cs):[cs(t)],Gc=(t,e,n)=>{if(e._n)return e;const s=fc((...o)=>Vr(e(...o)),n);return s._c=!1,s},el=(t,e,n)=>{const s=t._ctx;for(const o in t){if(tl(o))continue;const h=t[o];if(be(h))e[o]=Gc(o,h,s);else if(h!=null){const m=Vr(h);e[o]=()=>m}}},sl=(t,e)=>{const n=Vr(e);t.slots.default=()=>n},Xc=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Se(e),dn(e,"_",n)):el(e,t.slots={})}else t.slots={},e&&sl(t,e);dn(t.slots,Pn,1)},Yc=(t,e,n)=>{const{vnode:s,slots:o}=t;let h=!0,m=ae;if(s.shapeFlag&32){const k=e._;k?n&&k===1?h=!1:(je(o,e),!n&&k===1&&delete o._):(h=!e.$stable,el(e,o)),m=e}else e&&(sl(t,e),m={default:1});if(h)for(const k in o)!tl(k)&&m[k]==null&&delete o[k]};function zr(t,e,n,s,o=!1){if(fe(t)){t.forEach((N,R)=>zr(N,e&&(fe(e)?e[R]:e),n,s,o));return}if(Cn(s)&&!o)return;const h=s.shapeFlag&4?Gr(s.component)||s.component.proxy:s.el,m=o?null:h,{i:k,r:w}=t,T=e&&e.r,_=k.refs===ae?k.refs={}:k.refs,I=k.setupState;if(T!=null&&T!==w&&(Oe(T)?(_[T]=null,xe(I,T)&&(I[T]=null)):Xe(T)&&(T.value=null)),be(w))Ms(w,k,12,[m,_]);else{const N=Oe(w),R=Xe(w);if(N||R){const Z=()=>{if(t.f){const L=N?xe(I,w)?I[w]:_[w]:w.value;o?fe(L)&&cr(L,h):fe(L)?L.includes(h)||L.push(h):N?(_[w]=[h],xe(I,w)&&(I[w]=_[w])):(w.value=[h],t.k&&(_[t.k]=w.value))}else N?(_[w]=m,xe(I,w)&&(I[w]=m)):R&&(w.value=m,t.k&&(_[t.k]=m))};m?(Z.id=-1,Ye(Z,n)):Z()}}}const Ye=_c;function Kc(t){return Qc(t)}function Qc(t,e){const n=to();n.__VUE__=!0;const{insert:s,remove:o,patchProp:h,createElement:m,createText:k,createComment:w,setText:T,setElementText:_,parentNode:I,nextSibling:N,setScopeId:R=Be,insertStaticContent:Z}=t,L=(z,b,a,l=null,u=null,x=null,A=void 0,y=null,f=!!b.dynamicChildren)=>{if(z===b)return;z&&!Di(z,b)&&(l=oe(z),Vt(z,u,x,!0),z=null),b.patchFlag===-2&&(f=!1,b.dynamicChildren=null);const{type:d,ref:c,shapeFlag:g}=b;switch(d){case Rn:H(z,b,a,l);break;case Ri:V(z,b,a,l);break;case qr:z==null&&X(b,a,l,A);break;case is:wt(z,b,a,l,u,x,A,y,f);break;default:g&1?Y(z,b,a,l,u,x,A,y,f):g&6?jt(z,b,a,l,u,x,A,y,f):(g&64||g&128)&&d.process(z,b,a,l,u,x,A,y,f,pe)}c!=null&&u&&zr(c,z&&z.ref,x,b||z,!b)},H=(z,b,a,l)=>{if(z==null)s(b.el=k(b.children),a,l);else{const u=b.el=z.el;b.children!==z.children&&T(u,b.children)}},V=(z,b,a,l)=>{z==null?s(b.el=w(b.children||""),a,l):b.el=z.el},X=(z,b,a,l)=>{[z.el,z.anchor]=Z(z.children,b,a,l,z.el,z.anchor)},$=({el:z,anchor:b},a,l)=>{let u;for(;z&&z!==b;)u=N(z),s(z,a,l),z=u;s(b,a,l)},D=({el:z,anchor:b})=>{let a;for(;z&&z!==b;)a=N(z),o(z),z=a;o(b)},Y=(z,b,a,l,u,x,A,y,f)=>{b.type==="svg"?A="svg":b.type==="math"&&(A="mathml"),z==null?C(b,a,l,u,x,A,y,f):lt(z,b,u,x,A,y,f)},C=(z,b,a,l,u,x,A,y)=>{let f,d;const{props:c,shapeFlag:g,transition:M,dirs:G}=z;if(f=z.el=m(z.type,x,c&&c.is,c),g&8?_(f,z.children):g&16&&J(z.children,f,null,l,u,Hr(z,x),A,y),G&&qs(z,null,l,"created"),B(f,z,z.scopeId,A,l),c){for(const rt in c)rt!=="value"&&!Ei(rt)&&h(f,rt,null,c[rt],x,z.children,l,u,Zt);"value"in c&&h(f,"value",null,c.value,x),(d=c.onVnodeBeforeMount)&&ds(d,l,z)}G&&qs(z,null,l,"beforeMount");const et=Jc(u,M);et&&M.beforeEnter(f),s(f,b,a),((d=c&&c.onVnodeMounted)||et||G)&&Ye(()=>{d&&ds(d,l,z),et&&M.enter(f),G&&qs(z,null,l,"mounted")},u)},B=(z,b,a,l,u)=>{if(a&&R(z,a),l)for(let x=0;x<l.length;x++)R(z,l[x]);if(u){let x=u.subTree;if(b===x){const A=u.vnode;B(z,A,A.scopeId,A.slotScopeIds,u.parent)}}},J=(z,b,a,l,u,x,A,y,f=0)=>{for(let d=f;d<z.length;d++){const c=z[d]=y?Rs(z[d]):cs(z[d]);L(null,c,b,a,l,u,x,A,y)}},lt=(z,b,a,l,u,x,A)=>{const y=b.el=z.el;let{patchFlag:f,dynamicChildren:d,dirs:c}=b;f|=z.patchFlag&16;const g=z.props||ae,M=b.props||ae;let G;if(a&&Ws(a,!1),(G=M.onVnodeBeforeUpdate)&&ds(G,a,b,z),c&&qs(b,z,a,"beforeUpdate"),a&&Ws(a,!0),d?Q(z.dynamicChildren,d,y,a,l,Hr(b,u),x):A||Ht(z,b,y,null,a,l,Hr(b,u),x,!1),f>0){if(f&16)ut(y,b,g,M,a,l,u);else if(f&2&&g.class!==M.class&&h(y,"class",null,M.class,u),f&4&&h(y,"style",g.style,M.style,u),f&8){const et=b.dynamicProps;for(let rt=0;rt<et.length;rt++){const vt=et[rt],ft=g[vt],bt=M[vt];(bt!==ft||vt==="value")&&h(y,vt,ft,bt,u,z.children,a,l,Zt)}}f&1&&z.children!==b.children&&_(y,b.children)}else!A&&d==null&&ut(y,b,g,M,a,l,u);((G=M.onVnodeUpdated)||c)&&Ye(()=>{G&&ds(G,a,b,z),c&&qs(b,z,a,"updated")},l)},Q=(z,b,a,l,u,x,A)=>{for(let y=0;y<b.length;y++){const f=z[y],d=b[y],c=f.el&&(f.type===is||!Di(f,d)||f.shapeFlag&70)?I(f.el):a;L(f,d,c,null,l,u,x,A,!0)}},ut=(z,b,a,l,u,x,A)=>{if(a!==l){if(a!==ae)for(const y in a)!Ei(y)&&!(y in l)&&h(z,y,a[y],null,A,b.children,u,x,Zt);for(const y in l){if(Ei(y))continue;const f=l[y],d=a[y];f!==d&&y!=="value"&&h(z,y,d,f,A,b.children,u,x,Zt)}"value"in l&&h(z,"value",a.value,l.value,A)}},wt=(z,b,a,l,u,x,A,y,f)=>{const d=b.el=z?z.el:k(""),c=b.anchor=z?z.anchor:k("");let{patchFlag:g,dynamicChildren:M,slotScopeIds:G}=b;G&&(y=y?y.concat(G):G),z==null?(s(d,a,l),s(c,a,l),J(b.children||[],a,c,u,x,A,y,f)):g>0&&g&64&&M&&z.dynamicChildren?(Q(z.dynamicChildren,M,a,u,x,A,y),(b.key!=null||u&&b===u.subTree)&&il(z,b,!0)):Ht(z,b,a,c,u,x,A,y,f)},jt=(z,b,a,l,u,x,A,y,f)=>{b.slotScopeIds=y,z==null?b.shapeFlag&512?u.ctx.activate(b,a,l,A,f):Nt(b,a,l,u,x,A,f):Ft(z,b,f)},Nt=(z,b,a,l,u,x,A)=>{const y=z.component=cd(z,l,u);if(No(z)&&(y.ctx.renderer=pe),dd(y),y.asyncDep){if(u&&u.registerDep(y,Pt),!z.el){const f=y.subTree=$s(Ri);V(null,f,b,a)}}else Pt(y,z,b,a,u,x,A)},Ft=(z,b,a)=>{const l=b.component=z.component;if(vc(z,b,a))if(l.asyncDep&&!l.asyncResolved){Yt(l,b,a);return}else l.next=b,lc(l.update),l.effect.dirty=!0,l.update();else b.el=z.el,l.vnode=b},Pt=(z,b,a,l,u,x,A)=>{const y=()=>{if(z.isMounted){let{next:c,bu:g,u:M,parent:G,vnode:et}=z;{const Tt=nl(z);if(Tt){c&&(c.el=et.el,Yt(z,c,A)),Tt.asyncDep.then(()=>{z.isUnmounted||y()});return}}let rt=c,vt;Ws(z,!1),c?(c.el=et.el,Yt(z,c,A)):c=et,g&&pr(g),(vt=c.props&&c.props.onVnodeBeforeUpdate)&&ds(vt,G,c,et),Ws(z,!0);const ft=Fr(z),bt=z.subTree;z.subTree=ft,L(bt,ft,I(bt.el),oe(bt),z,u,x),c.el=ft.el,rt===null&&bc(z,ft.el),M&&Ye(M,u),(vt=c.props&&c.props.onVnodeUpdated)&&Ye(()=>ds(vt,G,c,et),u)}else{let c;const{el:g,props:M}=b,{bm:G,m:et,parent:rt}=z,vt=Cn(b);if(Ws(z,!1),G&&pr(G),!vt&&(c=M&&M.onVnodeBeforeMount)&&ds(c,rt,b),Ws(z,!0),g&&le){const ft=()=>{z.subTree=Fr(z),le(g,z.subTree,z,u,null)};vt?b.type.__asyncLoader().then(()=>!z.isUnmounted&&ft()):ft()}else{const ft=z.subTree=Fr(z);L(null,ft,a,l,z,u,x),b.el=ft.el}if(et&&Ye(et,u),!vt&&(c=M&&M.onVnodeMounted)){const ft=b;Ye(()=>ds(c,rt,ft),u)}(b.shapeFlag&256||rt&&Cn(rt.vnode)&&rt.vnode.shapeFlag&256)&&z.a&&Ye(z.a,u),z.isMounted=!0,b=a=l=null}},f=z.effect=new vr(y,Be,()=>Lr(d),z.scope),d=z.update=()=>{f.dirty&&f.run()};d.id=z.uid,Ws(z,!0),d()},Yt=(z,b,a)=>{b.component=z;const l=z.vnode.props;z.vnode=b,z.next=null,$c(z,b.props,l,a),Yc(z,b.children,a),js(),Ro(z),Vs()},Ht=(z,b,a,l,u,x,A,y,f=!1)=>{const d=z&&z.children,c=z?z.shapeFlag:0,g=b.children,{patchFlag:M,shapeFlag:G}=b;if(M>0){if(M&128){ie(d,g,a,l,u,x,A,y,f);return}else if(M&256){ue(d,g,a,l,u,x,A,y,f);return}}G&8?(c&16&&Zt(d,u,x),g!==d&&_(a,g)):c&16?G&16?ie(d,g,a,l,u,x,A,y,f):Zt(d,u,x,!0):(c&8&&_(a,""),G&16&&J(g,a,l,u,x,A,y,f))},ue=(z,b,a,l,u,x,A,y,f)=>{z=z||Le,b=b||Le;const d=z.length,c=b.length,g=Math.min(d,c);let M;for(M=0;M<g;M++){const G=b[M]=f?Rs(b[M]):cs(b[M]);L(z[M],G,a,null,u,x,A,y,f)}d>c?Zt(z,u,x,!0,!1,g):J(b,a,l,u,x,A,y,f,g)},ie=(z,b,a,l,u,x,A,y,f)=>{let d=0;const c=b.length;let g=z.length-1,M=c-1;for(;d<=g&&d<=M;){const G=z[d],et=b[d]=f?Rs(b[d]):cs(b[d]);if(Di(G,et))L(G,et,a,null,u,x,A,y,f);else break;d++}for(;d<=g&&d<=M;){const G=z[g],et=b[M]=f?Rs(b[M]):cs(b[M]);if(Di(G,et))L(G,et,a,null,u,x,A,y,f);else break;g--,M--}if(d>g){if(d<=M){const G=M+1,et=G<c?b[G].el:l;for(;d<=M;)L(null,b[d]=f?Rs(b[d]):cs(b[d]),a,et,u,x,A,y,f),d++}}else if(d>M)for(;d<=g;)Vt(z[d],u,x,!0),d++;else{const G=d,et=d,rt=new Map;for(d=et;d<=M;d++){const nt=b[d]=f?Rs(b[d]):cs(b[d]);nt.key!=null&&rt.set(nt.key,d)}let vt,ft=0;const bt=M-et+1;let Tt=!1,St=0;const xt=new Array(bt);for(d=0;d<bt;d++)xt[d]=0;for(d=G;d<=g;d++){const nt=z[d];if(ft>=bt){Vt(nt,u,x,!0);continue}let P;if(nt.key!=null)P=rt.get(nt.key);else for(vt=et;vt<=M;vt++)if(xt[vt-et]===0&&Di(nt,b[vt])){P=vt;break}P===void 0?Vt(nt,u,x,!0):(xt[P-et]=d+1,P>=St?St=P:Tt=!0,L(nt,b[P],a,null,u,x,A,y,f),ft++)}const Dt=Tt?Zc(xt):Le;for(vt=Dt.length-1,d=bt-1;d>=0;d--){const nt=et+d,P=b[nt],K=nt+1<c?b[nt+1].el:l;xt[d]===0?L(null,P,a,K,u,x,A,y,f):Tt&&(vt<0||d!==Dt[vt]?Jt(P,a,K,2):vt--)}}},Jt=(z,b,a,l,u=null)=>{const{el:x,type:A,transition:y,children:f,shapeFlag:d}=z;if(d&6){Jt(z.component.subTree,b,a,l);return}if(d&128){z.suspense.move(b,a,l);return}if(d&64){A.move(z,b,a,pe);return}if(A===is){s(x,b,a);for(let c=0;c<f.length;c++)Jt(f[c],b,a,l);s(z.anchor,b,a);return}if(A===qr){$(z,b,a);return}if(l!==2&&d&1&&y)if(l===0)y.beforeEnter(x),s(x,b,a),Ye(()=>y.enter(x),u);else{const{leave:c,delayLeave:g,afterLeave:M}=y,G=()=>s(x,b,a),et=()=>{c(x,()=>{G(),M&&M()})};g?g(x,G,et):et()}else s(x,b,a)},Vt=(z,b,a,l=!1,u=!1)=>{const{type:x,props:A,ref:y,children:f,dynamicChildren:d,shapeFlag:c,patchFlag:g,dirs:M}=z;if(y!=null&&zr(y,null,a,z,!0),c&256){b.ctx.deactivate(z);return}const G=c&1&&M,et=!Cn(z);let rt;if(et&&(rt=A&&A.onVnodeBeforeUnmount)&&ds(rt,b,z),c&6)ce(z.component,a,l);else{if(c&128){z.suspense.unmount(a,l);return}G&&qs(z,null,b,"beforeUnmount"),c&64?z.type.remove(z,b,a,u,pe,l):d&&(x!==is||g>0&&g&64)?Zt(d,b,a,!1,!0):(x===is&&g&384||!u&&c&16)&&Zt(f,b,a),l&&ne(z)}(et&&(rt=A&&A.onVnodeUnmounted)||G)&&Ye(()=>{rt&&ds(rt,b,z),G&&qs(z,null,b,"unmounted")},a)},ne=z=>{const{type:b,el:a,anchor:l,transition:u}=z;if(b===is){$t(a,l);return}if(b===qr){D(z);return}const x=()=>{o(a),u&&!u.persisted&&u.afterLeave&&u.afterLeave()};if(z.shapeFlag&1&&u&&!u.persisted){const{leave:A,delayLeave:y}=u,f=()=>A(a,x);y?y(z.el,x,f):f()}else x()},$t=(z,b)=>{let a;for(;z!==b;)a=N(z),o(z),z=a;o(b)},ce=(z,b,a)=>{const{bum:l,scope:u,update:x,subTree:A,um:y}=z;l&&pr(l),u.stop(),x&&(x.active=!1,Vt(A,z,b,a)),y&&Ye(y,b),Ye(()=>{z.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},Zt=(z,b,a,l=!1,u=!1,x=0)=>{for(let A=x;A<z.length;A++)Vt(z[A],b,a,l,u)},oe=z=>z.shapeFlag&6?oe(z.component.subTree):z.shapeFlag&128?z.suspense.next():N(z.anchor||z.el);let qt=!1;const Ae=(z,b,a)=>{z==null?b._vnode&&Vt(b._vnode,null,null,!0):L(b._vnode||null,z,b,null,null,null,a),qt||(qt=!0,Ro(),Po(),qt=!1),b._vnode=z},pe={p:L,um:Vt,m:Jt,r:ne,mt:Nt,mc:J,pc:Ht,pbc:Q,n:oe,o:t};let se,le;return e&&([se,le]=e(pe)),{render:Ae,hydrate:se,createApp:Hc(Ae,se)}}function Hr({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ws({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Jc(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function il(t,e,n=!1){const s=t.children,o=e.children;if(fe(s)&&fe(o))for(let h=0;h<s.length;h++){const m=s[h];let k=o[h];k.shapeFlag&1&&!k.dynamicChildren&&((k.patchFlag<=0||k.patchFlag===32)&&(k=o[h]=Rs(o[h]),k.el=m.el),n||il(m,k)),k.type===Rn&&(k.el=m.el)}}function Zc(t){const e=t.slice(),n=[0];let s,o,h,m,k;const w=t.length;for(s=0;s<w;s++){const T=t[s];if(T!==0){if(o=n[n.length-1],t[o]<T){e[s]=o,n.push(s);continue}for(h=0,m=n.length-1;h<m;)k=h+m>>1,t[n[k]]<T?h=k+1:m=k;T<t[n[h]]&&(h>0&&(e[s]=n[h-1]),n[h]=s)}}for(h=n.length,m=n[h-1];h-- >0;)n[h]=m,m=e[m];return n}function nl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:nl(e)}const td=t=>t.__isTeleport,is=Symbol.for("v-fgt"),Rn=Symbol.for("v-txt"),Ri=Symbol.for("v-cmt"),qr=Symbol.for("v-stc"),Pi=[];let ns=null;function Li(t=!1){Pi.push(ns=t?null:[])}function ed(){Pi.pop(),ns=Pi[Pi.length-1]||null}let Fi=1;function rl(t){Fi+=t}function sd(t){return t.dynamicChildren=Fi>0?ns||Le:null,ed(),Fi>0&&ns&&ns.push(t),t}function Ii(t,e,n,s,o,h){return sd(We(t,e,n,s,o,h,!0))}function id(t){return t?t.__v_isVNode===!0:!1}function Di(t,e){return t.type===e.type&&t.key===e.key}const Pn="__vInternal",al=({key:t})=>t??null,Ln=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Oe(t)||Xe(t)||be(t)?{i:hs,r:t,k:e,f:!!n}:t:null);function We(t,e=null,n=null,s=0,o=null,h=t===is?0:1,m=!1,k=!1){const w={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&al(e),ref:e&&Ln(e),scopeId:En,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:h,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:hs};return k?(Wr(w,n),h&128&&t.normalize(w)):n&&(w.shapeFlag|=Oe(n)?8:16),Fi>0&&!m&&ns&&(w.patchFlag>0||h&6)&&w.patchFlag!==32&&ns.push(w),w}const $s=nd;function nd(t,e=null,n=null,s=0,o=null,h=!1){if((!t||t===Ac)&&(t=Ri),id(t)){const k=ci(t,e,!0);return n&&Wr(k,n),Fi>0&&!h&&ns&&(k.shapeFlag&6?ns[ns.indexOf(t)]=k:ns.push(k)),k.patchFlag|=-2,k}if(gd(t)&&(t=t.__vccOpts),e){e=rd(e);let{class:k,style:w}=e;k&&!Oe(k)&&(e.class=gr(k)),Ie(w)&&(xo(w)&&!fe(w)&&(w=je({},w)),e.style=fr(w))}const m=Oe(t)?1:yc(t)?128:td(t)?64:Ie(t)?4:be(t)?2:0;return We(t,e,n,s,o,m,h,!0)}function rd(t){return t?xo(t)||Pn in t?je({},t):t:null}function ci(t,e,n=!1){const{props:s,ref:o,patchFlag:h,children:m}=t,k=e?od(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:k,key:k&&al(k),ref:e&&e.ref?n&&o?fe(o)?o.concat(Ln(e)):[o,Ln(e)]:Ln(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:m,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==is?h===-1?16:h|16:h,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ci(t.ssContent),ssFallback:t.ssFallback&&ci(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ad(t=" ",e=0){return $s(Rn,null,t,e)}function cs(t){return t==null||typeof t=="boolean"?$s(Ri):fe(t)?$s(is,null,t.slice()):typeof t=="object"?Rs(t):$s(Rn,null,String(t))}function Rs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ci(t)}function Wr(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(s&65){const o=e.default;o&&(o._c&&(o._d=!1),Wr(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!(Pn in e)?e._ctx=hs:o===3&&hs&&(hs.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else be(e)?(e={default:e,_ctx:hs},n=32):(e=String(e),s&64?(n=16,e=[ad(e)]):n=8);t.children=e,t.shapeFlag|=n}function od(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(o==="class")e.class!==s.class&&(e.class=gr([e.class,s.class]));else if(o==="style")e.style=fr([e.style,s.style]);else if(ln(o)){const h=e[o],m=s[o];m&&h!==m&&!(fe(h)&&h.includes(m))&&(e[o]=h?[].concat(h,m):m)}else o!==""&&(e[o]=s[o])}return e}function ds(t,e,n,s=null){ss(t,e,7,[n,s])}const ld=Go();let hd=0;function cd(t,e,n){const s=t.type,o=(e?e.appContext:t.appContext)||ld,h={uid:hd++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ph(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yo(s,o),emitsOptions:Fo(s,o),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:s.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return h.ctx={_:h},h.root=e?e.root:h,h.emit=dc.bind(null,h),t.ce&&t.ce(h),h}let $e=null,Fn,$r;{const t=to(),e=(n,s)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(s),h=>{o.length>1?o.forEach(m=>m(h)):o[0](h)}};Fn=e("__VUE_INSTANCE_SETTERS__",n=>$e=n),$r=e("__VUE_SSR_SETTERS__",n=>In=n)}const Oi=t=>{const e=$e;return Fn(t),t.scope.on(),()=>{t.scope.off(),Fn(e)}},ol=()=>{$e&&$e.scope.off(),Fn(null)};function ll(t){return t.vnode.shapeFlag&4}let In=!1;function dd(t,e=!1){e&&$r(e);const{props:n,children:s}=t.vnode,o=ll(t);Wc(t,n,o,e),Xc(t,s);const h=o?ud(t,e):void 0;return e&&$r(!1),h}function ud(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Mr(new Proxy(t.ctx,Oc));const{setup:s}=n;if(s){const o=t.setupContext=s.length>1?fd(t):null,h=Oi(t);js();const m=Ms(s,t,0,[t.props,o]);if(Vs(),h(),Ya(m)){if(m.then(ol,ol),e)return m.then(k=>{hl(t,k,e)}).catch(k=>{_n(k,t,0)});t.asyncDep=m}else hl(t,m,e)}else dl(t,e)}function hl(t,e,n){be(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ie(e)&&(t.setupState=To(e)),dl(t,n)}let cl;function dl(t,e,n){const s=t.type;if(!t.render){if(!e&&cl&&!s.render){const o=s.template||Br(t).template;if(o){const{isCustomElement:h,compilerOptions:m}=t.appContext.config,{delimiters:k,compilerOptions:w}=s,T=je(je({isCustomElement:h,delimiters:k},m),w);s.render=cl(o,T)}}t.render=s.render||Be}{const o=Oi(t);js();try{Nc(t)}finally{Vs(),o()}}}function pd(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Ge(t,"get","$attrs"),e[n]}}))}function fd(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return pd(t)},slots:t.slots,emit:t.emit,expose:e}}function Gr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(To(Mr(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ti)return Ti[n](t)},has(e,n){return n in e||n in Ti}}))}function gd(t){return be(t)&&"__vccOpts"in t}const md=(t,e)=>tc(t,e,In),vd="3.4.21",bd="http://www.w3.org/2000/svg",Ad="http://www.w3.org/1998/Math/MathML",Ps=typeof document<"u"?document:null,ul=Ps&&Ps.createElement("template"),yd={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const o=e==="svg"?Ps.createElementNS(bd,t):e==="mathml"?Ps.createElementNS(Ad,t):Ps.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:t=>Ps.createTextNode(t),createComment:t=>Ps.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ps.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,o,h){const m=n?n.previousSibling:e.lastChild;if(o&&(o===h||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===h||!(o=o.nextSibling)););else{ul.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const k=ul.content;if(s==="svg"||s==="mathml"){const w=k.firstChild;for(;w.firstChild;)k.appendChild(w.firstChild);k.removeChild(w)}e.insertBefore(k,n)}return[m?m.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_d=Symbol("_vtc");function wd(t,e,n){const s=t[_d];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const pl=Symbol("_vod"),Ed=Symbol("_vsh"),xd=Symbol(""),Sd=/(^|;)\s*display\s*:/;function Cd(t,e,n){const s=t.style,o=Oe(n);let h=!1;if(n&&!o){if(e)if(Oe(e))for(const m of e.split(";")){const k=m.slice(0,m.indexOf(":")).trim();n[k]==null&&Dn(s,k,"")}else for(const m in e)n[m]==null&&Dn(s,m,"");for(const m in n)m==="display"&&(h=!0),Dn(s,m,n[m])}else if(o){if(e!==n){const m=s[xd];m&&(n+=";"+m),s.cssText=n,h=Sd.test(n)}}else e&&t.removeAttribute("style");pl in t&&(t[pl]=h?s.display:"",t[Ed]&&(s.display="none"))}const fl=/\s*!important$/;function Dn(t,e,n){if(fe(n))n.forEach(s=>Dn(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Td(t,e);fl.test(n)?t.setProperty(ri(s),n.replace(fl,""),"important"):t[s]=n}}const gl=["Webkit","Moz","ms"],Xr={};function Td(t,e){const n=Xr[e];if(n)return n;let s=ni(e);if(s!=="filter"&&s in t)return Xr[e]=s;s=Ja(s);for(let o=0;o<gl.length;o++){const h=gl[o]+s;if(h in t)return Xr[e]=h}return e}const ml="http://www.w3.org/1999/xlink";function Md(t,e,n,s,o){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(ml,e.slice(6,e.length)):t.setAttributeNS(ml,e,n);else{const h=Rh(e);n==null||h&&!eo(n)?t.removeAttribute(e):t.setAttribute(e,h?"":n)}}function kd(t,e,n,s,o,h,m){if(e==="innerHTML"||e==="textContent"){s&&m(s,o,h),t[e]=n??"";return}const k=t.tagName;if(e==="value"&&k!=="PROGRESS"&&!k.includes("-")){const T=k==="OPTION"?t.getAttribute("value")||"":t.value,_=n??"";(T!==_||!("_value"in t))&&(t.value=_),n==null&&t.removeAttribute(e),t._value=n;return}let w=!1;if(n===""||n==null){const T=typeof t[e];T==="boolean"?n=eo(n):n==null&&T==="string"?(n="",w=!0):T==="number"&&(n=0,w=!0)}try{t[e]=n}catch{}w&&t.removeAttribute(e)}function Rd(t,e,n,s){t.addEventListener(e,n,s)}function Pd(t,e,n,s){t.removeEventListener(e,n,s)}const vl=Symbol("_vei");function Ld(t,e,n,s,o=null){const h=t[vl]||(t[vl]={}),m=h[e];if(s&&m)m.value=s;else{const[k,w]=Fd(e);if(s){const T=h[e]=Od(s,o);Rd(t,k,T,w)}else m&&(Pd(t,k,m,w),h[e]=void 0)}}const bl=/(?:Once|Passive|Capture)$/;function Fd(t){let e;if(bl.test(t)){e={};let n;for(;n=t.match(bl);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ri(t.slice(2)),e]}let Yr=0;const Id=Promise.resolve(),Dd=()=>Yr||(Id.then(()=>Yr=0),Yr=Date.now());function Od(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;ss(Nd(s,n.value),e,5,[s])};return n.value=t,n.attached=Dd(),n}function Nd(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>o=>!o._stopped&&s&&s(o))}else return e}const Al=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Bd=(t,e,n,s,o,h,m,k,w)=>{const T=o==="svg";e==="class"?wd(t,s,T):e==="style"?Cd(t,n,s):ln(e)?hr(e)||Ld(t,e,n,s,m):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ud(t,e,s,T))?kd(t,e,s,h,m,k,w):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Md(t,e,s,T))};function Ud(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Al(e)&&be(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Al(e)&&Oe(n)?!1:e in t}const jd=je({patchProp:Bd},yd);let yl;function Vd(){return yl||(yl=Kc(jd))}const zd=(...t)=>{const e=Vd().createApp(...t),{mount:n}=e;return e.mount=s=>{const o=qd(s);if(!o)return;const h=e._component;!be(h)&&!h.render&&!h.template&&(h.template=o.innerHTML),o.innerHTML="";const m=n(o,!1,Hd(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),m},e};function Hd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function qd(t){return Oe(t)?document.querySelector(t):t}const Wd="modulepreload",$d=function(t){return"/juegas-ajedrez/"+t},_l={},Ls=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){const o=document.getElementsByTagName("link");s=Promise.all(e.map(h=>{if(h=$d(h),h in _l)return;_l[h]=!0;const m=h.endsWith(".css"),k=m?'[rel="stylesheet"]':"";if(n)for(let T=o.length-1;T>=0;T--){const _=o[T];if(_.href===h&&(!m||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${k}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":Wd,m||(w.as="script",w.crossOrigin=""),w.href=h,document.head.appendChild(w),m)return new Promise((T,_)=>{w.addEventListener("load",T),w.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}return s.then(()=>t()).catch(o=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=o,window.dispatchEvent(h),!h.defaultPrevented)throw o})};var Gd={640:(t,e,n)=>{var Zt,qt,ei,pe,Sl,le,Cl,b,a,l,u,x,A,y,f,d,c,g,M,G,et,rt,vt,ft,bt,Tl,St,Wn,Dt,Zr,P,ta,tt,ct,gt,Et,It,te,Kt,ea,Qt,re,j,ot,Ml,mt,sa;n.d(e,{AnnotationLayer:()=>ce,FreeTextAnnotationElement:()=>ut,InkAnnotationElement:()=>Ht,StampAnnotationElement:()=>ne});var s=n(266),o=n(473),h=n(780);function m(Mt){return Math.floor(Math.max(0,Math.min(1,Mt))*255).toString(16).padStart(2,"0")}function k(Mt){return Math.max(0,Math.min(255,255*Mt))}class w{static CMYK_G([E,r,v,O]){return["G",1-Math.min(1,.3*E+.59*v+.11*r+O)]}static G_CMYK([E]){return["CMYK",0,0,0,1-E]}static G_RGB([E]){return["RGB",E,E,E]}static G_rgb([E]){return E=k(E),[E,E,E]}static G_HTML([E]){const r=m(E);return`#${r}${r}${r}`}static RGB_G([E,r,v]){return["G",.3*E+.59*r+.11*v]}static RGB_rgb(E){return E.map(k)}static RGB_HTML(E){return`#${E.map(m).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([E,r,v,O]){return["RGB",1-Math.min(1,E+O),1-Math.min(1,v+O),1-Math.min(1,r+O)]}static CMYK_rgb([E,r,v,O]){return[k(1-Math.min(1,E+O)),k(1-Math.min(1,v+O)),k(1-Math.min(1,r+O))]}static CMYK_HTML(E){const r=this.CMYK_RGB(E).slice(1);return this.RGB_HTML(r)}static RGB_CMYK([E,r,v]){const O=1-E,q=1-r,st=1-v,at=Math.min(O,q,st);return["CMYK",O,q,st,at]}}var T=n(160);const _=1e3,I=9,N=new WeakSet;function R(Mt){return{width:Mt[2]-Mt[0],height:Mt[3]-Mt[1]}}class Z{static create(E){switch(E.data.annotationType){case s.AnnotationType.LINK:return new H(E);case s.AnnotationType.TEXT:return new V(E);case s.AnnotationType.WIDGET:switch(E.data.fieldType){case"Tx":return new $(E);case"Btn":return E.data.radioButton?new C(E):E.data.checkBox?new Y(E):new B(E);case"Ch":return new J(E);case"Sig":return new D(E)}return new X(E);case s.AnnotationType.POPUP:return new lt(E);case s.AnnotationType.FREETEXT:return new ut(E);case s.AnnotationType.LINE:return new wt(E);case s.AnnotationType.SQUARE:return new jt(E);case s.AnnotationType.CIRCLE:return new Nt(E);case s.AnnotationType.POLYLINE:return new Ft(E);case s.AnnotationType.CARET:return new Yt(E);case s.AnnotationType.INK:return new Ht(E);case s.AnnotationType.POLYGON:return new Pt(E);case s.AnnotationType.HIGHLIGHT:return new ue(E);case s.AnnotationType.UNDERLINE:return new ie(E);case s.AnnotationType.SQUIGGLY:return new Jt(E);case s.AnnotationType.STRIKEOUT:return new Vt(E);case s.AnnotationType.STAMP:return new ne(E);case s.AnnotationType.FILEATTACHMENT:return new $t(E);default:return new L(E)}}}const oe=class oe{constructor(E,{isRenderable:r=!1,ignoreBorder:v=!1,createQuadrilaterals:O=!1}={}){S(this,Zt,!1);this.isRenderable=r,this.data=E.data,this.layer=E.layer,this.linkService=E.linkService,this.downloadManager=E.downloadManager,this.imageResourcesPath=E.imageResourcesPath,this.renderForms=E.renderForms,this.svgFactory=E.svgFactory,this.annotationStorage=E.annotationStorage,this.enableScripting=E.enableScripting,this.hasJSActions=E.hasJSActions,this._fieldObjects=E.fieldObjects,this.parent=E.parent,r&&(this.container=this._createContainer(v)),O&&this._createQuadrilaterals()}static _hasPopupData({titleObj:E,contentsObj:r,richText:v}){return!!(E!=null&&E.str||r!=null&&r.str||v!=null&&v.str)}get hasPopupData(){return oe._hasPopupData(this.data)}_createContainer(E){const{data:r,parent:{page:v,viewport:O}}=this,q=document.createElement("section");q.setAttribute("data-annotation-id",r.id),this instanceof X||(q.tabIndex=_),q.style.zIndex=this.parent.zIndex++,this.data.popupRef&&q.setAttribute("aria-haspopup","dialog"),r.noRotate&&q.classList.add("norotate");const{pageWidth:st,pageHeight:at,pageX:yt,pageY:kt}=O.rawDims;if(!r.rect||this instanceof lt){const{rotation:ee}=r;return!r.hasOwnCanvas&&ee!==0&&this.setRotation(ee,q),q}const{width:Ct,height:Wt}=R(r.rect),Bt=s.Util.normalizeRect([r.rect[0],v.view[3]-r.rect[1]+v.view[1],r.rect[2],v.view[3]-r.rect[3]+v.view[1]]);if(!E&&r.borderStyle.width>0){q.style.borderWidth=`${r.borderStyle.width}px`;const ee=r.borderStyle.horizontalCornerRadius,Gt=r.borderStyle.verticalCornerRadius;if(ee>0||Gt>0){const ge=`calc(${ee}px * var(--scale-factor)) / calc(${Gt}px * var(--scale-factor))`;q.style.borderRadius=ge}else if(this instanceof C){const ge=`calc(${Ct}px * var(--scale-factor)) / calc(${Wt}px * var(--scale-factor))`;q.style.borderRadius=ge}switch(r.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:q.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:q.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:q.style.borderBottomStyle="solid";break}const de=r.borderColor||null;de?(W(this,Zt,!0),q.style.borderColor=s.Util.makeHexColor(de[0]|0,de[1]|0,de[2]|0)):q.style.borderWidth=0}q.style.left=`${100*(Bt[0]-yt)/st}%`,q.style.top=`${100*(Bt[1]-kt)/at}%`;const{rotation:Lt}=r;return r.hasOwnCanvas||Lt===0?(q.style.width=`${100*Ct/st}%`,q.style.height=`${100*Wt/at}%`):this.setRotation(Lt,q),q}setRotation(E,r=this.container){if(!this.data.rect)return;const{pageWidth:v,pageHeight:O}=this.parent.viewport.rawDims,{width:q,height:st}=R(this.data.rect);let at,yt;E%180===0?(at=100*q/v,yt=100*st/O):(at=100*st/v,yt=100*q/O),r.style.width=`${at}%`,r.style.height=`${yt}%`,r.setAttribute("data-main-rotation",(360-E)%360)}get _commonActions(){const E=(r,v,O)=>{const q=O.detail[r],st=q[0],at=q.slice(1);O.target.style[v]=w[`${st}_HTML`](at),this.annotationStorage.setValue(this.data.id,{[v]:w[`${st}_rgb`](at)})};return(0,s.shadow)(this,"_commonActions",{display:r=>{const{display:v}=r.detail,O=v%2===1;this.container.style.visibility=O?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:O,noPrint:v===1||v===2})},print:r=>{this.annotationStorage.setValue(this.data.id,{noPrint:!r.detail.print})},hidden:r=>{const{hidden:v}=r.detail;this.container.style.visibility=v?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:v,noView:v})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.target.disabled=r.detail.readonly},required:r=>{this._setRequired(r.target,r.detail.required)},bgColor:r=>{E("bgColor","backgroundColor",r)},fillColor:r=>{E("fillColor","backgroundColor",r)},fgColor:r=>{E("fgColor","color",r)},textColor:r=>{E("textColor","color",r)},borderColor:r=>{E("borderColor","borderColor",r)},strokeColor:r=>{E("strokeColor","borderColor",r)},rotation:r=>{const v=r.detail.rotation;this.setRotation(v),this.annotationStorage.setValue(this.data.id,{rotation:v})}})}_dispatchEventFromSandbox(E,r){var O;const v=this._commonActions;for(const q of Object.keys(r.detail))(O=E[q]||v[q])==null||O(r)}_setDefaultPropertiesFromJS(E){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const v=this._commonActions;for(const[O,q]of Object.entries(r)){const st=v[O];if(st){const at={detail:{[O]:q},target:E};st(at),delete r[O]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:E}=this.data;if(!E)return;const[r,v,O,q]=this.data.rect;if(E.length===1){const[,{x:Gt,y:de},{x:ge,y:Ce}]=E[0];if(O===Gt&&q===de&&r===ge&&v===Ce)return}const{style:st}=this.container;let at;if(i(this,Zt)){const{borderColor:Gt,borderWidth:de}=st;st.borderWidth=0,at=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Gt}" stroke-width="${de}">`],this.container.classList.add("hasBorder")}const yt=O-r,kt=q-v,{svgFactory:Ct}=this,Wt=Ct.createElement("svg");Wt.classList.add("quadrilateralsContainer"),Wt.setAttribute("width",0),Wt.setAttribute("height",0);const Bt=Ct.createElement("defs");Wt.append(Bt);const Lt=Ct.createElement("clipPath"),ee=`clippath_${this.data.id}`;Lt.setAttribute("id",ee),Lt.setAttribute("clipPathUnits","objectBoundingBox"),Bt.append(Lt);for(const[,{x:Gt,y:de},{x:ge,y:Ce}]of E){const Re=Ct.createElement("rect"),Ze=(ge-r)/yt,De=(q-de)/kt,Ne=(Gt-ge)/yt,Ke=(de-Ce)/kt;Re.setAttribute("x",Ze),Re.setAttribute("y",De),Re.setAttribute("width",Ne),Re.setAttribute("height",Ke),Lt.append(Re),at==null||at.push(`<rect vector-effect="non-scaling-stroke" x="${Ze}" y="${De}" width="${Ne}" height="${Ke}"/>`)}i(this,Zt)&&(at.push("</g></svg>')"),st.backgroundImage=at.join("")),this.container.append(Wt),this.container.style.clipPath=`url(#${ee})`}_createPopup(){const{container:E,data:r}=this;E.setAttribute("aria-haspopup","dialog");const v=new lt({data:{color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,parentRect:r.rect,borderStyle:0,id:`popup_${r.id}`,rotation:r.rotation},parent:this.parent,elements:[this]});this.parent.div.append(v.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(E,r=null){const v=[];if(this._fieldObjects){const O=this._fieldObjects[E];if(O)for(const{page:q,id:st,exportValues:at}of O){if(q===-1||st===r)continue;const yt=typeof at=="string"?at:null,kt=document.querySelector(`[data-element-id="${st}"]`);if(kt&&!N.has(kt)){(0,s.warn)(`_getElementsByName - element not allowed: ${st}`);continue}v.push({id:st,exportValue:yt,domElement:kt})}return v}for(const O of document.getElementsByName(E)){const{exportValue:q}=O,st=O.getAttribute("data-element-id");st!==r&&N.has(O)&&v.push({id:st,exportValue:q,domElement:O})}return v}show(){var E;this.container&&(this.container.hidden=!1),(E=this.popup)==null||E.maybeShow()}hide(){var E;this.container&&(this.container.hidden=!0),(E=this.popup)==null||E.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const E=this.getElementsToTriggerPopup();if(Array.isArray(E))for(const r of E)r.classList.add("highlightArea");else E.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:E,data:{id:r}}=this;this.container.addEventListener("dblclick",()=>{var v;(v=this.linkService.eventBus)==null||v.dispatch("switchannotationeditormode",{source:this,mode:E,editId:r})})}};Zt=new WeakMap;let L=oe;class H extends L{constructor(r,v=null){super(r,{isRenderable:!0,ignoreBorder:!!(v!=null&&v.ignoreBorder),createQuadrilaterals:!0});S(this,qt);S(this,pe);S(this,le);this.isTooltipOnly=r.data.isTooltipOnly}render(){const{data:r,linkService:v}=this,O=document.createElement("a");O.setAttribute("data-element-id",r.id);let q=!1;return r.url?(v.addLinkAttributes(O,r.url,r.newWindow),q=!0):r.action?(this._bindNamedAction(O,r.action),q=!0):r.attachment?(U(this,pe,Sl).call(this,O,r.attachment,r.attachmentDest),q=!0):r.setOCGState?(U(this,le,Cl).call(this,O,r.setOCGState),q=!0):r.dest?(this._bindLink(O,r.dest),q=!0):(r.actions&&(r.actions.Action||r.actions["Mouse Up"]||r.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(O,r),q=!0),r.resetForm?(this._bindResetFormAction(O,r.resetForm),q=!0):this.isTooltipOnly&&!q&&(this._bindLink(O,""),q=!0)),this.container.classList.add("linkAnnotation"),q&&this.container.append(O),this.container}_bindLink(r,v){r.href=this.linkService.getDestinationHash(v),r.onclick=()=>(v&&this.linkService.goToDestination(v),!1),(v||v==="")&&U(this,qt,ei).call(this)}_bindNamedAction(r,v){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeNamedAction(v),!1),U(this,qt,ei).call(this)}_bindJSAction(r,v){r.href=this.linkService.getAnchorUrl("");const O=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const q of Object.keys(v.actions)){const st=O.get(q);st&&(r[st]=()=>{var at;return(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v.id,name:q}}),!1})}r.onclick||(r.onclick=()=>!1),U(this,qt,ei).call(this)}_bindResetFormAction(r,v){const O=r.onclick;if(O||(r.href=this.linkService.getAnchorUrl("")),U(this,qt,ei).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),O||(r.onclick=()=>!1);return}r.onclick=()=>{var Wt;O==null||O();const{fields:q,refs:st,include:at}=v,yt=[];if(q.length!==0||st.length!==0){const Bt=new Set(st);for(const Lt of q){const ee=this._fieldObjects[Lt]||[];for(const{id:Gt}of ee)Bt.add(Gt)}for(const Lt of Object.values(this._fieldObjects))for(const ee of Lt)Bt.has(ee.id)===at&&yt.push(ee)}else for(const Bt of Object.values(this._fieldObjects))yt.push(...Bt);const kt=this.annotationStorage,Ct=[];for(const Bt of yt){const{id:Lt}=Bt;switch(Ct.push(Lt),Bt.type){case"text":{const Gt=Bt.defaultValue||"";kt.setValue(Lt,{value:Gt});break}case"checkbox":case"radiobutton":{const Gt=Bt.defaultValue===Bt.exportValues;kt.setValue(Lt,{value:Gt});break}case"combobox":case"listbox":{const Gt=Bt.defaultValue||"";kt.setValue(Lt,{value:Gt});break}default:continue}const ee=document.querySelector(`[data-element-id="${Lt}"]`);if(ee){if(!N.has(ee)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${Lt}`);continue}}else continue;ee.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Wt=this.linkService.eventBus)==null||Wt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ct,name:"ResetForm"}})),!1}}}qt=new WeakSet,ei=function(){this.container.setAttribute("data-internal-link","")},pe=new WeakSet,Sl=function(r,v,O=null){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>{var q;return(q=this.downloadManager)==null||q.openOrDownloadData(v.content,v.filename,O),!1},U(this,qt,ei).call(this)},le=new WeakSet,Cl=function(r,v){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeSetOCGState(v),!1),U(this,qt,ei).call(this)};class V extends L{constructor(E){super(E,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const E=document.createElement("img");return E.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",E.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),E.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(E),this.container}}class X extends L{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(E){var r;this.data.hasOwnCanvas&&(((r=E.previousSibling)==null?void 0:r.nodeName)==="CANVAS"&&(E.previousSibling.hidden=!0),E.hidden=!1)}_getKeyModifier(E){return s.FeatureTest.platform.isMac?E.metaKey:E.ctrlKey}_setEventListener(E,r,v,O,q){v.includes("mouse")?E.addEventListener(v,st=>{var at;(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:O,value:q(st),shift:st.shiftKey,modifier:this._getKeyModifier(st)}})}):E.addEventListener(v,st=>{var at;if(v==="blur"){if(!r.focused||!st.relatedTarget)return;r.focused=!1}else if(v==="focus"){if(r.focused)return;r.focused=!0}q&&((at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:O,value:q(st)}}))})}_setEventListeners(E,r,v,O){var q,st,at;for(const[yt,kt]of v)(kt==="Action"||(q=this.data.actions)!=null&&q[kt])&&((kt==="Focus"||kt==="Blur")&&(r||(r={focused:!1})),this._setEventListener(E,r,yt,kt,O),kt==="Focus"&&!((st=this.data.actions)!=null&&st.Blur)?this._setEventListener(E,r,"blur","Blur",null):kt==="Blur"&&!((at=this.data.actions)!=null&&at.Focus)&&this._setEventListener(E,r,"focus","Focus",null))}_setBackgroundColor(E){const r=this.data.backgroundColor||null;E.style.backgroundColor=r===null?"transparent":s.Util.makeHexColor(r[0],r[1],r[2])}_setTextStyle(E){const r=["left","center","right"],{fontColor:v}=this.data.defaultAppearanceData,O=this.data.defaultAppearanceData.fontSize||I,q=E.style;let st;const at=2,yt=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-at),Ct=Math.round(kt/(s.LINE_FACTOR*O))||1,Wt=kt/Ct;st=Math.min(O,yt(Wt/s.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-at);st=Math.min(O,yt(kt/s.LINE_FACTOR))}q.fontSize=`calc(${st}px * var(--scale-factor))`,q.color=s.Util.makeHexColor(v[0],v[1],v[2]),this.data.textAlignment!==null&&(q.textAlign=r[this.data.textAlignment])}_setRequired(E,r){r?E.setAttribute("required",!0):E.removeAttribute("required"),E.setAttribute("aria-required",r)}}class $ extends X{constructor(E){const r=E.renderForms||E.data.hasOwnCanvas||!E.data.hasAppearance&&!!E.data.fieldValue;super(E,{isRenderable:r})}setPropertyOnSiblings(E,r,v,O){const q=this.annotationStorage;for(const st of this._getElementsByName(E.name,E.id))st.domElement&&(st.domElement[r]=v),q.setValue(st.id,{[O]:v})}render(){var O,q;const E=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let v=null;if(this.renderForms){const st=E.getValue(r,{value:this.data.fieldValue});let at=st.value||"";const yt=E.getValue(r,{charLimit:this.data.maxLen}).charLimit;yt&&at.length>yt&&(at=at.slice(0,yt));let kt=st.formattedValue||((O=this.data.textContent)==null?void 0:O.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Ct={userValue:at,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(v=document.createElement("textarea"),v.textContent=kt??at,this.data.doNotScroll&&(v.style.overflowY="hidden")):(v=document.createElement("input"),v.type="text",v.setAttribute("value",kt??at),this.data.doNotScroll&&(v.style.overflowX="hidden")),this.data.hasOwnCanvas&&(v.hidden=!0),N.add(v),v.setAttribute("data-element-id",r),v.disabled=this.data.readOnly,v.name=this.data.fieldName,v.tabIndex=_,this._setRequired(v,this.data.required),yt&&(v.maxLength=yt),v.addEventListener("input",Bt=>{E.setValue(r,{value:Bt.target.value}),this.setPropertyOnSiblings(v,"value",Bt.target.value,"value"),Ct.formattedValue=null}),v.addEventListener("resetform",Bt=>{const Lt=this.data.defaultFieldValue??"";v.value=Ct.userValue=Lt,Ct.formattedValue=null});let Wt=Bt=>{const{formattedValue:Lt}=Ct;Lt!=null&&(Bt.target.value=Lt),Bt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){v.addEventListener("focus",Lt=>{var Gt;if(Ct.focused)return;const{target:ee}=Lt;Ct.userValue&&(ee.value=Ct.userValue),Ct.lastCommittedValue=ee.value,Ct.commitKey=1,(Gt=this.data.actions)!=null&&Gt.Focus||(Ct.focused=!0)}),v.addEventListener("updatefromsandbox",Lt=>{this.showElementAndHideCanvas(Lt.target);const ee={value(Gt){Ct.userValue=Gt.detail.value??"",E.setValue(r,{value:Ct.userValue.toString()}),Gt.target.value=Ct.userValue},formattedValue(Gt){const{formattedValue:de}=Gt.detail;Ct.formattedValue=de,de!=null&&Gt.target!==document.activeElement&&(Gt.target.value=de),E.setValue(r,{formattedValue:de})},selRange(Gt){Gt.target.setSelectionRange(...Gt.detail.selRange)},charLimit:Gt=>{var Re;const{charLimit:de}=Gt.detail,{target:ge}=Gt;if(de===0){ge.removeAttribute("maxLength");return}ge.setAttribute("maxLength",de);let Ce=Ct.userValue;!Ce||Ce.length<=de||(Ce=Ce.slice(0,de),ge.value=Ct.userValue=Ce,E.setValue(r,{value:Ce}),(Re=this.linkService.eventBus)==null||Re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Ce,willCommit:!0,commitKey:1,selStart:ge.selectionStart,selEnd:ge.selectionEnd}}))}};this._dispatchEventFromSandbox(ee,Lt)}),v.addEventListener("keydown",Lt=>{var de;Ct.commitKey=1;let ee=-1;if(Lt.key==="Escape"?ee=0:Lt.key==="Enter"&&!this.data.multiLine?ee=2:Lt.key==="Tab"&&(Ct.commitKey=3),ee===-1)return;const{value:Gt}=Lt.target;Ct.lastCommittedValue!==Gt&&(Ct.lastCommittedValue=Gt,Ct.userValue=Gt,(de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Gt,willCommit:!0,commitKey:ee,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}}))});const Bt=Wt;Wt=null,v.addEventListener("blur",Lt=>{var Gt,de;if(!Ct.focused||!Lt.relatedTarget)return;(Gt=this.data.actions)!=null&&Gt.Blur||(Ct.focused=!1);const{value:ee}=Lt.target;Ct.userValue=ee,Ct.lastCommittedValue!==ee&&((de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:ee,willCommit:!0,commitKey:Ct.commitKey,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}})),Bt(Lt)}),(q=this.data.actions)!=null&&q.Keystroke&&v.addEventListener("beforeinput",Lt=>{var De;Ct.lastCommittedValue=null;const{data:ee,target:Gt}=Lt,{value:de,selectionStart:ge,selectionEnd:Ce}=Gt;let Re=ge,Ze=Ce;switch(Lt.inputType){case"deleteWordBackward":{const Ne=de.substring(0,ge).match(/\w*[^\w]*$/);Ne&&(Re-=Ne[0].length);break}case"deleteWordForward":{const Ne=de.substring(ge).match(/^[^\w]*\w*/);Ne&&(Ze+=Ne[0].length);break}case"deleteContentBackward":ge===Ce&&(Re-=1);break;case"deleteContentForward":ge===Ce&&(Ze+=1);break}Lt.preventDefault(),(De=this.linkService.eventBus)==null||De.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:de,change:ee||"",willCommit:!1,selStart:Re,selEnd:Ze}})}),this._setEventListeners(v,Ct,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Lt=>Lt.target.value)}if(Wt&&v.addEventListener("blur",Wt),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/yt;v.classList.add("comb"),v.style.letterSpacing=`calc(${Bt}px * var(--scale-factor) - 1ch)`}}else v=document.createElement("div"),v.textContent=this.data.fieldValue,v.style.verticalAlign="middle",v.style.display="table-cell",this.data.hasOwnCanvas&&(v.hidden=!0);return this._setTextStyle(v),this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}class D extends X{constructor(E){super(E,{isRenderable:!!E.data.hasOwnCanvas})}}class Y extends X{constructor(E){super(E,{isRenderable:E.renderForms})}render(){const E=this.annotationStorage,r=this.data,v=r.id;let O=E.getValue(v,{value:r.exportValue===r.fieldValue}).value;typeof O=="string"&&(O=O!=="Off",E.setValue(v,{value:O})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const q=document.createElement("input");return N.add(q),q.setAttribute("data-element-id",v),q.disabled=r.readOnly,this._setRequired(q,this.data.required),q.type="checkbox",q.name=r.fieldName,O&&q.setAttribute("checked",!0),q.setAttribute("exportValue",r.exportValue),q.tabIndex=_,q.addEventListener("change",st=>{const{name:at,checked:yt}=st.target;for(const kt of this._getElementsByName(at,v)){const Ct=yt&&kt.exportValue===r.exportValue;kt.domElement&&(kt.domElement.checked=Ct),E.setValue(kt.id,{value:Ct})}E.setValue(v,{value:yt})}),q.addEventListener("resetform",st=>{const at=r.defaultFieldValue||"Off";st.target.checked=at===r.exportValue}),this.enableScripting&&this.hasJSActions&&(q.addEventListener("updatefromsandbox",st=>{const at={value(yt){yt.target.checked=yt.detail.value!=="Off",E.setValue(v,{value:yt.target.checked})}};this._dispatchEventFromSandbox(at,st)}),this._setEventListeners(q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],st=>st.target.checked)),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class C extends X{constructor(E){super(E,{isRenderable:E.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const E=this.annotationStorage,r=this.data,v=r.id;let O=E.getValue(v,{value:r.fieldValue===r.buttonValue}).value;if(typeof O=="string"&&(O=O!==r.buttonValue,E.setValue(v,{value:O})),O)for(const st of this._getElementsByName(r.fieldName,v))E.setValue(st.id,{value:!1});const q=document.createElement("input");if(N.add(q),q.setAttribute("data-element-id",v),q.disabled=r.readOnly,this._setRequired(q,this.data.required),q.type="radio",q.name=r.fieldName,O&&q.setAttribute("checked",!0),q.tabIndex=_,q.addEventListener("change",st=>{const{name:at,checked:yt}=st.target;for(const kt of this._getElementsByName(at,v))E.setValue(kt.id,{value:!1});E.setValue(v,{value:yt})}),q.addEventListener("resetform",st=>{const at=r.defaultFieldValue;st.target.checked=at!=null&&at===r.buttonValue}),this.enableScripting&&this.hasJSActions){const st=r.buttonValue;q.addEventListener("updatefromsandbox",at=>{const yt={value:kt=>{const Ct=st===kt.detail.value;for(const Wt of this._getElementsByName(kt.target.name)){const Bt=Ct&&Wt.id===v;Wt.domElement&&(Wt.domElement.checked=Bt),E.setValue(Wt.id,{value:Bt})}}};this._dispatchEventFromSandbox(yt,at)}),this._setEventListeners(q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)}return this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class B extends H{constructor(E){super(E,{ignoreBorder:E.data.hasAppearance})}render(){const E=super.render();E.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(E.title=this.data.alternativeText);const r=E.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",v=>{this._dispatchEventFromSandbox({},v)})),E}}class J extends X{constructor(E){super(E,{isRenderable:E.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const E=this.annotationStorage,r=this.data.id,v=E.getValue(r,{value:this.data.fieldValue}),O=document.createElement("select");N.add(O),O.setAttribute("data-element-id",r),O.disabled=this.data.readOnly,this._setRequired(O,this.data.required),O.name=this.data.fieldName,O.tabIndex=_;let q=this.data.combo&&this.data.options.length>0;this.data.combo||(O.size=this.data.options.length,this.data.multiSelect&&(O.multiple=!0)),O.addEventListener("resetform",Ct=>{const Wt=this.data.defaultFieldValue;for(const Bt of O.options)Bt.selected=Bt.value===Wt});for(const Ct of this.data.options){const Wt=document.createElement("option");Wt.textContent=Ct.displayValue,Wt.value=Ct.exportValue,v.value.includes(Ct.exportValue)&&(Wt.setAttribute("selected",!0),q=!1),O.append(Wt)}let st=null;if(q){const Ct=document.createElement("option");Ct.value=" ",Ct.setAttribute("hidden",!0),Ct.setAttribute("selected",!0),O.prepend(Ct),st=()=>{Ct.remove(),O.removeEventListener("input",st),st=null},O.addEventListener("input",st)}const at=Ct=>{const Wt=Ct?"value":"textContent",{options:Bt,multiple:Lt}=O;return Lt?Array.prototype.filter.call(Bt,ee=>ee.selected).map(ee=>ee[Wt]):Bt.selectedIndex===-1?null:Bt[Bt.selectedIndex][Wt]};let yt=at(!1);const kt=Ct=>{const Wt=Ct.target.options;return Array.prototype.map.call(Wt,Bt=>({displayValue:Bt.textContent,exportValue:Bt.value}))};return this.enableScripting&&this.hasJSActions?(O.addEventListener("updatefromsandbox",Ct=>{const Wt={value(Bt){st==null||st();const Lt=Bt.detail.value,ee=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const Gt of O.options)Gt.selected=ee.has(Gt.value);E.setValue(r,{value:at(!0)}),yt=at(!1)},multipleSelection(Bt){O.multiple=!0},remove(Bt){const Lt=O.options,ee=Bt.detail.remove;Lt[ee].selected=!1,O.remove(ee),Lt.length>0&&Array.prototype.findIndex.call(Lt,Gt=>Gt.selected)===-1&&(Lt[0].selected=!0),E.setValue(r,{value:at(!0),items:kt(Bt)}),yt=at(!1)},clear(Bt){for(;O.length!==0;)O.remove(0);E.setValue(r,{value:null,items:[]}),yt=at(!1)},insert(Bt){const{index:Lt,displayValue:ee,exportValue:Gt}=Bt.detail.insert,de=O.children[Lt],ge=document.createElement("option");ge.textContent=ee,ge.value=Gt,de?de.before(ge):O.append(ge),E.setValue(r,{value:at(!0),items:kt(Bt)}),yt=at(!1)},items(Bt){const{items:Lt}=Bt.detail;for(;O.length!==0;)O.remove(0);for(const ee of Lt){const{displayValue:Gt,exportValue:de}=ee,ge=document.createElement("option");ge.textContent=Gt,ge.value=de,O.append(ge)}O.options.length>0&&(O.options[0].selected=!0),E.setValue(r,{value:at(!0),items:kt(Bt)}),yt=at(!1)},indices(Bt){const Lt=new Set(Bt.detail.indices);for(const ee of Bt.target.options)ee.selected=Lt.has(ee.index);E.setValue(r,{value:at(!0)}),yt=at(!1)},editable(Bt){Bt.target.disabled=!Bt.detail.editable}};this._dispatchEventFromSandbox(Wt,Ct)}),O.addEventListener("input",Ct=>{var Bt;const Wt=at(!0);E.setValue(r,{value:Wt}),Ct.preventDefault(),(Bt=this.linkService.eventBus)==null||Bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:yt,changeEx:Wt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(O,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ct=>Ct.target.value)):O.addEventListener("input",function(Ct){E.setValue(r,{value:at(!0)})}),this.data.combo&&this._setTextStyle(O),this._setBackgroundColor(O),this._setDefaultPropertiesFromJS(O),this.container.append(O),this.container}}class lt extends L{constructor(E){const{data:r,elements:v}=E;super(E,{isRenderable:L._hasPopupData(r)}),this.elements=v}render(){this.container.classList.add("popupAnnotation");const E=new Q({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const v of this.elements)v.popup=E,r.push(v.data.id),v.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(v=>`${s.AnnotationPrefix}${v}`).join(",")),this.container}}class Q{constructor({container:E,color:r,elements:v,titleObj:O,modificationDate:q,contentsObj:st,richText:at,parent:yt,rect:kt,parentRect:Ct,open:Wt}){S(this,bt);S(this,St);S(this,Dt);S(this,P);S(this,b,U(this,bt,Tl).bind(this));S(this,a,U(this,P,ta).bind(this));S(this,l,U(this,Dt,Zr).bind(this));S(this,u,U(this,St,Wn).bind(this));S(this,x,null);S(this,A,null);S(this,y,null);S(this,f,null);S(this,d,null);S(this,c,null);S(this,g,null);S(this,M,!1);S(this,G,null);S(this,et,null);S(this,rt,null);S(this,vt,null);S(this,ft,!1);var Bt;W(this,A,E),W(this,vt,O),W(this,y,st),W(this,rt,at),W(this,c,yt),W(this,x,r),W(this,et,kt),W(this,g,Ct),W(this,d,v),W(this,f,o.PDFDateString.toDateObject(q)),this.trigger=v.flatMap(Lt=>Lt.getElementsToTriggerPopup());for(const Lt of this.trigger)Lt.addEventListener("click",i(this,u)),Lt.addEventListener("mouseenter",i(this,l)),Lt.addEventListener("mouseleave",i(this,a)),Lt.classList.add("popupTriggerArea");for(const Lt of v)(Bt=Lt.container)==null||Bt.addEventListener("keydown",i(this,b));i(this,A).hidden=!0,Wt&&U(this,St,Wn).call(this)}render(){if(i(this,G))return;const{page:{view:E},viewport:{rawDims:{pageWidth:r,pageHeight:v,pageX:O,pageY:q}}}=i(this,c),st=W(this,G,document.createElement("div"));if(st.className="popup",i(this,x)){const Ce=st.style.outlineColor=s.Util.makeHexColor(...i(this,x));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?st.style.backgroundColor=`color-mix(in srgb, ${Ce} 30%, white)`:st.style.backgroundColor=s.Util.makeHexColor(...i(this,x).map(Re=>Math.floor(.7*(255-Re)+Re)))}const at=document.createElement("span");at.className="header";const yt=document.createElement("h1");if(at.append(yt),{dir:yt.dir,str:yt.textContent}=i(this,vt),st.append(at),i(this,f)){const Ce=document.createElement("span");Ce.classList.add("popupDate"),Ce.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),Ce.setAttribute("data-l10n-args",JSON.stringify({date:i(this,f).toLocaleDateString(),time:i(this,f).toLocaleTimeString()})),at.append(Ce)}const kt=i(this,y),Ct=i(this,rt);if(Ct!=null&&Ct.str&&(!(kt!=null&&kt.str)||kt.str===Ct.str))T.XfaLayer.render({xfaHtml:Ct.html,intent:"richText",div:st}),st.lastChild.classList.add("richText","popupContent");else{const Ce=this._formatContents(kt);st.append(Ce)}let Wt=!!i(this,g),Bt=Wt?i(this,g):i(this,et);for(const Ce of i(this,d))if(!Bt||s.Util.intersect(Ce.data.rect,Bt)!==null){Bt=Ce.data.rect,Wt=!0;break}const Lt=s.Util.normalizeRect([Bt[0],E[3]-Bt[1]+E[1],Bt[2],E[3]-Bt[3]+E[1]]),ee=Wt?Bt[2]-Bt[0]+5:0,Gt=Lt[0]+ee,de=Lt[1],{style:ge}=i(this,A);ge.left=`${100*(Gt-O)/r}%`,ge.top=`${100*(de-q)/v}%`,i(this,A).append(st)}_formatContents({str:E,dir:r}){const v=document.createElement("p");v.classList.add("popupContent"),v.dir=r;const O=E.split(/(?:\r\n?|\n)/);for(let q=0,st=O.length;q<st;++q){const at=O[q];v.append(document.createTextNode(at)),q<st-1&&v.append(document.createElement("br"))}return v}forceHide(){W(this,ft,this.isVisible),i(this,ft)&&(i(this,A).hidden=!0)}maybeShow(){i(this,ft)&&(W(this,ft,!1),i(this,A).hidden=!1)}get isVisible(){return i(this,A).hidden===!1}}b=new WeakMap,a=new WeakMap,l=new WeakMap,u=new WeakMap,x=new WeakMap,A=new WeakMap,y=new WeakMap,f=new WeakMap,d=new WeakMap,c=new WeakMap,g=new WeakMap,M=new WeakMap,G=new WeakMap,et=new WeakMap,rt=new WeakMap,vt=new WeakMap,ft=new WeakMap,bt=new WeakSet,Tl=function(E){E.altKey||E.shiftKey||E.ctrlKey||E.metaKey||(E.key==="Enter"||E.key==="Escape"&&i(this,M))&&U(this,St,Wn).call(this)},St=new WeakSet,Wn=function(){W(this,M,!i(this,M)),i(this,M)?(U(this,Dt,Zr).call(this),i(this,A).addEventListener("click",i(this,u)),i(this,A).addEventListener("keydown",i(this,b))):(U(this,P,ta).call(this),i(this,A).removeEventListener("click",i(this,u)),i(this,A).removeEventListener("keydown",i(this,b)))},Dt=new WeakSet,Zr=function(){i(this,G)||this.render(),this.isVisible?i(this,M)&&i(this,A).classList.add("focused"):(i(this,A).hidden=!1,i(this,A).style.zIndex=parseInt(i(this,A).style.zIndex)+1e3)},P=new WeakSet,ta=function(){i(this,A).classList.remove("focused"),!(i(this,M)||!this.isVisible)&&(i(this,A).hidden=!0,i(this,A).style.zIndex=parseInt(i(this,A).style.zIndex)-1e3)};class ut extends L{constructor(E){super(E,{isRenderable:!0,ignoreBorder:!0}),this.textContent=E.data.textContent,this.textPosition=E.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const E=document.createElement("div");E.classList.add("annotationTextContent"),E.setAttribute("role","comment");for(const r of this.textContent){const v=document.createElement("span");v.textContent=r,E.append(v)}this.container.append(E)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class wt extends L{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});S(this,tt,null)}render(){this.container.classList.add("lineAnnotation");const r=this.data,{width:v,height:O}=R(r.rect),q=this.svgFactory.create(v,O,!0),st=W(this,tt,this.svgFactory.createElement("svg:line"));return st.setAttribute("x1",r.rect[2]-r.lineCoordinates[0]),st.setAttribute("y1",r.rect[3]-r.lineCoordinates[1]),st.setAttribute("x2",r.rect[2]-r.lineCoordinates[2]),st.setAttribute("y2",r.rect[3]-r.lineCoordinates[3]),st.setAttribute("stroke-width",r.borderStyle.width||1),st.setAttribute("stroke","transparent"),st.setAttribute("fill","transparent"),q.append(st),this.container.append(q),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}tt=new WeakMap;class jt extends L{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});S(this,ct,null)}render(){this.container.classList.add("squareAnnotation");const r=this.data,{width:v,height:O}=R(r.rect),q=this.svgFactory.create(v,O,!0),st=r.borderStyle.width,at=W(this,ct,this.svgFactory.createElement("svg:rect"));return at.setAttribute("x",st/2),at.setAttribute("y",st/2),at.setAttribute("width",v-st),at.setAttribute("height",O-st),at.setAttribute("stroke-width",st||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),q.append(at),this.container.append(q),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}ct=new WeakMap;class Nt extends L{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});S(this,gt,null)}render(){this.container.classList.add("circleAnnotation");const r=this.data,{width:v,height:O}=R(r.rect),q=this.svgFactory.create(v,O,!0),st=r.borderStyle.width,at=W(this,gt,this.svgFactory.createElement("svg:ellipse"));return at.setAttribute("cx",v/2),at.setAttribute("cy",O/2),at.setAttribute("rx",v/2-st/2),at.setAttribute("ry",O/2-st/2),at.setAttribute("stroke-width",st||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),q.append(at),this.container.append(q),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}gt=new WeakMap;class Ft extends L{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});S(this,Et,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:v,height:O}=R(r.rect),q=this.svgFactory.create(v,O,!0);let st=[];for(const yt of r.vertices){const kt=yt.x-r.rect[0],Ct=r.rect[3]-yt.y;st.push(kt+","+Ct)}st=st.join(" ");const at=W(this,Et,this.svgFactory.createElement(this.svgElementName));return at.setAttribute("points",st),at.setAttribute("stroke-width",r.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),q.append(at),this.container.append(q),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,Et)}addHighlightArea(){this.container.classList.add("highlightArea")}}Et=new WeakMap;class Pt extends Ft{constructor(E){super(E),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Yt extends L{constructor(E){super(E,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ht extends L{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});S(this,It,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:v,height:O}=R(r.rect),q=this.svgFactory.create(v,O,!0);for(const st of r.inkLists){let at=[];for(const kt of st){const Ct=kt.x-r.rect[0],Wt=r.rect[3]-kt.y;at.push(`${Ct},${Wt}`)}at=at.join(" ");const yt=this.svgFactory.createElement(this.svgElementName);i(this,It).push(yt),yt.setAttribute("points",at),yt.setAttribute("stroke-width",r.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),!r.popupRef&&this.hasPopupData&&this._createPopup(),q.append(yt)}return this.container.append(q),this.container}getElementsToTriggerPopup(){return i(this,It)}addHighlightArea(){this.container.classList.add("highlightArea")}}It=new WeakMap;class ue extends L{constructor(E){super(E,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ie extends L{constructor(E){super(E,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Jt extends L{constructor(E){super(E,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Vt extends L{constructor(E){super(E,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ne extends L{constructor(E){super(E,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class $t extends L{constructor(r){var q;super(r,{isRenderable:!0});S(this,Kt);S(this,te,null);const{filename:v,content:O}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(v,!0),this.content=O,(q=this.linkService.eventBus)==null||q.dispatch("fileattachmentannotation",{source:this,filename:v,content:O})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:r,data:v}=this;let O;v.hasAppearance||v.fillAlpha===0?O=document.createElement("div"):(O=document.createElement("img"),O.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(v.name)?"paperclip":"pushpin"}.svg`,v.fillAlpha&&v.fillAlpha<1&&(O.style=`filter: opacity(${Math.round(v.fillAlpha*100)}%);`)),O.addEventListener("dblclick",U(this,Kt,ea).bind(this)),W(this,te,O);const{isMac:q}=s.FeatureTest.platform;return r.addEventListener("keydown",st=>{st.key==="Enter"&&(q?st.metaKey:st.ctrlKey)&&U(this,Kt,ea).call(this)}),!v.popupRef&&this.hasPopupData?this._createPopup():O.classList.add("popupTriggerArea"),r.append(O),r}getElementsToTriggerPopup(){return i(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,Kt=new WeakSet,ea=function(){var r;(r=this.downloadManager)==null||r.openOrDownloadData(this.content,this.filename)};class ce{constructor({div:E,accessibilityManager:r,annotationCanvasMap:v,page:O,viewport:q}){S(this,ot);S(this,mt);S(this,Qt,null);S(this,re,null);S(this,j,new Map);this.div=E,W(this,Qt,r),W(this,re,v),this.page=O,this.viewport=q,this.zIndex=0}async render(E){const{annotations:r}=E,v=this.div;(0,o.setLayerDimensions)(v,this.viewport);const O=new Map,q={data:null,layer:v,linkService:E.linkService,downloadManager:E.downloadManager,imageResourcesPath:E.imageResourcesPath||"",renderForms:E.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:E.annotationStorage||new h.AnnotationStorage,enableScripting:E.enableScripting===!0,hasJSActions:E.hasJSActions,fieldObjects:E.fieldObjects,parent:this,elements:null};for(const st of r){if(st.noHTML)continue;const at=st.annotationType===s.AnnotationType.POPUP;if(at){const Ct=O.get(st.id);if(!Ct)continue;q.elements=Ct}else{const{width:Ct,height:Wt}=R(st.rect);if(Ct<=0||Wt<=0)continue}q.data=st;const yt=Z.create(q);if(!yt.isRenderable)continue;if(!at&&st.popupRef){const Ct=O.get(st.popupRef);Ct?Ct.push(yt):O.set(st.popupRef,[yt])}yt.annotationEditorType>0&&i(this,j).set(yt.data.id,yt);const kt=yt.render();st.hidden&&(kt.style.visibility="hidden"),U(this,ot,Ml).call(this,kt,st.id)}U(this,mt,sa).call(this)}update({viewport:E}){const r=this.div;this.viewport=E,(0,o.setLayerDimensions)(r,{rotation:E.rotation}),U(this,mt,sa).call(this),r.hidden=!1}getEditableAnnotations(){return Array.from(i(this,j).values())}getEditableAnnotation(E){return i(this,j).get(E)}}Qt=new WeakMap,re=new WeakMap,j=new WeakMap,ot=new WeakSet,Ml=function(E,r){var O;const v=E.firstChild||E;v.id=`${s.AnnotationPrefix}${r}`,this.div.append(E),(O=i(this,Qt))==null||O.moveElementInDOM(this.div,E,v,!1)},mt=new WeakSet,sa=function(){if(!i(this,re))return;const E=this.div;for(const[r,v]of i(this,re)){const O=E.querySelector(`[data-annotation-id="${r}"]`);if(!O)continue;const{firstChild:q}=O;q?q.nodeName==="CANVAS"?q.replaceWith(v):q.before(v):O.append(v)}i(this,re).clear()}},780:(t,e,n)=>{var T,_,I,kl,R;n.d(e,{AnnotationStorage:()=>k,PrintAnnotationStorage:()=>w,SerializableEmpty:()=>m});var s=n(266),o=n(115),h=n(825);const m=Object.freeze({map:null,hash:"",transfer:void 0});class k{constructor(){S(this,I);S(this,T,!1);S(this,_,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(L,H){const V=i(this,_).get(L);return V===void 0?H:Object.assign(H,V)}getRawValue(L){return i(this,_).get(L)}remove(L){if(i(this,_).delete(L),i(this,_).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const H of i(this,_).values())if(H instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(L,H){const V=i(this,_).get(L);let X=!1;if(V!==void 0)for(const[$,D]of Object.entries(H))V[$]!==D&&(X=!0,V[$]=D);else X=!0,i(this,_).set(L,H);X&&U(this,I,kl).call(this),H instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(H.constructor._type)}has(L){return i(this,_).has(L)}getAll(){return i(this,_).size>0?(0,s.objectFromMap)(i(this,_)):null}setAll(L){for(const[H,V]of Object.entries(L))this.setValue(H,V)}get size(){return i(this,_).size}resetModified(){i(this,T)&&(W(this,T,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new w(this)}get serializable(){if(i(this,_).size===0)return m;const L=new Map,H=new h.MurmurHash3_64,V=[],X=Object.create(null);let $=!1;for(const[D,Y]of i(this,_)){const C=Y instanceof o.AnnotationEditor?Y.serialize(!1,X):Y;C&&(L.set(D,C),H.update(`${D}:${JSON.stringify(C)}`),$||($=!!C.bitmap))}if($)for(const D of L.values())D.bitmap&&V.push(D.bitmap);return L.size>0?{map:L,hash:H.hexdigest(),transfer:V}:m}}T=new WeakMap,_=new WeakMap,I=new WeakSet,kl=function(){i(this,T)||(W(this,T,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class w extends k{constructor(H){super();S(this,R,void 0);const{map:V,hash:X,transfer:$}=H.serializable,D=structuredClone(V,$?{transfer:$}:null);W(this,R,{map:D,hash:X,transfer:$})}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return i(this,R)}}R=new WeakMap},406:(t,e,n)=>{n.a(t,async(s,o)=>{var Y,C,B,J,bi,Q,$n,wt,jt,Nt,Ft,Pt,Gn,Ht,ue,ie,Jt,Vt,Xn,$t,ce,ia,oe,qt;try{let Ae=function(nt){if(typeof nt=="string"||nt instanceof URL?nt={url:nt}:(0,h.isArrayBuffer)(nt)&&(nt={data:nt}),typeof nt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!nt.url&&!nt.data&&!nt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const P=new y,{docId:K}=P,tt=nt.url?pe(nt.url):null,ct=nt.data?se(nt.data):null,gt=nt.httpHeaders||null,Et=nt.withCredentials===!0,It=nt.password??null,te=nt.range instanceof f?nt.range:null,Kt=Number.isInteger(nt.rangeChunkSize)&&nt.rangeChunkSize>0?nt.rangeChunkSize:le;let _e=nt.worker instanceof G?nt.worker:null;const Qt=nt.verbosity,re=typeof nt.docBaseUrl=="string"&&!(0,k.isDataScheme)(nt.docBaseUrl)?nt.docBaseUrl:null,j=typeof nt.cMapUrl=="string"?nt.cMapUrl:null,ot=nt.cMapPacked!==!1,At=nt.CMapReaderFactory||l,mt=typeof nt.standardFontDataUrl=="string"?nt.standardFontDataUrl:null,Ot=nt.StandardFontDataFactory||x,Mt=nt.stopAtErrors!==!0,E=Number.isInteger(nt.maxImageSize)&&nt.maxImageSize>-1?nt.maxImageSize:-1,r=nt.isEvalSupported!==!1,v=typeof nt.isOffscreenCanvasSupported=="boolean"?nt.isOffscreenCanvasSupported:!h.isNodeJS,O=Number.isInteger(nt.canvasMaxAreaInBytes)?nt.canvasMaxAreaInBytes:-1,q=typeof nt.disableFontFace=="boolean"?nt.disableFontFace:h.isNodeJS,st=nt.fontExtraProperties===!0,at=nt.enableXfa===!0,yt=nt.ownerDocument||globalThis.document,kt=nt.disableRange===!0,Ct=nt.disableStream===!0,Wt=nt.disableAutoFetch===!0,Bt=nt.pdfBug===!0,Lt=te?te.length:nt.length??NaN,ee=typeof nt.useSystemFonts=="boolean"?nt.useSystemFonts:!h.isNodeJS&&!q,Gt=typeof nt.useWorkerFetch=="boolean"?nt.useWorkerFetch:At===k.DOMCMapReaderFactory&&Ot===k.DOMStandardFontDataFactory&&j&&mt&&(0,k.isValidFetchUrl)(j,document.baseURI)&&(0,k.isValidFetchUrl)(mt,document.baseURI),de=nt.canvasFactory||new a({ownerDocument:yt}),ge=nt.filterFactory||new u({docId:K,ownerDocument:yt}),Ce=null;(0,h.setVerbosityLevel)(Qt);const Re={canvasFactory:de,filterFactory:ge};if(Gt||(Re.cMapReaderFactory=new At({baseUrl:j,isCompressed:ot}),Re.standardFontDataFactory=new Ot({baseUrl:mt})),!_e){const Ne={verbosity:Qt,port:I.GlobalWorkerOptions.workerPort};_e=Ne.port?G.fromPort(Ne):new G(Ne),P._worker=_e}const Ze={docId:K,apiVersion:"4.0.379",data:ct,password:It,disableAutoFetch:Wt,rangeChunkSize:Kt,length:Lt,docBaseUrl:re,enableXfa:at,evaluatorOptions:{maxImageSize:E,disableFontFace:q,ignoreErrors:Mt,isEvalSupported:r,isOffscreenCanvasSupported:v,canvasMaxAreaInBytes:O,fontExtraProperties:st,useSystemFonts:ee,cMapUrl:Gt?j:null,standardFontDataUrl:Gt?mt:null}},De={ignoreErrors:Mt,isEvalSupported:r,disableFontFace:q,fontExtraProperties:st,enableXfa:at,ownerDocument:yt,disableAutoFetch:Wt,pdfBug:Bt,styleElement:Ce};return _e.promise.then(function(){if(P.destroyed)throw new Error("Loading aborted");const Ne=A(_e,Ze),Ke=new Promise(function(Xs){let Qe;te?Qe=new L.PDFDataTransportStream({length:Lt,initialData:te.initialData,progressiveDone:te.progressiveDone,contentDispositionFilename:te.contentDispositionFilename,disableRange:kt,disableStream:Ct},te):ct||(Qe=(vs=>h.isNodeJS?new X.PDFNodeStream(vs):(0,k.isValidFetchUrl)(vs.url)?new H.PDFFetchStream(vs):new V.PDFNetworkStream(vs))({url:tt,length:Lt,httpHeaders:gt,withCredentials:Et,rangeChunkSize:Kt,disableRange:kt,disableStream:Ct})),Xs(Qe)});return Promise.all([Ne,Ke]).then(function([Xs,Qe]){if(P.destroyed)throw new Error("Loading aborted");const vs=new N.MessageHandler(K,Xs,_e.port),ve=new et(vs,P,Qe,De,Re);P._transport=ve,vs.send("Ready",null)})}).catch(P._capability.reject),P},pe=function(nt){if(nt instanceof URL)return nt.href;try{return new URL(nt,window.location).href}catch{if(h.isNodeJS&&typeof nt=="string")return nt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},se=function(nt){if(h.isNodeJS&&typeof Buffer<"u"&&nt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(nt instanceof Uint8Array&&nt.byteLength===nt.buffer.byteLength)return nt;if(typeof nt=="string")return(0,h.stringToBytes)(nt);if(typeof nt=="object"&&!isNaN(nt==null?void 0:nt.length)||(0,h.isArrayBuffer)(nt))return new Uint8Array(nt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};n.d(e,{PDFDataRangeTransport:()=>f,PDFWorker:()=>G,build:()=>Tt,getDocument:()=>Ae,version:()=>bt});var h=n(266),m=n(780),k=n(473),w=n(742),T=n(738),_=n(250),I=n(368),N=n(694),R=n(472),Z=n(890),L=n(92),H=n(171),V=n(474),X=n(498),$=n(521),D=s([T,X]);[T,X]=D.then?(await D)():D;const le=65536,z=100,b=5e3,a=h.isNodeJS?T.NodeCanvasFactory:k.DOMCanvasFactory,l=h.isNodeJS?T.NodeCMapReaderFactory:k.DOMCMapReaderFactory,u=h.isNodeJS?T.NodeFilterFactory:k.DOMFilterFactory,x=h.isNodeJS?T.NodeStandardFontDataFactory:k.DOMStandardFontDataFactory;async function A(nt,P){if(nt.destroyed)throw new Error("Worker was destroyed");const K=await nt.messageHandler.sendWithPromise("GetDocRequest",P,P.data?[P.data.buffer]:null);if(nt.destroyed)throw new Error("Worker was destroyed");return K}const St=class St{constructor(){this._capability=new h.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Es(St,Y)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var P,K,tt;this.destroyed=!0;try{(P=this._worker)!=null&&P.port&&(this._worker._pendingDestroy=!0),await((K=this._transport)==null?void 0:K.destroy())}catch(ct){throw(tt=this._worker)!=null&&tt.port&&delete this._worker._pendingDestroy,ct}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Y=new WeakMap,S(St,Y,0);let y=St;class f{constructor(P,K,tt=!1,ct=null){this.length=P,this.initialData=K,this.progressiveDone=tt,this.contentDispositionFilename=ct,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new h.PromiseCapability}addRangeListener(P){this._rangeListeners.push(P)}addProgressListener(P){this._progressListeners.push(P)}addProgressiveReadListener(P){this._progressiveReadListeners.push(P)}addProgressiveDoneListener(P){this._progressiveDoneListeners.push(P)}onDataRange(P,K){for(const tt of this._rangeListeners)tt(P,K)}onDataProgress(P,K){this._readyCapability.promise.then(()=>{for(const tt of this._progressListeners)tt(P,K)})}onDataProgressiveRead(P){this._readyCapability.promise.then(()=>{for(const K of this._progressiveReadListeners)K(P)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const P of this._progressiveDoneListeners)P()})}transportReady(){this._readyCapability.resolve()}requestDataRange(P,K){(0,h.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class d{constructor(P,K){this._pdfInfo=P,this._transport=K}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,h.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(P){return this._transport.getPage(P)}getPageIndex(P){return this._transport.getPageIndex(P)}getDestinations(){return this._transport.getDestinations()}getDestination(P){return this._transport.getDestination(P)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(P=!1){return this._transport.startCleanup(P||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class c{constructor(P,K,tt,ct=!1){S(this,J);S(this,Q);S(this,C,null);S(this,B,!1);this._pageIndex=P,this._pageInfo=K,this._transport=tt,this._stats=ct?new k.StatTimer:null,this._pdfBug=ct,this.commonObjs=tt.commonObjs,this.objs=new rt,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:P,rotation:K=this.rotate,offsetX:tt=0,offsetY:ct=0,dontFlip:gt=!1}={}){return new k.PageViewport({viewBox:this.view,scale:P,rotation:K,offsetX:tt,offsetY:ct,dontFlip:gt})}getAnnotations({intent:P="display"}={}){const K=this._transport.getRenderingIntent(P);return this._transport.getAnnotations(this._pageIndex,K.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,h.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var P;return((P=this._transport._htmlForXfa)==null?void 0:P.children[this._pageIndex])||null}render({canvasContext:P,viewport:K,intent:tt="display",annotationMode:ct=h.AnnotationMode.ENABLE,transform:gt=null,background:Et=null,optionalContentConfigPromise:It=null,annotationCanvasMap:te=null,pageColors:Kt=null,printAnnotationStorage:_e=null}){var Ot,Mt;(Ot=this._stats)==null||Ot.time("Overall");const Qt=this._transport.getRenderingIntent(tt,ct,_e);W(this,B,!1),U(this,Q,$n).call(this),It||(It=this._transport.getOptionalContentConfig());let re=this._intentStates.get(Qt.cacheKey);re||(re=Object.create(null),this._intentStates.set(Qt.cacheKey,re)),re.streamReaderCancelTimeout&&(clearTimeout(re.streamReaderCancelTimeout),re.streamReaderCancelTimeout=null);const j=!!(Qt.renderingIntent&h.RenderingIntentFlag.PRINT);re.displayReadyCapability||(re.displayReadyCapability=new h.PromiseCapability,re.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Mt=this._stats)==null||Mt.time("Page Request"),this._pumpOperatorList(Qt));const ot=E=>{var r,v;re.renderTasks.delete(At),(this._maybeCleanupAfterRender||j)&&W(this,B,!0),U(this,J,bi).call(this,!j),E?(At.capability.reject(E),this._abortOperatorList({intentState:re,reason:E instanceof Error?E:new Error(E)})):At.capability.resolve(),(r=this._stats)==null||r.timeEnd("Rendering"),(v=this._stats)==null||v.timeEnd("Overall")},At=new ft({callback:ot,params:{canvasContext:P,viewport:K,transform:gt,background:Et},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:te,operatorList:re.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!j,pdfBug:this._pdfBug,pageColors:Kt});(re.renderTasks||(re.renderTasks=new Set)).add(At);const mt=At.task;return Promise.all([re.displayReadyCapability.promise,It]).then(([E,r])=>{var v;if(this.destroyed){ot();return}(v=this._stats)==null||v.time("Rendering"),At.initializeGraphics({transparency:E,optionalContentConfig:r}),At.operatorListChanged()}).catch(ot),mt}getOperatorList({intent:P="display",annotationMode:K=h.AnnotationMode.ENABLE,printAnnotationStorage:tt=null}={}){var te;function ct(){Et.operatorList.lastChunk&&(Et.opListReadCapability.resolve(Et.operatorList),Et.renderTasks.delete(It))}const gt=this._transport.getRenderingIntent(P,K,tt,!0);let Et=this._intentStates.get(gt.cacheKey);Et||(Et=Object.create(null),this._intentStates.set(gt.cacheKey,Et));let It;return Et.opListReadCapability||(It=Object.create(null),It.operatorListChanged=ct,Et.opListReadCapability=new h.PromiseCapability,(Et.renderTasks||(Et.renderTasks=new Set)).add(It),Et.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(te=this._stats)==null||te.time("Page Request"),this._pumpOperatorList(gt)),Et.opListReadCapability.promise}streamTextContent({includeMarkedContent:P=!1,disableNormalization:K=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:P===!0,disableNormalization:K===!0},{highWaterMark:100,size(tt){return tt.items.length}})}getTextContent(P={}){if(this._transport._htmlForXfa)return this.getXfa().then(tt=>$.XfaText.textContent(tt));const K=this.streamTextContent(P);return new Promise(function(tt,ct){function gt(){Et.read().then(function({value:te,done:Kt}){if(Kt){tt(It);return}Object.assign(It.styles,te.styles),It.items.push(...te.items),gt()},ct)}const Et=K.getReader(),It={items:[],styles:Object.create(null)};gt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const P=[];for(const K of this._intentStates.values())if(this._abortOperatorList({intentState:K,reason:new Error("Page was destroyed."),force:!0}),!K.opListReadCapability)for(const tt of K.renderTasks)P.push(tt.completed),tt.cancel();return this.objs.clear(),W(this,B,!1),U(this,Q,$n).call(this),Promise.all(P)}cleanup(P=!1){W(this,B,!0);const K=U(this,J,bi).call(this,!1);return P&&K&&this._stats&&(this._stats=new k.StatTimer),K}_startRenderPage(P,K){var ct,gt;const tt=this._intentStates.get(K);tt&&((ct=this._stats)==null||ct.timeEnd("Page Request"),(gt=tt.displayReadyCapability)==null||gt.resolve(P))}_renderPageChunk(P,K){for(let tt=0,ct=P.length;tt<ct;tt++)K.operatorList.fnArray.push(P.fnArray[tt]),K.operatorList.argsArray.push(P.argsArray[tt]);K.operatorList.lastChunk=P.lastChunk,K.operatorList.separateAnnots=P.separateAnnots;for(const tt of K.renderTasks)tt.operatorListChanged();P.lastChunk&&U(this,J,bi).call(this,!0)}_pumpOperatorList({renderingIntent:P,cacheKey:K,annotationStorageSerializable:tt}){const{map:ct,transfer:gt}=tt,Et=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:P,cacheKey:K,annotationStorage:ct},gt).getReader(),It=this._intentStates.get(K);It.streamReader=Et;const te=()=>{Et.read().then(({value:Kt,done:_e})=>{if(_e){It.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Kt,It),te())},Kt=>{if(It.streamReader=null,!this._transport.destroyed){if(It.operatorList){It.operatorList.lastChunk=!0;for(const _e of It.renderTasks)_e.operatorListChanged();U(this,J,bi).call(this,!0)}if(It.displayReadyCapability)It.displayReadyCapability.reject(Kt);else if(It.opListReadCapability)It.opListReadCapability.reject(Kt);else throw Kt}})};te()}_abortOperatorList({intentState:P,reason:K,force:tt=!1}){if(P.streamReader){if(P.streamReaderCancelTimeout&&(clearTimeout(P.streamReaderCancelTimeout),P.streamReaderCancelTimeout=null),!tt){if(P.renderTasks.size>0)return;if(K instanceof k.RenderingCancelledException){let ct=z;K.extraDelay>0&&K.extraDelay<1e3&&(ct+=K.extraDelay),P.streamReaderCancelTimeout=setTimeout(()=>{P.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:P,reason:K,force:!0})},ct);return}}if(P.streamReader.cancel(new h.AbortException(K.message)).catch(()=>{}),P.streamReader=null,!this._transport.destroyed){for(const[ct,gt]of this._intentStates)if(gt===P){this._intentStates.delete(ct);break}this.cleanup()}}}get stats(){return this._stats}}C=new WeakMap,B=new WeakMap,J=new WeakSet,bi=function(P=!1){if(U(this,Q,$n).call(this),!i(this,B)||this.destroyed)return!1;if(P)return W(this,C,setTimeout(()=>{W(this,C,null),U(this,J,bi).call(this,!1)},b)),!1;for(const{renderTasks:K,operatorList:tt}of this._intentStates.values())if(K.size>0||!tt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),W(this,B,!1),!0},Q=new WeakSet,$n=function(){i(this,C)&&(clearTimeout(i(this,C)),W(this,C,null))};class g{constructor(){S(this,wt,new Set);S(this,jt,Promise.resolve())}postMessage(P,K){const tt={data:structuredClone(P,K?{transfer:K}:null)};i(this,jt).then(()=>{for(const ct of i(this,wt))ct.call(this,tt)})}addEventListener(P,K){i(this,wt).add(K)}removeEventListener(P,K){i(this,wt).delete(K)}terminate(){i(this,wt).clear()}}wt=new WeakMap,jt=new WeakMap;const M={isWorkerDisabled:!1,fakeWorkerId:0};h.isNodeJS&&(M.isWorkerDisabled=!0,(Nt=I.GlobalWorkerOptions).workerSrc||(Nt.workerSrc="./pdf.worker.mjs")),M.isSameOrigin=function(nt,P){let K;try{if(K=new URL(nt),!K.origin||K.origin==="null")return!1}catch{return!1}const tt=new URL(P,K);return K.origin===tt.origin},M.createCDNWrapper=function(nt){const P=`await import("${nt}");`;return URL.createObjectURL(new Blob([P],{type:"text/javascript"}))};const xt=class xt{constructor({name:P=null,port:K=null,verbosity:tt=(0,h.getVerbosityLevel)()}={}){var ct;if(this.name=P,this.destroyed=!1,this.verbosity=tt,this._readyCapability=new h.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,K){if((ct=i(xt,Ft))!=null&&ct.has(K))throw new Error("Cannot use more than one PDFWorker per port.");(i(xt,Ft)||W(xt,Ft,new WeakMap)).set(K,this),this._initializeFromPort(K);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(P){this._port=P,this._messageHandler=new N.MessageHandler("main","worker",P),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!M.isWorkerDisabled&&!i(xt,Pt,Gn)){let{workerSrc:P}=xt;try{M.isSameOrigin(window.location.href,P)||(P=M.createCDNWrapper(new URL(P,window.location).href));const K=new Worker(P,{type:"module"}),tt=new N.MessageHandler("main","worker",K),ct=()=>{K.removeEventListener("error",gt),tt.destroy(),K.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},gt=()=>{this._webWorker||ct()};K.addEventListener("error",gt),tt.on("test",It=>{if(K.removeEventListener("error",gt),this.destroyed){ct();return}It?(this._messageHandler=tt,this._port=K,this._webWorker=K,this._readyCapability.resolve(),tt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),tt.destroy(),K.terminate())}),tt.on("ready",It=>{if(K.removeEventListener("error",gt),this.destroyed){ct();return}try{Et()}catch{this._setupFakeWorker()}});const Et=()=>{const It=new Uint8Array;tt.send("test",It,[It.buffer])};Et();return}catch{(0,h.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){M.isWorkerDisabled||((0,h.warn)("Setting up fake worker."),M.isWorkerDisabled=!0),xt._setupFakeWorkerGlobal.then(P=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const K=new g;this._port=K;const tt=`fake${M.fakeWorkerId++}`,ct=new N.MessageHandler(tt+"_worker",tt,K);P.setup(ct,K);const gt=new N.MessageHandler(tt,tt+"_worker",K);this._messageHandler=gt,this._readyCapability.resolve(),gt.send("configure",{verbosity:this.verbosity})}).catch(P=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${P.message}".`))})}destroy(){var P;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(P=i(xt,Ft))==null||P.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(P){var tt;if(!(P!=null&&P.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const K=(tt=i(this,Ft))==null?void 0:tt.get(P.port);if(K){if(K._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return K}return new xt(P)}static get workerSrc(){if(I.GlobalWorkerOptions.workerSrc)return I.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const P=async()=>i(this,Pt,Gn)?i(this,Pt,Gn):(await Ls(()=>import(this.workerSrc).then(async K=>(await K.__tla,K)),__vite__mapDeps([]))).WorkerMessageHandler;return(0,h.shadow)(this,"_setupFakeWorkerGlobal",P())}};Ft=new WeakMap,Pt=new WeakSet,Gn=function(){var P;try{return((P=globalThis.pdfjsWorker)==null?void 0:P.WorkerMessageHandler)||null}catch{return null}},S(xt,Pt),S(xt,Ft,void 0);let G=xt;class et{constructor(P,K,tt,ct,gt){S(this,Vt);S(this,Ht,new Map);S(this,ue,new Map);S(this,ie,new Map);S(this,Jt,null);this.messageHandler=P,this.loadingTask=K,this.commonObjs=new rt,this.fontLoader=new w.FontLoader({ownerDocument:ct.ownerDocument,styleElement:ct.styleElement}),this._params=ct,this.canvasFactory=gt.canvasFactory,this.filterFactory=gt.filterFactory,this.cMapReaderFactory=gt.cMapReaderFactory,this.standardFontDataFactory=gt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=tt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new h.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,h.shadow)(this,"annotationStorage",new m.AnnotationStorage)}getRenderingIntent(P,K=h.AnnotationMode.ENABLE,tt=null,ct=!1){let gt=h.RenderingIntentFlag.DISPLAY,Et=m.SerializableEmpty;switch(P){case"any":gt=h.RenderingIntentFlag.ANY;break;case"display":break;case"print":gt=h.RenderingIntentFlag.PRINT;break;default:(0,h.warn)(`getRenderingIntent - invalid intent: ${P}`)}switch(K){case h.AnnotationMode.DISABLE:gt+=h.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case h.AnnotationMode.ENABLE:break;case h.AnnotationMode.ENABLE_FORMS:gt+=h.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case h.AnnotationMode.ENABLE_STORAGE:gt+=h.RenderingIntentFlag.ANNOTATIONS_STORAGE,Et=(gt&h.RenderingIntentFlag.PRINT&&tt instanceof m.PrintAnnotationStorage?tt:this.annotationStorage).serializable;break;default:(0,h.warn)(`getRenderingIntent - invalid annotationMode: ${K}`)}return ct&&(gt+=h.RenderingIntentFlag.OPLIST),{renderingIntent:gt,cacheKey:`${gt}_${Et.hash}`,annotationStorageSerializable:Et}}destroy(){var tt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new h.PromiseCapability,(tt=i(this,Jt))==null||tt.reject(new Error("Worker was destroyed during onPassword callback"));const P=[];for(const ct of i(this,ue).values())P.push(ct._destroy());i(this,ue).clear(),i(this,ie).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const K=this.messageHandler.sendWithPromise("Terminate",null);return P.push(K),Promise.all(P).then(()=>{var ct;this.commonObjs.clear(),this.fontLoader.clear(),i(this,Ht).clear(),this.filterFactory.destroy(),(ct=this._networkStream)==null||ct.cancelAllRequests(new h.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:P,loadingTask:K}=this;P.on("GetReader",(tt,ct)=>{(0,h.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=gt=>{this._lastProgress={loaded:gt.loaded,total:gt.total}},ct.onPull=()=>{this._fullReader.read().then(function({value:gt,done:Et}){if(Et){ct.close();return}(0,h.assert)(gt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(gt),1,[gt])}).catch(gt=>{ct.error(gt)})},ct.onCancel=gt=>{this._fullReader.cancel(gt),ct.ready.catch(Et=>{if(!this.destroyed)throw Et})}}),P.on("ReaderHeadersReady",tt=>{const ct=new h.PromiseCapability,gt=this._fullReader;return gt.headersReady.then(()=>{var Et;(!gt.isStreamingSupported||!gt.isRangeSupported)&&(this._lastProgress&&((Et=K.onProgress)==null||Et.call(K,this._lastProgress)),gt.onProgress=It=>{var te;(te=K.onProgress)==null||te.call(K,{loaded:It.loaded,total:It.total})}),ct.resolve({isStreamingSupported:gt.isStreamingSupported,isRangeSupported:gt.isRangeSupported,contentLength:gt.contentLength})},ct.reject),ct.promise}),P.on("GetRangeReader",(tt,ct)=>{(0,h.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const gt=this._networkStream.getRangeReader(tt.begin,tt.end);if(!gt){ct.close();return}ct.onPull=()=>{gt.read().then(function({value:Et,done:It}){if(It){ct.close();return}(0,h.assert)(Et instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(Et),1,[Et])}).catch(Et=>{ct.error(Et)})},ct.onCancel=Et=>{gt.cancel(Et),ct.ready.catch(It=>{if(!this.destroyed)throw It})}}),P.on("GetDoc",({pdfInfo:tt})=>{this._numPages=tt.numPages,this._htmlForXfa=tt.htmlForXfa,delete tt.htmlForXfa,K._capability.resolve(new d(tt,this))}),P.on("DocException",function(tt){let ct;switch(tt.name){case"PasswordException":ct=new h.PasswordException(tt.message,tt.code);break;case"InvalidPDFException":ct=new h.InvalidPDFException(tt.message);break;case"MissingPDFException":ct=new h.MissingPDFException(tt.message);break;case"UnexpectedResponseException":ct=new h.UnexpectedResponseException(tt.message,tt.status);break;case"UnknownErrorException":ct=new h.UnknownErrorException(tt.message,tt.details);break;default:(0,h.unreachable)("DocException - expected a valid Error.")}K._capability.reject(ct)}),P.on("PasswordRequest",tt=>{if(W(this,Jt,new h.PromiseCapability),K.onPassword){const ct=gt=>{gt instanceof Error?i(this,Jt).reject(gt):i(this,Jt).resolve({password:gt})};try{K.onPassword(ct,tt.code)}catch(gt){i(this,Jt).reject(gt)}}else i(this,Jt).reject(new h.PasswordException(tt.message,tt.code));return i(this,Jt).promise}),P.on("DataLoaded",tt=>{var ct;(ct=K.onProgress)==null||ct.call(K,{loaded:tt.length,total:tt.length}),this.downloadInfoCapability.resolve(tt)}),P.on("StartRenderPage",tt=>{this.destroyed||i(this,ue).get(tt.pageIndex)._startRenderPage(tt.transparency,tt.cacheKey)}),P.on("commonobj",([tt,ct,gt])=>{var Et;if(this.destroyed||this.commonObjs.has(tt))return null;switch(ct){case"Font":const It=this._params;if("error"in gt){const Qt=gt.error;(0,h.warn)(`Error during font loading: ${Qt}`),this.commonObjs.resolve(tt,Qt);break}const te=It.pdfBug&&((Et=globalThis.FontInspector)!=null&&Et.enabled)?(Qt,re)=>globalThis.FontInspector.fontAdded(Qt,re):null,Kt=new w.FontFaceObject(gt,{isEvalSupported:It.isEvalSupported,disableFontFace:It.disableFontFace,ignoreErrors:It.ignoreErrors,inspectFont:te});this.fontLoader.bind(Kt).catch(Qt=>P.sendWithPromise("FontFallback",{id:tt})).finally(()=>{!It.fontExtraProperties&&Kt.data&&(Kt.data=null),this.commonObjs.resolve(tt,Kt)});break;case"CopyLocalImage":const{imageRef:_e}=gt;(0,h.assert)(_e,"The imageRef must be defined.");for(const Qt of i(this,ue).values())for(const[,re]of Qt.objs)if(re.ref===_e)return re.dataLen?(this.commonObjs.resolve(tt,structuredClone(re)),re.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(tt,gt);break;default:throw new Error(`Got unknown common object type ${ct}`)}return null}),P.on("obj",([tt,ct,gt,Et])=>{var te;if(this.destroyed)return;const It=i(this,ue).get(ct);if(!It.objs.has(tt)){if(It._intentStates.size===0){(te=Et==null?void 0:Et.bitmap)==null||te.close();return}switch(gt){case"Image":It.objs.resolve(tt,Et),(Et==null?void 0:Et.dataLen)>h.MAX_IMAGE_SIZE_TO_CACHE&&(It._maybeCleanupAfterRender=!0);break;case"Pattern":It.objs.resolve(tt,Et);break;default:throw new Error(`Got unknown object type ${gt}`)}}}),P.on("DocProgress",tt=>{var ct;this.destroyed||((ct=K.onProgress)==null||ct.call(K,{loaded:tt.loaded,total:tt.total}))}),P.on("FetchBuiltInCMap",tt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(tt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),P.on("FetchStandardFontData",tt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(tt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var tt;this.annotationStorage.size<=0&&(0,h.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:P,transfer:K}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:P,filename:((tt=this._fullReader)==null?void 0:tt.filename)??null},K).finally(()=>{this.annotationStorage.resetModified()})}getPage(P){if(!Number.isInteger(P)||P<=0||P>this._numPages)return Promise.reject(new Error("Invalid page request."));const K=P-1,tt=i(this,ie).get(K);if(tt)return tt;const ct=this.messageHandler.sendWithPromise("GetPage",{pageIndex:K}).then(gt=>{if(this.destroyed)throw new Error("Transport destroyed");const Et=new c(K,gt,this,this._params.pdfBug);return i(this,ue).set(K,Et),Et});return i(this,ie).set(K,ct),ct}getPageIndex(P){return typeof P!="object"||P===null||!Number.isInteger(P.num)||P.num<0||!Number.isInteger(P.gen)||P.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:P.num,gen:P.gen})}getAnnotations(P,K){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:P,intent:K})}getFieldObjects(){return U(this,Vt,Xn).call(this,"GetFieldObjects")}hasJSActions(){return U(this,Vt,Xn).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(P){return typeof P!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:P})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return U(this,Vt,Xn).call(this,"GetDocJSActions")}getPageJSActions(P){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:P})}getStructTree(P){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:P})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(P=>new Z.OptionalContentConfig(P))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const P="GetMetadata",K=i(this,Ht).get(P);if(K)return K;const tt=this.messageHandler.sendWithPromise(P,null).then(ct=>{var gt,Et;return{info:ct[0],metadata:ct[1]?new R.Metadata(ct[1]):null,contentDispositionFilename:((gt=this._fullReader)==null?void 0:gt.filename)??null,contentLength:((Et=this._fullReader)==null?void 0:Et.contentLength)??null}});return i(this,Ht).set(P,tt),tt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(P=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const K of i(this,ue).values())if(!K.cleanup())throw new Error(`startCleanup: Page ${K.pageNumber} is currently rendering.`);this.commonObjs.clear(),P||this.fontLoader.clear(),i(this,Ht).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:P,enableXfa:K}=this._params;return(0,h.shadow)(this,"loadingParams",{disableAutoFetch:P,enableXfa:K})}}Ht=new WeakMap,ue=new WeakMap,ie=new WeakMap,Jt=new WeakMap,Vt=new WeakSet,Xn=function(P,K=null){const tt=i(this,Ht).get(P);if(tt)return tt;const ct=this.messageHandler.sendWithPromise(P,K);return i(this,Ht).set(P,ct),ct};class rt{constructor(){S(this,ce);S(this,$t,Object.create(null))}get(P,K=null){if(K){const ct=U(this,ce,ia).call(this,P);return ct.capability.promise.then(()=>K(ct.data)),null}const tt=i(this,$t)[P];if(!(tt!=null&&tt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${P}.`);return tt.data}has(P){var K;return((K=i(this,$t)[P])==null?void 0:K.capability.settled)??!1}resolve(P,K=null){const tt=U(this,ce,ia).call(this,P);tt.data=K,tt.capability.resolve()}clear(){var P;for(const K in i(this,$t)){const{data:tt}=i(this,$t)[K];(P=tt==null?void 0:tt.bitmap)==null||P.close()}W(this,$t,Object.create(null))}*[Symbol.iterator](){for(const P in i(this,$t)){const{capability:K,data:tt}=i(this,$t)[P];K.settled&&(yield[P,tt])}}}$t=new WeakMap,ce=new WeakSet,ia=function(P){var K;return(K=i(this,$t))[P]||(K[P]={capability:new h.PromiseCapability,data:null})};class vt{constructor(P){S(this,oe,null);W(this,oe,P),this.onContinue=null}get promise(){return i(this,oe).capability.promise}cancel(P=0){i(this,oe).cancel(null,P)}get separateAnnots(){const{separateAnnots:P}=i(this,oe).operatorList;if(!P)return!1;const{annotationCanvasMap:K}=i(this,oe);return P.form||P.canvas&&(K==null?void 0:K.size)>0}}oe=new WeakMap;const Dt=class Dt{constructor({callback:P,params:K,objs:tt,commonObjs:ct,annotationCanvasMap:gt,operatorList:Et,pageIndex:It,canvasFactory:te,filterFactory:Kt,useRequestAnimationFrame:_e=!1,pdfBug:Qt=!1,pageColors:re=null}){this.callback=P,this.params=K,this.objs=tt,this.commonObjs=ct,this.annotationCanvasMap=gt,this.operatorListIdx=null,this.operatorList=Et,this._pageIndex=It,this.canvasFactory=te,this.filterFactory=Kt,this._pdfBug=Qt,this.pageColors=re,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=_e===!0&&typeof window<"u",this.cancelled=!1,this.capability=new h.PromiseCapability,this.task=new vt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=K.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:P=!1,optionalContentConfig:K}){var It,te;if(this.cancelled)return;if(this._canvas){if(i(Dt,qt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i(Dt,qt).add(this._canvas)}this._pdfBug&&((It=globalThis.StepperManager)!=null&&It.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:tt,viewport:ct,transform:gt,background:Et}=this.params;this.gfx=new _.CanvasGraphics(tt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:K},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:gt,viewport:ct,transparency:P,background:Et}),this.operatorListIdx=0,this.graphicsReady=!0,(te=this.graphicsReadyCallback)==null||te.call(this)}cancel(P=null,K=0){var tt;this.running=!1,this.cancelled=!0,(tt=this.gfx)==null||tt.endDrawing(),i(Dt,qt).delete(this._canvas),this.callback(P||new k.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,K))}operatorListChanged(){var P;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(P=this.stepper)==null||P.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),i(Dt,qt).delete(this._canvas),this.callback())))}};qt=new WeakMap,S(Dt,qt,new WeakSet);let ft=Dt;const bt="4.0.379",Tt="9e14d04fd";o()}catch(Ae){o(Ae)}})},822:(t,e,n)=>{n.d(e,{BaseCMapReaderFactory:()=>m,BaseCanvasFactory:()=>h,BaseFilterFactory:()=>o,BaseSVGFactory:()=>w,BaseStandardFontDataFactory:()=>k});var s=n(266);class o{constructor(){this.constructor===o&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_){return"none"}addHCMFilter(_,I){return"none"}addHighlightHCMFilter(_,I,N,R){return"none"}destroy(_=!1){}}class h{constructor(){this.constructor===h&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,I){if(_<=0||I<=0)throw new Error("Invalid canvas size");const N=this._createCanvas(_,I);return{canvas:N,context:N.getContext("2d")}}reset(_,I,N){if(!_.canvas)throw new Error("Canvas is not specified");if(I<=0||N<=0)throw new Error("Invalid canvas size");_.canvas.width=I,_.canvas.height=N}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,I){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}class m{constructor({baseUrl:_=null,isCompressed:I=!0}){this.constructor===m&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=I}async fetch({name:_}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const I=this.baseUrl+_+(this.isCompressed?".bcmap":""),N=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(I,N).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(_,I){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class k{constructor({baseUrl:_=null}){this.constructor===k&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}async fetch({filename:_}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${_}`;return this._fetchData(I).catch(N=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(_){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class w{constructor(){this.constructor===w&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,I,N=!1){if(_<=0||I<=0)throw new Error("Invalid SVG dimensions");const R=this._createSVG("svg:svg");return R.setAttribute("version","1.1"),N||(R.setAttribute("width",`${_}px`),R.setAttribute("height",`${I}px`)),R.setAttribute("preserveAspectRatio","none"),R.setAttribute("viewBox",`0 0 ${_} ${I}`),R}createElement(_){if(typeof _!="string")throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,s.unreachable)("Abstract method `_createSVG` called.")}}},250:(t,e,n)=>{var Ae,na,se,ra;n.d(e,{CanvasGraphics:()=>oe});var s=n(266),o=n(473);const h={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function m(b,a){if(!a)return;const l=a[2]-a[0],u=a[3]-a[1],x=new Path2D;x.rect(a[0],a[1],l,u),b.clip(x)}class k{constructor(){this.constructor===k&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class w extends k{constructor(a){super(),this._type=a[1],this._bbox=a[2],this._colorStops=a[3],this._p0=a[4],this._p1=a[5],this._r0=a[6],this._r1=a[7],this.matrix=null}_createGradient(a){let l;this._type==="axial"?l=a.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(l=a.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const u of this._colorStops)l.addColorStop(u[0],u[1]);return l}getPattern(a,l,u,x){let A;if(x===h.STROKE||x===h.FILL){const y=l.current.getClippedPathBoundingBox(x,(0,o.getCurrentTransform)(a))||[0,0,0,0],f=Math.ceil(y[2]-y[0])||1,d=Math.ceil(y[3]-y[1])||1,c=l.cachedCanvases.getCanvas("pattern",f,d,!0),g=c.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-y[0],-y[1]),u=s.Util.transform(u,[1,0,0,1,y[0],y[1]]),g.transform(...l.baseTransform),this.matrix&&g.transform(...this.matrix),m(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),A=a.createPattern(c.canvas,"no-repeat");const M=new DOMMatrix(u);A.setTransform(M)}else m(a,this._bbox),A=this._createGradient(a);return A}}function T(b,a,l,u,x,A,y,f){const d=a.coords,c=a.colors,g=b.data,M=b.width*4;let G;d[l+1]>d[u+1]&&(G=l,l=u,u=G,G=A,A=y,y=G),d[u+1]>d[x+1]&&(G=u,u=x,x=G,G=y,y=f,f=G),d[l+1]>d[u+1]&&(G=l,l=u,u=G,G=A,A=y,y=G);const et=(d[l]+a.offsetX)*a.scaleX,rt=(d[l+1]+a.offsetY)*a.scaleY,vt=(d[u]+a.offsetX)*a.scaleX,ft=(d[u+1]+a.offsetY)*a.scaleY,bt=(d[x]+a.offsetX)*a.scaleX,Tt=(d[x+1]+a.offsetY)*a.scaleY;if(rt>=Tt)return;const St=c[A],xt=c[A+1],Dt=c[A+2],nt=c[y],P=c[y+1],K=c[y+2],tt=c[f],ct=c[f+1],gt=c[f+2],Et=Math.round(rt),It=Math.round(Tt);let te,Kt,_e,Qt,re,j,ot,At;for(let mt=Et;mt<=It;mt++){if(mt<ft){const v=mt<rt?0:(rt-mt)/(rt-ft);te=et-(et-vt)*v,Kt=St-(St-nt)*v,_e=xt-(xt-P)*v,Qt=Dt-(Dt-K)*v}else{let v;mt>Tt?v=1:ft===Tt?v=0:v=(ft-mt)/(ft-Tt),te=vt-(vt-bt)*v,Kt=nt-(nt-tt)*v,_e=P-(P-ct)*v,Qt=K-(K-gt)*v}let Ot;mt<rt?Ot=0:mt>Tt?Ot=1:Ot=(rt-mt)/(rt-Tt),re=et-(et-bt)*Ot,j=St-(St-tt)*Ot,ot=xt-(xt-ct)*Ot,At=Dt-(Dt-gt)*Ot;const Mt=Math.round(Math.min(te,re)),E=Math.round(Math.max(te,re));let r=M*mt+Mt*4;for(let v=Mt;v<=E;v++)Ot=(te-v)/(te-re),Ot<0?Ot=0:Ot>1&&(Ot=1),g[r++]=Kt-(Kt-j)*Ot|0,g[r++]=_e-(_e-ot)*Ot|0,g[r++]=Qt-(Qt-At)*Ot|0,g[r++]=255}}function _(b,a,l){const u=a.coords,x=a.colors;let A,y;switch(a.type){case"lattice":const f=a.verticesPerRow,d=Math.floor(u.length/f)-1,c=f-1;for(A=0;A<d;A++){let g=A*f;for(let M=0;M<c;M++,g++)T(b,l,u[g],u[g+1],u[g+f],x[g],x[g+1],x[g+f]),T(b,l,u[g+f+1],u[g+1],u[g+f],x[g+f+1],x[g+1],x[g+f])}break;case"triangles":for(A=0,y=u.length;A<y;A+=3)T(b,l,u[A],u[A+1],u[A+2],x[A],x[A+1],x[A+2]);break;default:throw new Error("illegal figure")}}class I extends k{constructor(a){super(),this._coords=a[2],this._colors=a[3],this._figures=a[4],this._bounds=a[5],this._bbox=a[7],this._background=a[8],this.matrix=null}_createMeshCanvas(a,l,u){const x=Math.floor(this._bounds[0]),A=Math.floor(this._bounds[1]),y=Math.ceil(this._bounds[2])-x,f=Math.ceil(this._bounds[3])-A,d=Math.min(Math.ceil(Math.abs(y*a[0]*1.1)),3e3),c=Math.min(Math.ceil(Math.abs(f*a[1]*1.1)),3e3),g=y/d,M=f/c,G={coords:this._coords,colors:this._colors,offsetX:-x,offsetY:-A,scaleX:1/g,scaleY:1/M},et=d+2*2,rt=c+2*2,vt=u.getCanvas("mesh",et,rt,!1),ft=vt.context,bt=ft.createImageData(d,c);if(l){const Tt=bt.data;for(let St=0,xt=Tt.length;St<xt;St+=4)Tt[St]=l[0],Tt[St+1]=l[1],Tt[St+2]=l[2],Tt[St+3]=255}for(const Tt of this._figures)_(bt,Tt,G);return ft.putImageData(bt,2,2),{canvas:vt.canvas,offsetX:x-2*g,offsetY:A-2*M,scaleX:g,scaleY:M}}getPattern(a,l,u,x){m(a,this._bbox);let A;if(x===h.SHADING)A=s.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(a));else if(A=s.Util.singularValueDecompose2dScale(l.baseTransform),this.matrix){const f=s.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*f[0],A[1]*f[1]]}const y=this._createMeshCanvas(A,x===h.SHADING?null:this._background,l.cachedCanvases);return x!==h.SHADING&&(a.setTransform(...l.baseTransform),this.matrix&&a.transform(...this.matrix)),a.translate(y.offsetX,y.offsetY),a.scale(y.scaleX,y.scaleY),a.createPattern(y.canvas,"no-repeat")}}class N extends k{getPattern(){return"hotpink"}}function R(b){switch(b[0]){case"RadialAxial":return new w(b);case"Mesh":return new I(b);case"Dummy":return new N}throw new Error(`Unknown IR type: ${b[0]}`)}const Z={COLORED:1,UNCOLORED:2},qt=class qt{constructor(a,l,u,x,A){this.operatorList=a[2],this.matrix=a[3]||[1,0,0,1,0,0],this.bbox=a[4],this.xstep=a[5],this.ystep=a[6],this.paintType=a[7],this.tilingType=a[8],this.color=l,this.ctx=u,this.canvasGraphicsFactory=x,this.baseTransform=A}createPatternCanvas(a){const l=this.operatorList,u=this.bbox,x=this.xstep,A=this.ystep,y=this.paintType,f=this.tilingType,d=this.color,c=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+f);const g=u[0],M=u[1],G=u[2],et=u[3],rt=s.Util.singularValueDecompose2dScale(this.matrix),vt=s.Util.singularValueDecompose2dScale(this.baseTransform),ft=[rt[0]*vt[0],rt[1]*vt[1]],bt=this.getSizeAndScale(x,this.ctx.canvas.width,ft[0]),Tt=this.getSizeAndScale(A,this.ctx.canvas.height,ft[1]),St=a.cachedCanvases.getCanvas("pattern",bt.size,Tt.size,!0),xt=St.context,Dt=c.createCanvasGraphics(xt);Dt.groupLevel=a.groupLevel,this.setFillAndStrokeStyleToContext(Dt,y,d);let nt=g,P=M,K=G,tt=et;return g<0&&(nt=0,K+=Math.abs(g)),M<0&&(P=0,tt+=Math.abs(M)),xt.translate(-(bt.scale*nt),-(Tt.scale*P)),Dt.transform(bt.scale,0,0,Tt.scale,0,0),xt.save(),this.clipBbox(Dt,nt,P,K,tt),Dt.baseTransform=(0,o.getCurrentTransform)(Dt.ctx),Dt.executeOperatorList(l),Dt.endDrawing(),{canvas:St.canvas,scaleX:bt.scale,scaleY:Tt.scale,offsetX:nt,offsetY:P}}getSizeAndScale(a,l,u){a=Math.abs(a);const x=Math.max(qt.MAX_PATTERN_SIZE,l);let A=Math.ceil(a*u);return A>=x?A=x:u=A/a,{scale:u,size:A}}clipBbox(a,l,u,x,A){const y=x-l,f=A-u;a.ctx.rect(l,u,y,f),a.current.updateRectMinMax((0,o.getCurrentTransform)(a.ctx),[l,u,x,A]),a.clip(),a.endPath()}setFillAndStrokeStyleToContext(a,l,u){const x=a.ctx,A=a.current;switch(l){case Z.COLORED:const y=this.ctx;x.fillStyle=y.fillStyle,x.strokeStyle=y.strokeStyle,A.fillColor=y.fillStyle,A.strokeColor=y.strokeStyle;break;case Z.UNCOLORED:const f=s.Util.makeHexColor(u[0],u[1],u[2]);x.fillStyle=f,x.strokeStyle=f,A.fillColor=f,A.strokeColor=f;break;default:throw new s.FormatError(`Unsupported paint type: ${l}`)}}getPattern(a,l,u,x){let A=u;x!==h.SHADING&&(A=s.Util.transform(A,l.baseTransform),this.matrix&&(A=s.Util.transform(A,this.matrix)));const y=this.createPatternCanvas(l);let f=new DOMMatrix(A);f=f.translate(y.offsetX,y.offsetY),f=f.scale(1/y.scaleX,1/y.scaleY);const d=a.createPattern(y.canvas,"repeat");return d.setTransform(f),d}};we(qt,"MAX_PATTERN_SIZE",3e3);let L=qt;function H({src:b,srcPos:a=0,dest:l,width:u,height:x,nonBlackColor:A=4294967295,inverseDecode:y=!1}){const f=s.FeatureTest.isLittleEndian?4278190080:255,[d,c]=y?[A,f]:[f,A],g=u>>3,M=u&7,G=b.length;l=new Uint32Array(l.buffer);let et=0;for(let rt=0;rt<x;rt++){for(const ft=a+g;a<ft;a++){const bt=a<G?b[a]:255;l[et++]=bt&128?c:d,l[et++]=bt&64?c:d,l[et++]=bt&32?c:d,l[et++]=bt&16?c:d,l[et++]=bt&8?c:d,l[et++]=bt&4?c:d,l[et++]=bt&2?c:d,l[et++]=bt&1?c:d}if(M===0)continue;const vt=a<G?b[a++]:255;for(let ft=0;ft<M;ft++)l[et++]=vt&1<<7-ft?c:d}return{srcPos:a,destPos:et}}const V=16,X=100,$=4096,D=15,Y=10,C=1e3,B=16;function J(b,a){if(b._removeMirroring)throw new Error("Context is already forwarding operations.");b.__originalSave=b.save,b.__originalRestore=b.restore,b.__originalRotate=b.rotate,b.__originalScale=b.scale,b.__originalTranslate=b.translate,b.__originalTransform=b.transform,b.__originalSetTransform=b.setTransform,b.__originalResetTransform=b.resetTransform,b.__originalClip=b.clip,b.__originalMoveTo=b.moveTo,b.__originalLineTo=b.lineTo,b.__originalBezierCurveTo=b.bezierCurveTo,b.__originalRect=b.rect,b.__originalClosePath=b.closePath,b.__originalBeginPath=b.beginPath,b._removeMirroring=()=>{b.save=b.__originalSave,b.restore=b.__originalRestore,b.rotate=b.__originalRotate,b.scale=b.__originalScale,b.translate=b.__originalTranslate,b.transform=b.__originalTransform,b.setTransform=b.__originalSetTransform,b.resetTransform=b.__originalResetTransform,b.clip=b.__originalClip,b.moveTo=b.__originalMoveTo,b.lineTo=b.__originalLineTo,b.bezierCurveTo=b.__originalBezierCurveTo,b.rect=b.__originalRect,b.closePath=b.__originalClosePath,b.beginPath=b.__originalBeginPath,delete b._removeMirroring},b.save=function(){a.save(),this.__originalSave()},b.restore=function(){a.restore(),this.__originalRestore()},b.translate=function(l,u){a.translate(l,u),this.__originalTranslate(l,u)},b.scale=function(l,u){a.scale(l,u),this.__originalScale(l,u)},b.transform=function(l,u,x,A,y,f){a.transform(l,u,x,A,y,f),this.__originalTransform(l,u,x,A,y,f)},b.setTransform=function(l,u,x,A,y,f){a.setTransform(l,u,x,A,y,f),this.__originalSetTransform(l,u,x,A,y,f)},b.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},b.rotate=function(l){a.rotate(l),this.__originalRotate(l)},b.clip=function(l){a.clip(l),this.__originalClip(l)},b.moveTo=function(l,u){a.moveTo(l,u),this.__originalMoveTo(l,u)},b.lineTo=function(l,u){a.lineTo(l,u),this.__originalLineTo(l,u)},b.bezierCurveTo=function(l,u,x,A,y,f){a.bezierCurveTo(l,u,x,A,y,f),this.__originalBezierCurveTo(l,u,x,A,y,f)},b.rect=function(l,u,x,A){a.rect(l,u,x,A),this.__originalRect(l,u,x,A)},b.closePath=function(){a.closePath(),this.__originalClosePath()},b.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}class lt{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,l,u){let x;return this.cache[a]!==void 0?(x=this.cache[a],this.canvasFactory.reset(x,l,u)):(x=this.canvasFactory.create(l,u),this.cache[a]=x),x}delete(a){delete this.cache[a]}clear(){for(const a in this.cache){const l=this.cache[a];this.canvasFactory.destroy(l),delete this.cache[a]}}}function Q(b,a,l,u,x,A,y,f,d,c){const[g,M,G,et,rt,vt]=(0,o.getCurrentTransform)(b);if(M===0&&G===0){const Tt=y*g+rt,St=Math.round(Tt),xt=f*et+vt,Dt=Math.round(xt),nt=(y+d)*g+rt,P=Math.abs(Math.round(nt)-St)||1,K=(f+c)*et+vt,tt=Math.abs(Math.round(K)-Dt)||1;return b.setTransform(Math.sign(g),0,0,Math.sign(et),St,Dt),b.drawImage(a,l,u,x,A,0,0,P,tt),b.setTransform(g,M,G,et,rt,vt),[P,tt]}if(g===0&&et===0){const Tt=f*G+rt,St=Math.round(Tt),xt=y*M+vt,Dt=Math.round(xt),nt=(f+c)*G+rt,P=Math.abs(Math.round(nt)-St)||1,K=(y+d)*M+vt,tt=Math.abs(Math.round(K)-Dt)||1;return b.setTransform(0,Math.sign(M),Math.sign(G),0,St,Dt),b.drawImage(a,l,u,x,A,0,0,tt,P),b.setTransform(g,M,G,et,rt,vt),[tt,P]}b.drawImage(a,l,u,x,A,y,f,d,c);const ft=Math.hypot(g,M),bt=Math.hypot(G,et);return[ft*d,bt*c]}function ut(b){const{width:a,height:l}=b;if(a>C||l>C)return null;const u=1e3,x=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),A=a+1;let y=new Uint8Array(A*(l+1)),f,d,c;const g=a+7&-8;let M=new Uint8Array(g*l),G=0;for(const ft of b.data){let bt=128;for(;bt>0;)M[G++]=ft&bt?0:255,bt>>=1}let et=0;for(G=0,M[G]!==0&&(y[0]=1,++et),d=1;d<a;d++)M[G]!==M[G+1]&&(y[d]=M[G]?2:1,++et),G++;for(M[G]!==0&&(y[d]=2,++et),f=1;f<l;f++){G=f*g,c=f*A,M[G-g]!==M[G]&&(y[c]=M[G]?1:8,++et);let ft=(M[G]?4:0)+(M[G-g]?8:0);for(d=1;d<a;d++)ft=(ft>>2)+(M[G+1]?4:0)+(M[G-g+1]?8:0),x[ft]&&(y[c+d]=x[ft],++et),G++;if(M[G-g]!==M[G]&&(y[c+d]=M[G]?2:4,++et),et>u)return null}for(G=g*(l-1),c=f*A,M[G]!==0&&(y[c]=8,++et),d=1;d<a;d++)M[G]!==M[G+1]&&(y[c+d]=M[G]?4:8,++et),G++;if(M[G]!==0&&(y[c+d]=4,++et),et>u)return null;const rt=new Int32Array([0,A,-1,0,-A,0,0,0,1]),vt=new Path2D;for(f=0;et&&f<=l;f++){let ft=f*A;const bt=ft+a;for(;ft<bt&&!y[ft];)ft++;if(ft===bt)continue;vt.moveTo(ft%A,f);const Tt=ft;let St=y[ft];do{const xt=rt[St];do ft+=xt;while(!y[ft]);const Dt=y[ft];Dt!==5&&Dt!==10?(St=Dt,y[ft]=0):(St=Dt&51*St>>4,y[ft]&=St>>2|St<<2),vt.lineTo(ft%A,ft/A|0),y[ft]||--et}while(Tt!==ft);--f}return M=null,y=null,function(ft){ft.save(),ft.scale(1/a,-1/l),ft.translate(0,-l),ft.fill(vt),ft.beginPath(),ft.restore()}}class wt{constructor(a,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,l])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,l){this.x=a,this.y=l}updatePathMinMax(a,l,u){[l,u]=s.Util.applyTransform([l,u],a),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,u)}updateRectMinMax(a,l){const u=s.Util.applyTransform(l,a),x=s.Util.applyTransform(l.slice(2),a),A=s.Util.applyTransform([l[0],l[3]],a),y=s.Util.applyTransform([l[2],l[1]],a);this.minX=Math.min(this.minX,u[0],x[0],A[0],y[0]),this.minY=Math.min(this.minY,u[1],x[1],A[1],y[1]),this.maxX=Math.max(this.maxX,u[0],x[0],A[0],y[0]),this.maxY=Math.max(this.maxY,u[1],x[1],A[1],y[1])}updateScalingPathMinMax(a,l){s.Util.scaleMinMax(a,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(a,l,u,x,A,y,f,d,c,g){const M=s.Util.bezierBoundingBox(l,u,x,A,y,f,d,c);if(g){g[0]=Math.min(g[0],M[0],M[2]),g[1]=Math.max(g[1],M[0],M[2]),g[2]=Math.min(g[2],M[1],M[3]),g[3]=Math.max(g[3],M[1],M[3]);return}this.updateRectMinMax(a,M)}getPathBoundingBox(a=h.FILL,l=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(a===h.STROKE){l||(0,s.unreachable)("Stroke bounding box must include transform.");const x=s.Util.singularValueDecompose2dScale(l),A=x[0]*this.lineWidth/2,y=x[1]*this.lineWidth/2;u[0]-=A,u[1]-=y,u[2]+=A,u[3]+=y}return u}updateClipFromPath(){const a=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=h.FILL,l=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(a,l))}}function jt(b,a){if(typeof ImageData<"u"&&a instanceof ImageData){b.putImageData(a,0,0);return}const l=a.height,u=a.width,x=l%B,A=(l-x)/B,y=x===0?A:A+1,f=b.createImageData(u,B);let d=0,c;const g=a.data,M=f.data;let G,et,rt,vt;if(a.kind===s.ImageKind.GRAYSCALE_1BPP){const ft=g.byteLength,bt=new Uint32Array(M.buffer,0,M.byteLength>>2),Tt=bt.length,St=u+7>>3,xt=4294967295,Dt=s.FeatureTest.isLittleEndian?4278190080:255;for(G=0;G<y;G++){for(rt=G<A?B:x,c=0,et=0;et<rt;et++){const nt=ft-d;let P=0;const K=nt>St?u:nt*8-7,tt=K&-8;let ct=0,gt=0;for(;P<tt;P+=8)gt=g[d++],bt[c++]=gt&128?xt:Dt,bt[c++]=gt&64?xt:Dt,bt[c++]=gt&32?xt:Dt,bt[c++]=gt&16?xt:Dt,bt[c++]=gt&8?xt:Dt,bt[c++]=gt&4?xt:Dt,bt[c++]=gt&2?xt:Dt,bt[c++]=gt&1?xt:Dt;for(;P<K;P++)ct===0&&(gt=g[d++],ct=128),bt[c++]=gt&ct?xt:Dt,ct>>=1}for(;c<Tt;)bt[c++]=0;b.putImageData(f,0,G*B)}}else if(a.kind===s.ImageKind.RGBA_32BPP){for(et=0,vt=u*B*4,G=0;G<A;G++)M.set(g.subarray(d,d+vt)),d+=vt,b.putImageData(f,0,et),et+=B;G<y&&(vt=u*x*4,M.set(g.subarray(d,d+vt)),b.putImageData(f,0,et))}else if(a.kind===s.ImageKind.RGB_24BPP)for(rt=B,vt=u*rt,G=0;G<y;G++){for(G>=A&&(rt=x,vt=u*rt),c=0,et=vt;et--;)M[c++]=g[d++],M[c++]=g[d++],M[c++]=g[d++],M[c++]=255;b.putImageData(f,0,G*B)}else throw new Error(`bad image kind: ${a.kind}`)}function Nt(b,a){if(a.bitmap){b.drawImage(a.bitmap,0,0);return}const l=a.height,u=a.width,x=l%B,A=(l-x)/B,y=x===0?A:A+1,f=b.createImageData(u,B);let d=0;const c=a.data,g=f.data;for(let M=0;M<y;M++){const G=M<A?B:x;({srcPos:d}=H({src:c,srcPos:d,dest:g,width:u,height:G,nonBlackColor:0})),b.putImageData(f,0,M*B)}}function Ft(b,a){const l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const u of l)b[u]!==void 0&&(a[u]=b[u]);b.setLineDash!==void 0&&(a.setLineDash(b.getLineDash()),a.lineDashOffset=b.lineDashOffset)}function Pt(b){if(b.strokeStyle=b.fillStyle="#000000",b.fillRule="nonzero",b.globalAlpha=1,b.lineWidth=1,b.lineCap="butt",b.lineJoin="miter",b.miterLimit=10,b.globalCompositeOperation="source-over",b.font="10px sans-serif",b.setLineDash!==void 0&&(b.setLineDash([]),b.lineDashOffset=0),!s.isNodeJS){const{filter:a}=b;a!=="none"&&a!==""&&(b.filter="none")}}function Yt(b,a,l,u){const x=b.length;for(let A=3;A<x;A+=4){const y=b[A];if(y===0)b[A-3]=a,b[A-2]=l,b[A-1]=u;else if(y<255){const f=255-y;b[A-3]=b[A-3]*y+a*f>>8,b[A-2]=b[A-2]*y+l*f>>8,b[A-1]=b[A-1]*y+u*f>>8}}}function Ht(b,a,l){const u=b.length,x=1/255;for(let A=3;A<u;A+=4){const y=l?l[b[A]]:b[A];a[A]=a[A]*y*x|0}}function ue(b,a,l){const u=b.length;for(let x=3;x<u;x+=4){const A=b[x-3]*77+b[x-2]*152+b[x-1]*28;a[x]=l?a[x]*l[A>>8]>>8:a[x]*A>>16}}function ie(b,a,l,u,x,A,y,f,d,c,g){const M=!!A,G=M?A[0]:0,et=M?A[1]:0,rt=M?A[2]:0,vt=x==="Luminosity"?ue:Ht,ft=Math.min(u,Math.ceil(1048576/l));for(let bt=0;bt<u;bt+=ft){const Tt=Math.min(ft,u-bt),St=b.getImageData(f-c,bt+(d-g),l,Tt),xt=a.getImageData(f,bt+d,l,Tt);M&&Yt(St.data,G,et,rt),vt(St.data,xt.data,y),a.putImageData(xt,f,bt+d)}}function Jt(b,a,l,u){const x=u[0],A=u[1],y=u[2]-x,f=u[3]-A;y===0||f===0||(ie(a.context,l,y,f,a.subtype,a.backdrop,a.transferMap,x,A,a.offsetX,a.offsetY),b.save(),b.globalAlpha=1,b.globalCompositeOperation="source-over",b.setTransform(1,0,0,1,0,0),b.drawImage(l.canvas,0,0),b.restore())}function Vt(b,a){const l=s.Util.singularValueDecompose2dScale(b);l[0]=Math.fround(l[0]),l[1]=Math.fround(l[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return a!==void 0?a:l[0]<=u||l[1]<=u}const ne=["butt","round","square"],$t=["miter","round","bevel"],ce={},Zt={},z=class z{constructor(a,l,u,x,A,{optionalContentConfig:y,markedContentStack:f=null},d,c){S(this,Ae);S(this,se);this.ctx=a,this.current=new wt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=u,this.canvasFactory=x,this.filterFactory=A,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=f||[],this.optionalContentConfig=y,this.cachedCanvases=new lt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,l=null){return typeof a=="string"?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):l}beginDrawing({transform:a,viewport:l,transparency:u=!1,background:x=null}){const A=this.ctx.canvas.width,y=this.ctx.canvas.height,f=this.ctx.fillStyle;if(this.ctx.fillStyle=x||"#ffffff",this.ctx.fillRect(0,0,A,y),this.ctx.fillStyle=f,u){const d=this.cachedCanvases.getCanvas("transparent",A,y);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Pt(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(a,l,u,x){const A=a.argsArray,y=a.fnArray;let f=l||0;const d=A.length;if(d===f)return f;const c=d-f>Y&&typeof u=="function",g=c?Date.now()+D:0;let M=0;const G=this.commonObjs,et=this.objs;let rt;for(;;){if(x!==void 0&&f===x.nextBreakPoint)return x.breakIt(f,u),f;if(rt=y[f],rt!==s.OPS.dependency)this[rt].apply(this,A[f]);else for(const vt of A[f]){const ft=vt.startsWith("g_")?G:et;if(!ft.has(vt))return ft.get(vt,u),f}if(f++,f===d)return f;if(c&&++M>Y){if(Date.now()>g)return u(),f;M=0}}}endDrawing(){U(this,Ae,na).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const l of a.values())typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);a.clear()}this._cachedBitmapsMap.clear(),U(this,se,ra).call(this)}_scaleImage(a,l){const u=a.width,x=a.height;let A=Math.max(Math.hypot(l[0],l[1]),1),y=Math.max(Math.hypot(l[2],l[3]),1),f=u,d=x,c="prescale1",g,M;for(;A>2&&f>1||y>2&&d>1;){let G=f,et=d;A>2&&f>1&&(G=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f/2),A/=f/G),y>2&&d>1&&(et=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,y/=d/et),g=this.cachedCanvases.getCanvas(c,G,et),M=g.context,M.clearRect(0,0,G,et),M.drawImage(a,0,0,f,d,0,0,G,et),a=g.canvas,f=G,d=et,c=c==="prescale1"?"prescale2":"prescale1"}return{img:a,paintWidth:f,paintHeight:d}}_createMaskCanvas(a){const l=this.ctx,{width:u,height:x}=a,A=this.current.fillColor,y=this.current.patternFill,f=(0,o.getCurrentTransform)(l);let d,c,g,M;if((a.bitmap||a.data)&&a.count>1){const K=a.bitmap||a.data.buffer;c=JSON.stringify(y?f:[f.slice(0,4),A]),d=this._cachedBitmapsMap.get(K),d||(d=new Map,this._cachedBitmapsMap.set(K,d));const tt=d.get(c);if(tt&&!y){const ct=Math.round(Math.min(f[0],f[2])+f[4]),gt=Math.round(Math.min(f[1],f[3])+f[5]);return{canvas:tt,offsetX:ct,offsetY:gt}}g=tt}g||(M=this.cachedCanvases.getCanvas("maskCanvas",u,x),Nt(M.context,a));let G=s.Util.transform(f,[1/u,0,0,-1/x,0,0]);G=s.Util.transform(G,[1,0,0,1,0,-x]);const[et,rt,vt,ft]=s.Util.getAxialAlignedBoundingBox([0,0,u,x],G),bt=Math.round(vt-et)||1,Tt=Math.round(ft-rt)||1,St=this.cachedCanvases.getCanvas("fillCanvas",bt,Tt),xt=St.context,Dt=et,nt=rt;xt.translate(-Dt,-nt),xt.transform(...G),g||(g=this._scaleImage(M.canvas,(0,o.getCurrentTransformInverse)(xt)),g=g.img,d&&y&&d.set(c,g)),xt.imageSmoothingEnabled=Vt((0,o.getCurrentTransform)(xt),a.interpolate),Q(xt,g,0,0,g.width,g.height,0,0,u,x),xt.globalCompositeOperation="source-in";const P=s.Util.transform((0,o.getCurrentTransformInverse)(xt),[1,0,0,1,-Dt,-nt]);return xt.fillStyle=y?A.getPattern(l,this,P,h.FILL):A,xt.fillRect(0,0,u,x),d&&!y&&(this.cachedCanvases.delete("fillCanvas"),d.set(c,St.canvas)),{canvas:St.canvas,offsetX:Math.round(Dt),offsetY:Math.round(nt)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=ne[a]}setLineJoin(a){this.ctx.lineJoin=$t[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,l){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(a),u.lineDashOffset=l)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[l,u]of a)switch(l){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=u;break;case"ca":this.current.fillAlpha=u,this.ctx.globalAlpha=u;break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.ctx.canvas.width,l=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,x=this.cachedCanvases.getCanvas(u,a,l);this.suspendedCtx=this.ctx,this.ctx=x.context;const A=this.ctx;A.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),Ft(this.suspendedCtx,A),J(A,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ft(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const l=this.current.activeSMask,u=this.suspendedCtx;Jt(u,l,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Ft(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ft(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,l,u,x,A,y){this.ctx.transform(a,l,u,x,A,y),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(a,l,u){const x=this.ctx,A=this.current;let y=A.x,f=A.y,d,c;const g=(0,o.getCurrentTransform)(x),M=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,G=M?u.slice(0):null;for(let et=0,rt=0,vt=a.length;et<vt;et++)switch(a[et]|0){case s.OPS.rectangle:y=l[rt++],f=l[rt++];const ft=l[rt++],bt=l[rt++],Tt=y+ft,St=f+bt;x.moveTo(y,f),ft===0||bt===0?x.lineTo(Tt,St):(x.lineTo(Tt,f),x.lineTo(Tt,St),x.lineTo(y,St)),M||A.updateRectMinMax(g,[y,f,Tt,St]),x.closePath();break;case s.OPS.moveTo:y=l[rt++],f=l[rt++],x.moveTo(y,f),M||A.updatePathMinMax(g,y,f);break;case s.OPS.lineTo:y=l[rt++],f=l[rt++],x.lineTo(y,f),M||A.updatePathMinMax(g,y,f);break;case s.OPS.curveTo:d=y,c=f,y=l[rt+4],f=l[rt+5],x.bezierCurveTo(l[rt],l[rt+1],l[rt+2],l[rt+3],y,f),A.updateCurvePathMinMax(g,d,c,l[rt],l[rt+1],l[rt+2],l[rt+3],y,f,G),rt+=6;break;case s.OPS.curveTo2:d=y,c=f,x.bezierCurveTo(y,f,l[rt],l[rt+1],l[rt+2],l[rt+3]),A.updateCurvePathMinMax(g,d,c,y,f,l[rt],l[rt+1],l[rt+2],l[rt+3],G),y=l[rt+2],f=l[rt+3],rt+=4;break;case s.OPS.curveTo3:d=y,c=f,y=l[rt+2],f=l[rt+3],x.bezierCurveTo(l[rt],l[rt+1],y,f,y,f),A.updateCurvePathMinMax(g,d,c,l[rt],l[rt+1],y,f,y,f,G),rt+=4;break;case s.OPS.closePath:x.closePath();break}M&&A.updateScalingPathMinMax(g,G),A.setCurrentPoint(y,f)}closePath(){this.ctx.closePath()}stroke(a=!0){const l=this.ctx,u=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof u=="object"&&(u!=null&&u.getPattern)?(l.save(),l.strokeStyle=u.getPattern(l,this,(0,o.getCurrentTransformInverse)(l),h.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){const l=this.ctx,u=this.current.fillColor,x=this.current.patternFill;let A=!1;x&&(l.save(),l.fillStyle=u.getPattern(l,this,(0,o.getCurrentTransformInverse)(l),h.FILL),A=!0);const y=this.current.getClippedPathBoundingBox();this.contentVisible&&y!==null&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),A&&l.restore(),a&&this.consumePath(y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ce}eoClip(){this.pendingClip=Zt}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,l=this.ctx;if(a===void 0){l.beginPath();return}l.save(),l.beginPath();for(const u of a)l.setTransform(...u.transform),l.translate(u.x,u.y),u.addToPath(l,u.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,l){var g;const u=this.commonObjs.get(a),x=this.current;if(!u)throw new Error(`Can't find font for ${a}`);if(x.fontMatrix=u.fontMatrix||s.FONT_IDENTITY_MATRIX,(x.fontMatrix[0]===0||x.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+a),l<0?(l=-l,x.fontDirection=-1):x.fontDirection=1,this.current.font=u,this.current.fontSize=l,u.isType3Font)return;const A=u.loadedName||"sans-serif",y=((g=u.systemFontInfo)==null?void 0:g.css)||`"${A}", ${u.fallbackName}`;let f="normal";u.black?f="900":u.bold&&(f="bold");const d=u.italic?"italic":"normal";let c=l;l<V?c=V:l>X&&(c=X),this.current.fontSizeScale=l/c,this.ctx.font=`${d} ${f} ${c}px ${y}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,l){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=l}setLeadingMoveText(a,l){this.setLeading(-l),this.moveText(a,l)}setTextMatrix(a,l,u,x,A,y){this.current.textMatrix=[a,l,u,x,A,y],this.current.textMatrixScale=Math.hypot(a,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,l,u,x){const A=this.ctx,y=this.current,f=y.font,d=y.textRenderingMode,c=y.fontSize/y.fontSizeScale,g=d&s.TextRenderingMode.FILL_STROKE_MASK,M=!!(d&s.TextRenderingMode.ADD_TO_PATH_FLAG),G=y.patternFill&&!f.missingFile;let et;(f.disableFontFace||M||G)&&(et=f.getPathGenerator(this.commonObjs,a)),f.disableFontFace||G?(A.save(),A.translate(l,u),A.beginPath(),et(A,c),x&&A.setTransform(...x),(g===s.TextRenderingMode.FILL||g===s.TextRenderingMode.FILL_STROKE)&&A.fill(),(g===s.TextRenderingMode.STROKE||g===s.TextRenderingMode.FILL_STROKE)&&A.stroke(),A.restore()):((g===s.TextRenderingMode.FILL||g===s.TextRenderingMode.FILL_STROKE)&&A.fillText(a,l,u),(g===s.TextRenderingMode.STROKE||g===s.TextRenderingMode.FILL_STROKE)&&A.strokeText(a,l,u)),M&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(A),x:l,y:u,fontSize:c,addToPath:et})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);const l=a.getImageData(0,0,10,10).data;let u=!1;for(let x=3;x<l.length;x+=4)if(l[x]>0&&l[x]<255){u=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(a){const l=this.current,u=l.font;if(u.isType3Font)return this.showType3Text(a);const x=l.fontSize;if(x===0)return;const A=this.ctx,y=l.fontSizeScale,f=l.charSpacing,d=l.wordSpacing,c=l.fontDirection,g=l.textHScale*c,M=a.length,G=u.vertical,et=G?1:-1,rt=u.defaultVMetrics,vt=x*l.fontMatrix[0],ft=l.textRenderingMode===s.TextRenderingMode.FILL&&!u.disableFontFace&&!l.patternFill;A.save(),A.transform(...l.textMatrix),A.translate(l.x,l.y+l.textRise),c>0?A.scale(g,-1):A.scale(g,1);let bt;if(l.patternFill){A.save();const nt=l.fillColor.getPattern(A,this,(0,o.getCurrentTransformInverse)(A),h.FILL);bt=(0,o.getCurrentTransform)(A),A.restore(),A.fillStyle=nt}let Tt=l.lineWidth;const St=l.textMatrixScale;if(St===0||Tt===0){const nt=l.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(nt===s.TextRenderingMode.STROKE||nt===s.TextRenderingMode.FILL_STROKE)&&(Tt=this.getSinglePixelWidth())}else Tt/=St;if(y!==1&&(A.scale(y,y),Tt/=y),A.lineWidth=Tt,u.isInvalidPDFjsFont){const nt=[];let P=0;for(const K of a)nt.push(K.unicode),P+=K.width;A.fillText(nt.join(""),0,0),l.x+=P*vt*g,A.restore(),this.compose();return}let xt=0,Dt;for(Dt=0;Dt<M;++Dt){const nt=a[Dt];if(typeof nt=="number"){xt+=et*nt*x/1e3;continue}let P=!1;const K=(nt.isSpace?d:0)+f,tt=nt.fontChar,ct=nt.accent;let gt,Et,It=nt.width;if(G){const Kt=nt.vmetric||rt,_e=-(nt.vmetric?Kt[1]:It*.5)*vt,Qt=Kt[2]*vt;It=Kt?-Kt[0]:It,gt=_e/y,Et=(xt+Qt)/y}else gt=xt/y,Et=0;if(u.remeasure&&It>0){const Kt=A.measureText(tt).width*1e3/x*y;if(It<Kt&&this.isFontSubpixelAAEnabled){const _e=It/Kt;P=!0,A.save(),A.scale(_e,1),gt/=_e}else It!==Kt&&(gt+=(It-Kt)/2e3*x/y)}if(this.contentVisible&&(nt.isInFont||u.missingFile)){if(ft&&!ct)A.fillText(tt,gt,Et);else if(this.paintChar(tt,gt,Et,bt),ct){const Kt=gt+x*ct.offset.x/y,_e=Et-x*ct.offset.y/y;this.paintChar(ct.fontChar,Kt,_e,bt)}}const te=G?It*vt-K*c:It*vt+K*c;xt+=te,P&&A.restore()}G?l.y-=xt:l.x+=xt*g,A.restore(),this.compose()}showType3Text(a){const l=this.ctx,u=this.current,x=u.font,A=u.fontSize,y=u.fontDirection,f=x.vertical?1:-1,d=u.charSpacing,c=u.wordSpacing,g=u.textHScale*y,M=u.fontMatrix||s.FONT_IDENTITY_MATRIX,G=a.length,et=u.textRenderingMode===s.TextRenderingMode.INVISIBLE;let rt,vt,ft,bt;if(!(et||A===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,l.save(),l.transform(...u.textMatrix),l.translate(u.x,u.y),l.scale(g,y),rt=0;rt<G;++rt){if(vt=a[rt],typeof vt=="number"){bt=f*vt*A/1e3,this.ctx.translate(bt,0),u.x+=bt*g;continue}const Tt=(vt.isSpace?c:0)+d,St=x.charProcOperatorList[vt.operatorListId];if(!St){(0,s.warn)(`Type3 character "${vt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=vt,this.save(),l.scale(A,A),l.transform(...M),this.executeOperatorList(St),this.restore()),ft=s.Util.applyTransform([vt.width,0],M)[0]*A+Tt,l.translate(ft,0),u.x+=ft*g}l.restore(),this.processingType3=null}}setCharWidth(a,l){}setCharWidthAndBounds(a,l,u,x,A,y){this.ctx.rect(u,x,A-u,y-x),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let l;if(a[0]==="TilingPattern"){const u=a[1],x=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),A={createCanvasGraphics:y=>new z(y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};l=new L(a,u,this.ctx,A,x)}else l=this._getPattern(a[1],a[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,l,u){const x=s.Util.makeHexColor(a,l,u);this.ctx.strokeStyle=x,this.current.strokeColor=x}setFillRGBColor(a,l,u){const x=s.Util.makeHexColor(a,l,u);this.ctx.fillStyle=x,this.current.fillColor=x,this.current.patternFill=!1}_getPattern(a,l=null){let u;return this.cachedPatterns.has(a)?u=this.cachedPatterns.get(a):(u=R(this.getObject(a)),this.cachedPatterns.set(a,u)),l&&(u.matrix=l),u}shadingFill(a){if(!this.contentVisible)return;const l=this.ctx;this.save();const u=this._getPattern(a);l.fillStyle=u.getPattern(l,this,(0,o.getCurrentTransformInverse)(l),h.SHADING);const x=(0,o.getCurrentTransformInverse)(l);if(x){const{width:A,height:y}=l.canvas,[f,d,c,g]=s.Util.getAxialAlignedBoundingBox([0,0,A,y],x);this.ctx.fillRect(f,d,c-f,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,l){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&a.length===6&&this.transform(...a),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),l)){const u=l[2]-l[0],x=l[3]-l[1];this.ctx.rect(l[0],l[1],u,x),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const l=this.ctx;a.isolated||(0,s.info)("TODO: Support non-isolated groups."),a.knockout&&(0,s.warn)("Knockout groups not supported.");const u=(0,o.getCurrentTransform)(l);if(a.matrix&&l.transform(...a.matrix),!a.bbox)throw new Error("Bounding box is required.");let x=s.Util.getAxialAlignedBoundingBox(a.bbox,(0,o.getCurrentTransform)(l));const A=[0,0,l.canvas.width,l.canvas.height];x=s.Util.intersect(x,A)||[0,0,0,0];const y=Math.floor(x[0]),f=Math.floor(x[1]);let d=Math.max(Math.ceil(x[2])-y,1),c=Math.max(Math.ceil(x[3])-f,1),g=1,M=1;d>$&&(g=d/$,d=$),c>$&&(M=c/$,c=$),this.current.startNewPathAndClipBox([0,0,d,c]);let G="groupAt"+this.groupLevel;a.smask&&(G+="_smask_"+this.smaskCounter++%2);const et=this.cachedCanvases.getCanvas(G,d,c),rt=et.context;rt.scale(1/g,1/M),rt.translate(-y,-f),rt.transform(...u),a.smask?this.smaskStack.push({canvas:et.canvas,context:rt,offsetX:y,offsetY:f,scaleX:g,scaleY:M,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(y,f),l.scale(g,M),l.save()),Ft(l,rt),this.ctx=rt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const l=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const x=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...x);const A=s.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],x);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(A)}}beginAnnotation(a,l,u,x,A){if(U(this,Ae,na).call(this),Pt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&l.length===4){const y=l[2]-l[0],f=l[3]-l[1];if(A&&this.annotationCanvasMap){u=u.slice(),u[4]-=l[0],u[5]-=l[1],l=l.slice(),l[0]=l[1]=0,l[2]=y,l[3]=f;const[d,c]=s.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:g}=this,M=Math.ceil(y*this.outputScaleX*g),G=Math.ceil(f*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(M,G);const{canvas:et,context:rt}=this.annotationCanvas;this.annotationCanvasMap.set(a,et),this.annotationCanvas.savedCtx=this.ctx,this.ctx=rt,this.ctx.save(),this.ctx.setTransform(d,0,0,-c,0,f*c),Pt(this.ctx)}else Pt(this.ctx),this.ctx.rect(l[0],l[1],y,f),this.ctx.clip(),this.endPath()}this.current=new wt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...u),this.transform(...x)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),U(this,se,ra).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;const l=a.count;a=this.getObject(a.data,a),a.count=l;const u=this.ctx,x=this.processingType3;if(x&&(x.compiled===void 0&&(x.compiled=ut(a)),x.compiled)){x.compiled(u);return}const A=this._createMaskCanvas(a),y=A.canvas;u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(y,A.offsetX,A.offsetY),u.restore(),this.compose()}paintImageMaskXObjectRepeat(a,l,u=0,x=0,A,y){if(!this.contentVisible)return;a=this.getObject(a.data,a);const f=this.ctx;f.save();const d=(0,o.getCurrentTransform)(f);f.transform(l,u,x,A,0,0);const c=this._createMaskCanvas(a);f.setTransform(1,0,0,1,c.offsetX-d[4],c.offsetY-d[5]);for(let g=0,M=y.length;g<M;g+=2){const G=s.Util.transform(d,[l,u,x,A,y[g],y[g+1]]),[et,rt]=s.Util.applyTransform([0,0],G);f.drawImage(c.canvas,et,rt)}f.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const l=this.ctx,u=this.current.fillColor,x=this.current.patternFill;for(const A of a){const{data:y,width:f,height:d,transform:c}=A,g=this.cachedCanvases.getCanvas("maskCanvas",f,d),M=g.context;M.save();const G=this.getObject(y,A);Nt(M,G),M.globalCompositeOperation="source-in",M.fillStyle=x?u.getPattern(M,this,(0,o.getCurrentTransformInverse)(l),h.FILL):u,M.fillRect(0,0,f,d),M.restore(),l.save(),l.transform(...c),l.scale(1,-1),Q(l,g.canvas,0,0,f,d,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const l=this.getObject(a);if(!l){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(l)}paintImageXObjectRepeat(a,l,u,x){if(!this.contentVisible)return;const A=this.getObject(a);if(!A){(0,s.warn)("Dependent image isn't ready yet");return}const y=A.width,f=A.height,d=[];for(let c=0,g=x.length;c<g;c+=2)d.push({transform:[l,0,0,u,x[c],x[c+1]],x:0,y:0,w:y,h:f});this.paintInlineImageXObjectGroup(A,d)}applyTransferMapsToCanvas(a){return this.current.transferMaps!=="none"&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if(this.current.transferMaps==="none")return a.bitmap;const{bitmap:l,width:u,height:x}=a,A=this.cachedCanvases.getCanvas("inlineImage",u,x),y=A.context;return y.filter=this.current.transferMaps,y.drawImage(l,0,0),y.filter="none",A.canvas}paintInlineImageXObject(a){if(!this.contentVisible)return;const l=a.width,u=a.height,x=this.ctx;if(this.save(),!s.isNodeJS){const{filter:f}=x;f!=="none"&&f!==""&&(x.filter="none")}x.scale(1/l,-1/u);let A;if(a.bitmap)A=this.applyTransferMapsToBitmap(a);else if(typeof HTMLElement=="function"&&a instanceof HTMLElement||!a.data)A=a;else{const f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;jt(f,a),A=this.applyTransferMapsToCanvas(f)}const y=this._scaleImage(A,(0,o.getCurrentTransformInverse)(x));x.imageSmoothingEnabled=Vt((0,o.getCurrentTransform)(x),a.interpolate),Q(x,y.img,0,0,y.paintWidth,y.paintHeight,0,-u,l,u),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,l){if(!this.contentVisible)return;const u=this.ctx;let x;if(a.bitmap)x=a.bitmap;else{const A=a.width,y=a.height,f=this.cachedCanvases.getCanvas("inlineImage",A,y).context;jt(f,a),x=this.applyTransferMapsToCanvas(f)}for(const A of l)u.save(),u.transform(...A.transform),u.scale(1,-1),Q(u,x,A.x,A.y,A.w,A.h,0,-1,1,1),u.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,l){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,l){a==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(l)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const u=this.ctx;this.pendingClip&&(l||(this.pendingClip===Zt?u.clip("evenodd"):u.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),u.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=(0,o.getCurrentTransform)(this.ctx);if(a[1]===0&&a[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const l=Math.abs(a[0]*a[3]-a[2]*a[1]),u=Math.hypot(a[0],a[2]),x=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(u,x)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:a}=this.current,{a:l,b:u,c:x,d:A}=this.ctx.getTransform();let y,f;if(u===0&&x===0){const d=Math.abs(l),c=Math.abs(A);if(d===c)if(a===0)y=f=1/d;else{const g=d*a;y=f=g<1?1/g:1}else if(a===0)y=1/d,f=1/c;else{const g=d*a,M=c*a;y=g<1?1/g:1,f=M<1?1/M:1}}else{const d=Math.abs(l*A-u*x),c=Math.hypot(l,u),g=Math.hypot(x,A);if(a===0)y=g/d,f=c/d;else{const M=a*d;y=g>M?g/M:1,f=c>M?c/M:1}}this._cachedScaleForStroking[0]=y,this._cachedScaleForStroking[1]=f}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:l}=this,{lineWidth:u}=this.current,[x,A]=this.getScaleForStroking();if(l.lineWidth=u||1,x===1&&A===1){l.stroke();return}const y=l.getLineDash();if(a&&l.save(),l.scale(x,A),y.length>0){const f=Math.max(x,A);l.setLineDash(y.map(d=>d/f)),l.lineDashOffset/=f}l.stroke(),a&&l.restore()}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}};Ae=new WeakSet,na=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},se=new WeakSet,ra=function(){if(this.pageColors){const a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(a!=="none"){const l=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=l}}};let oe=z;for(const b in s.OPS)oe.prototype[b]!==void 0&&(oe.prototype[s.OPS[b]]=oe.prototype[b])},473:(t,e,n)=>{var Ft,Pt,Yt,Ht,ue,ie,Jt,Vt,ne,$t,ce,Zt,Ai,qt,yi,pe,aa,le,Yn,b,Kn,l,Ji,x,Zi;n.d(e,{DOMCMapReaderFactory:()=>_,DOMCanvasFactory:()=>w,DOMFilterFactory:()=>k,DOMSVGFactory:()=>N,DOMStandardFontDataFactory:()=>I,PDFDateString:()=>B,PageViewport:()=>R,PixelsPerInch:()=>m,RenderingCancelledException:()=>Z,StatTimer:()=>$,fetchData:()=>T,getColorValues:()=>Q,getCurrentTransform:()=>ut,getCurrentTransformInverse:()=>wt,getFilenameFromUrl:()=>V,getPdfFilenameFromUrl:()=>X,getRGB:()=>lt,getXfaPageViewport:()=>J,isDataScheme:()=>L,isPdfFile:()=>H,isValidFetchUrl:()=>D,noContextMenu:()=>Y,setLayerDimensions:()=>jt});var s=n(822),o=n(266);const h="http://www.w3.org/2000/svg",Nt=class Nt{};we(Nt,"CSS",96),we(Nt,"PDF",72),we(Nt,"PDF_TO_CSS_UNITS",Nt.CSS/Nt.PDF);let m=Nt;class k extends s.BaseFilterFactory{constructor({docId:d,ownerDocument:c=globalThis.document}={}){super();S(this,Zt);S(this,qt);S(this,pe);S(this,le);S(this,b);S(this,l);S(this,x);S(this,Ft,void 0);S(this,Pt,void 0);S(this,Yt,void 0);S(this,Ht,void 0);S(this,ue,void 0);S(this,ie,void 0);S(this,Jt,void 0);S(this,Vt,void 0);S(this,ne,void 0);S(this,$t,void 0);S(this,ce,0);W(this,Yt,d),W(this,Ht,c)}addFilter(d){if(!d)return"none";let c=i(this,Zt,Ai).get(d);if(c)return c;let g,M,G,et;if(d.length===1){const bt=d[0],Tt=new Array(256);for(let St=0;St<256;St++)Tt[St]=bt[St]/255;et=g=M=G=Tt.join(",")}else{const[bt,Tt,St]=d,xt=new Array(256),Dt=new Array(256),nt=new Array(256);for(let P=0;P<256;P++)xt[P]=bt[P]/255,Dt[P]=Tt[P]/255,nt[P]=St[P]/255;g=xt.join(","),M=Dt.join(","),G=nt.join(","),et=`${g}${M}${G}`}if(c=i(this,Zt,Ai).get(et),c)return i(this,Zt,Ai).set(d,c),c;const rt=`g_${i(this,Yt)}_transfer_map_${Es(this,ce)._++}`,vt=`url(#${rt})`;i(this,Zt,Ai).set(d,vt),i(this,Zt,Ai).set(et,vt);const ft=U(this,le,Yn).call(this,rt);return U(this,l,Ji).call(this,g,M,G,ft),vt}addHCMFilter(d,c){var Tt;const g=`${d}-${c}`;if(i(this,ie)===g)return i(this,Jt);if(W(this,ie,g),W(this,Jt,"none"),(Tt=i(this,ue))==null||Tt.remove(),!d||!c)return i(this,Jt);const M=U(this,x,Zi).call(this,d);d=o.Util.makeHexColor(...M);const G=U(this,x,Zi).call(this,c);if(c=o.Util.makeHexColor(...G),i(this,qt,yi).style.color="",d==="#000000"&&c==="#ffffff"||d===c)return i(this,Jt);const et=new Array(256);for(let St=0;St<=255;St++){const xt=St/255;et[St]=xt<=.03928?xt/12.92:((xt+.055)/1.055)**2.4}const rt=et.join(","),vt=`g_${i(this,Yt)}_hcm_filter`,ft=W(this,Vt,U(this,le,Yn).call(this,vt));U(this,l,Ji).call(this,rt,rt,rt,ft),U(this,pe,aa).call(this,ft);const bt=(St,xt)=>{const Dt=M[St]/255,nt=G[St]/255,P=new Array(xt+1);for(let K=0;K<=xt;K++)P[K]=Dt+K/xt*(nt-Dt);return P.join(",")};return U(this,l,Ji).call(this,bt(0,5),bt(1,5),bt(2,5),ft),W(this,Jt,`url(#${vt})`),i(this,Jt)}addHighlightHCMFilter(d,c,g,M){var nt;const G=`${d}-${c}-${g}-${M}`;if(i(this,ne)===G)return i(this,$t);if(W(this,ne,G),W(this,$t,"none"),(nt=i(this,Vt))==null||nt.remove(),!d||!c)return i(this,$t);const[et,rt]=[d,c].map(U(this,x,Zi).bind(this));let vt=Math.round(.2126*et[0]+.7152*et[1]+.0722*et[2]),ft=Math.round(.2126*rt[0]+.7152*rt[1]+.0722*rt[2]),[bt,Tt]=[g,M].map(U(this,x,Zi).bind(this));ft<vt&&([vt,ft,bt,Tt]=[ft,vt,Tt,bt]),i(this,qt,yi).style.color="";const St=(P,K,tt)=>{const ct=new Array(256),gt=(ft-vt)/tt,Et=P/255,It=(K-P)/(255*tt);let te=0;for(let Kt=0;Kt<=tt;Kt++){const _e=Math.round(vt+Kt*gt),Qt=Et+Kt*It;for(let re=te;re<=_e;re++)ct[re]=Qt;te=_e+1}for(let Kt=te;Kt<256;Kt++)ct[Kt]=ct[te-1];return ct.join(",")},xt=`g_${i(this,Yt)}_hcm_highlight_filter`,Dt=W(this,Vt,U(this,le,Yn).call(this,xt));return U(this,pe,aa).call(this,Dt),U(this,l,Ji).call(this,St(bt[0],Tt[0],5),St(bt[1],Tt[1],5),St(bt[2],Tt[2],5),Dt),W(this,$t,`url(#${xt})`),i(this,$t)}destroy(d=!1){d&&(i(this,Jt)||i(this,$t))||(i(this,Pt)&&(i(this,Pt).parentNode.parentNode.remove(),W(this,Pt,null)),i(this,Ft)&&(i(this,Ft).clear(),W(this,Ft,null)),W(this,ce,0))}}Ft=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,Ht=new WeakMap,ue=new WeakMap,ie=new WeakMap,Jt=new WeakMap,Vt=new WeakMap,ne=new WeakMap,$t=new WeakMap,ce=new WeakMap,Zt=new WeakSet,Ai=function(){return i(this,Ft)||W(this,Ft,new Map)},qt=new WeakSet,yi=function(){if(!i(this,Pt)){const d=i(this,Ht).createElement("div"),{style:c}=d;c.visibility="hidden",c.contain="strict",c.width=c.height=0,c.position="absolute",c.top=c.left=0,c.zIndex=-1;const g=i(this,Ht).createElementNS(h,"svg");g.setAttribute("width",0),g.setAttribute("height",0),W(this,Pt,i(this,Ht).createElementNS(h,"defs")),d.append(g),g.append(i(this,Pt)),i(this,Ht).body.append(d)}return i(this,Pt)},pe=new WeakSet,aa=function(d){const c=i(this,Ht).createElementNS(h,"feColorMatrix");c.setAttribute("type","matrix"),c.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),d.append(c)},le=new WeakSet,Yn=function(d){const c=i(this,Ht).createElementNS(h,"filter");return c.setAttribute("color-interpolation-filters","sRGB"),c.setAttribute("id",d),i(this,qt,yi).append(c),c},b=new WeakSet,Kn=function(d,c,g){const M=i(this,Ht).createElementNS(h,c);M.setAttribute("type","discrete"),M.setAttribute("tableValues",g),d.append(M)},l=new WeakSet,Ji=function(d,c,g,M){const G=i(this,Ht).createElementNS(h,"feComponentTransfer");M.append(G),U(this,b,Kn).call(this,G,"feFuncR",d),U(this,b,Kn).call(this,G,"feFuncG",c),U(this,b,Kn).call(this,G,"feFuncB",g)},x=new WeakSet,Zi=function(d){return i(this,qt,yi).style.color=d,lt(getComputedStyle(i(this,qt,yi)).getPropertyValue("color"))};class w extends s.BaseCanvasFactory{constructor({ownerDocument:f=globalThis.document}={}){super(),this._document=f}_createCanvas(f,d){const c=this._document.createElement("canvas");return c.width=f,c.height=d,c}}async function T(y,f="text"){if(D(y,document.baseURI)){const d=await fetch(y);if(!d.ok)throw new Error(d.statusText);switch(f){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"json":return d.json()}return d.text()}return new Promise((d,c)=>{const g=new XMLHttpRequest;g.open("GET",y,!0),g.responseType=f,g.onreadystatechange=()=>{if(g.readyState===XMLHttpRequest.DONE){if(g.status===200||g.status===0){let M;switch(f){case"arraybuffer":case"blob":case"json":M=g.response;break;default:M=g.responseText;break}if(M){d(M);return}}c(new Error(g.statusText))}},g.send(null)})}class _ extends s.BaseCMapReaderFactory{_fetchData(f,d){return T(f,this.isCompressed?"arraybuffer":"text").then(c=>({cMapData:c instanceof ArrayBuffer?new Uint8Array(c):(0,o.stringToBytes)(c),compressionType:d}))}}class I extends s.BaseStandardFontDataFactory{_fetchData(f){return T(f,"arraybuffer").then(d=>new Uint8Array(d))}}class N extends s.BaseSVGFactory{_createSVG(f){return document.createElementNS(h,f)}}class R{constructor({viewBox:f,scale:d,rotation:c,offsetX:g=0,offsetY:M=0,dontFlip:G=!1}){this.viewBox=f,this.scale=d,this.rotation=c,this.offsetX=g,this.offsetY=M;const et=(f[2]+f[0])/2,rt=(f[3]+f[1])/2;let vt,ft,bt,Tt;switch(c%=360,c<0&&(c+=360),c){case 180:vt=-1,ft=0,bt=0,Tt=1;break;case 90:vt=0,ft=1,bt=1,Tt=0;break;case 270:vt=0,ft=-1,bt=-1,Tt=0;break;case 0:vt=1,ft=0,bt=0,Tt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}G&&(bt=-bt,Tt=-Tt);let St,xt,Dt,nt;vt===0?(St=Math.abs(rt-f[1])*d+g,xt=Math.abs(et-f[0])*d+M,Dt=(f[3]-f[1])*d,nt=(f[2]-f[0])*d):(St=Math.abs(et-f[0])*d+g,xt=Math.abs(rt-f[1])*d+M,Dt=(f[2]-f[0])*d,nt=(f[3]-f[1])*d),this.transform=[vt*d,ft*d,bt*d,Tt*d,St-vt*d*et-bt*d*rt,xt-ft*d*et-Tt*d*rt],this.width=Dt,this.height=nt}get rawDims(){const{viewBox:f}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:f[2]-f[0],pageHeight:f[3]-f[1],pageX:f[0],pageY:f[1]})}clone({scale:f=this.scale,rotation:d=this.rotation,offsetX:c=this.offsetX,offsetY:g=this.offsetY,dontFlip:M=!1}={}){return new R({viewBox:this.viewBox.slice(),scale:f,rotation:d,offsetX:c,offsetY:g,dontFlip:M})}convertToViewportPoint(f,d){return o.Util.applyTransform([f,d],this.transform)}convertToViewportRectangle(f){const d=o.Util.applyTransform([f[0],f[1]],this.transform),c=o.Util.applyTransform([f[2],f[3]],this.transform);return[d[0],d[1],c[0],c[1]]}convertToPdfPoint(f,d){return o.Util.applyInverseTransform([f,d],this.transform)}}class Z extends o.BaseException{constructor(f,d=0){super(f,"RenderingCancelledException"),this.extraDelay=d}}function L(y){const f=y.length;let d=0;for(;d<f&&y[d].trim()==="";)d++;return y.substring(d,d+5).toLowerCase()==="data:"}function H(y){return typeof y=="string"&&/\.pdf$/i.test(y)}function V(y,f=!1){return f||([y]=y.split(/[#?]/,1)),y.substring(y.lastIndexOf("/")+1)}function X(y,f="document.pdf"){if(typeof y!="string")return f;if(L(y))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),f;const d=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,g=d.exec(y);let M=c.exec(g[1])||c.exec(g[2])||c.exec(g[3]);if(M&&(M=M[0],M.includes("%")))try{M=c.exec(decodeURIComponent(M))[0]}catch{}return M||f}class ${constructor(){we(this,"started",Object.create(null));we(this,"times",[])}time(f){f in this.started&&(0,o.warn)(`Timer is already running for ${f}`),this.started[f]=Date.now()}timeEnd(f){f in this.started||(0,o.warn)(`Timer has not been started for ${f}`),this.times.push({name:f,start:this.started[f],end:Date.now()}),delete this.started[f]}toString(){const f=[];let d=0;for(const{name:c}of this.times)d=Math.max(c.length,d);for(const{name:c,start:g,end:M}of this.times)f.push(`${c.padEnd(d)} ${M-g}ms
`);return f.join("")}}function D(y,f){try{const{protocol:d}=f?new URL(y,f):new URL(y);return d==="http:"||d==="https:"}catch{return!1}}function Y(y){y.preventDefault()}let C;class B{static toDateObject(f){if(!f||typeof f!="string")return null;C||(C=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const d=C.exec(f);if(!d)return null;const c=parseInt(d[1],10);let g=parseInt(d[2],10);g=g>=1&&g<=12?g-1:0;let M=parseInt(d[3],10);M=M>=1&&M<=31?M:1;let G=parseInt(d[4],10);G=G>=0&&G<=23?G:0;let et=parseInt(d[5],10);et=et>=0&&et<=59?et:0;let rt=parseInt(d[6],10);rt=rt>=0&&rt<=59?rt:0;const vt=d[7]||"Z";let ft=parseInt(d[8],10);ft=ft>=0&&ft<=23?ft:0;let bt=parseInt(d[9],10)||0;return bt=bt>=0&&bt<=59?bt:0,vt==="-"?(G+=ft,et+=bt):vt==="+"&&(G-=ft,et-=bt),new Date(Date.UTC(c,g,M,G,et,rt))}}function J(y,{scale:f=1,rotation:d=0}){const{width:c,height:g}=y.attributes.style,M=[0,0,parseInt(c),parseInt(g)];return new R({viewBox:M,scale:f,rotation:d})}function lt(y){if(y.startsWith("#")){const f=parseInt(y.slice(1),16);return[(f&16711680)>>16,(f&65280)>>8,f&255]}return y.startsWith("rgb(")?y.slice(4,-1).split(",").map(f=>parseInt(f)):y.startsWith("rgba(")?y.slice(5,-1).split(",").map(f=>parseInt(f)).slice(0,3):((0,o.warn)(`Not a valid color format: "${y}"`),[0,0,0])}function Q(y){const f=document.createElement("span");f.style.visibility="hidden",document.body.append(f);for(const d of y.keys()){f.style.color=d;const c=window.getComputedStyle(f).color;y.set(d,lt(c))}f.remove()}function ut(y){const{a:f,b:d,c,d:g,e:M,f:G}=y.getTransform();return[f,d,c,g,M,G]}function wt(y){const{a:f,b:d,c,d:g,e:M,f:G}=y.getTransform().invertSelf();return[f,d,c,g,M,G]}function jt(y,f,d=!1,c=!0){if(f instanceof R){const{pageWidth:g,pageHeight:M}=f.rawDims,{style:G}=y,et=o.FeatureTest.isCSSRoundSupported,rt=`var(--scale-factor) * ${g}px`,vt=`var(--scale-factor) * ${M}px`,ft=et?`round(${rt}, 1px)`:`calc(${rt})`,bt=et?`round(${vt}, 1px)`:`calc(${vt})`;!d||f.rotation%180===0?(G.width=ft,G.height=bt):(G.width=bt,G.height=ft)}c&&y.setAttribute("data-main-rotation",f.rotation)}},423:(t,e,n)=>{var m,k,w,T,oa,I,la,R,ha;n.d(e,{DrawLayer:()=>h});var s=n(473),o=n(266);const L=class L{constructor({pageIndex:V}){S(this,I);S(this,m,null);S(this,k,0);S(this,w,new Map);this.pageIndex=V}setParent(V){if(!i(this,m)){W(this,m,V);return}if(i(this,m)!==V){if(i(this,w).size>0)for(const X of i(this,w).values())X.remove(),V.append(X);W(this,m,V)}}static get _svgFactory(){return(0,o.shadow)(this,"_svgFactory",new s.DOMSVGFactory)}highlight({outlines:V,box:X},$,D){var Nt;const Y=Es(this,k)._++,C=U(this,I,la).call(this,X);C.classList.add("highlight");const B=L._svgFactory.createElement("defs");C.append(B);const J=L._svgFactory.createElement("path");B.append(J);const lt=`path_p${this.pageIndex}_${Y}`;J.setAttribute("id",lt),J.setAttribute("d",U(Nt=L,R,ha).call(Nt,V));const Q=L._svgFactory.createElement("clipPath");B.append(Q);const ut=`clip_${lt}`;Q.setAttribute("id",ut),Q.setAttribute("clipPathUnits","objectBoundingBox");const wt=L._svgFactory.createElement("use");Q.append(wt),wt.setAttribute("href",`#${lt}`),wt.classList.add("clip");const jt=L._svgFactory.createElement("use");return C.append(jt),C.setAttribute("fill",$),C.setAttribute("fill-opacity",D),jt.setAttribute("href",`#${lt}`),i(this,w).set(Y,C),{id:Y,clipPathId:`url(#${ut})`}}highlightOutline({outlines:V,box:X}){var Q;const $=Es(this,k)._++,D=U(this,I,la).call(this,X);D.classList.add("highlightOutline");const Y=L._svgFactory.createElement("defs");D.append(Y);const C=L._svgFactory.createElement("path");Y.append(C);const B=`path_p${this.pageIndex}_${$}`;C.setAttribute("id",B),C.setAttribute("d",U(Q=L,R,ha).call(Q,V)),C.setAttribute("vector-effect","non-scaling-stroke");const J=L._svgFactory.createElement("use");D.append(J),J.setAttribute("href",`#${B}`);const lt=J.cloneNode();return D.append(lt),J.classList.add("mainOutline"),lt.classList.add("secondaryOutline"),i(this,w).set($,D),$}updateBox(V,X){var $;U($=L,T,oa).call($,i(this,w).get(V),X)}rotate(V,X){i(this,w).get(V).setAttribute("data-main-rotation",X)}changeColor(V,X){i(this,w).get(V).setAttribute("fill",X)}changeOpacity(V,X){i(this,w).get(V).setAttribute("fill-opacity",X)}addClass(V,X){i(this,w).get(V).classList.add(X)}removeClass(V,X){i(this,w).get(V).classList.remove(X)}remove(V){i(this,m)!==null&&(i(this,w).get(V).remove(),i(this,w).delete(V))}destroy(){W(this,m,null);for(const V of i(this,w).values())V.remove();i(this,w).clear()}};m=new WeakMap,k=new WeakMap,w=new WeakMap,T=new WeakSet,oa=function(V,{x:X,y:$,width:D,height:Y}){const{style:C}=V;C.top=`${100*$}%`,C.left=`${100*X}%`,C.width=`${100*D}%`,C.height=`${100*Y}%`},I=new WeakSet,la=function(V){var $;const X=L._svgFactory.create(1,1,!0);return i(this,m).append(X),U($=L,T,oa).call($,X,V),X},R=new WeakSet,ha=function(V){const X=[];for(const $ of V){let[D,Y]=$;X.push(`M${D} ${Y}`);for(let C=2;C<$.length;C+=2){const B=$[C],J=$[C+1];B===D?(X.push(`V${J}`),Y=J):J===Y&&(X.push(`H${B}`),D=B)}X.push("Z")}return X.join(" ")},S(L,T),S(L,R);let h=L},629:(t,e,n)=>{var L,H,V,X,$,D,Y,C,B,J,Rl,Q,Pl,wt,Ll,Nt,tn,Pt,ca,Ht,Fl,ie,da,ne,$t,ce,Zt,oe,qt,Ae,pe,se,le,z,ua,a,Il,u,pa,A,Qn,f,fa,c,Dl,M,Ol,rt,vt,ft,bt,Tt,St,xt,Dt,nt,P,K,tt,ct,gt,Et,It,Nl,Kt,Bl,Qt,Ul,j,jl,At,ga,Ot,Vl,E,ma,v,zl,q,Hl,at,ql,kt,Wl,Wt,$l,Lt,xs,Gt,va,ge,Jn,Re,Zn,De,_i,Ke,ba,Qe,tr,ve,Gl,Ni,Aa,On,Xl,Nn,Yl,Bi,ya,di,er,Fs,wi,Ue,ze,Is,bs,Ds,ui,As,Ys,us,rs,Ui,Ks,en,Qs,sn,pi,sr,ji,_a,Bn,Kl,Un,Ql,Vi,wa,fi,ir,jn,Jl,Js,gi,ys,Hi,Vn,qi,_s,Wi,Je,Os,mi,vi,ws,me,Ns,$i,Ea,Gi,xa,Zs,nn,Xi,Sa,Yi,Ca;n.d(e,{AnnotationEditorLayer:()=>Z});var s=n(266),o=n(115),h=n(812),m=n(640);const Vt=class Vt extends o.AnnotationEditor{constructor(p){super({...p,name:"freeTextEditor"});S(this,J);S(this,Q);S(this,wt);S(this,Nt);S(this,Pt);S(this,Ht);S(this,ie);S(this,L,this.editorDivBlur.bind(this));S(this,H,this.editorDivFocus.bind(this));S(this,V,this.editorDivInput.bind(this));S(this,X,this.editorDivKeydown.bind(this));S(this,$,void 0);S(this,D,"");S(this,Y,`${this.id}-editor`);S(this,C,void 0);S(this,B,null);W(this,$,p.color||Vt._defaultColor||o.AnnotationEditor._defaultLineColor),W(this,C,p.fontSize||Vt._defaultFontSize)}static get _keyboardManager(){const p=Vt.prototype,F=pt=>pt.isEmpty(),it=h.AnnotationEditorUIManager.TRANSLATE_SMALL,ht=h.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new h.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],p.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],p.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],p._translateEmpty,{args:[-it,0],checker:F}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p._translateEmpty,{args:[-ht,0],checker:F}],[["ArrowRight","mac+ArrowRight"],p._translateEmpty,{args:[it,0],checker:F}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p._translateEmpty,{args:[ht,0],checker:F}],[["ArrowUp","mac+ArrowUp"],p._translateEmpty,{args:[0,-it],checker:F}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p._translateEmpty,{args:[0,-ht],checker:F}],[["ArrowDown","mac+ArrowDown"],p._translateEmpty,{args:[0,it],checker:F}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p._translateEmpty,{args:[0,ht],checker:F}]]))}static initialize(p){o.AnnotationEditor.initialize(p,{strings:["pdfjs-free-text-default-content"]});const F=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(F.getPropertyValue("--freetext-padding"))}static updateDefaultParams(p,F){switch(p){case s.AnnotationEditorParamsType.FREETEXT_SIZE:Vt._defaultFontSize=F;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:Vt._defaultColor=F;break}}updateParams(p,F){switch(p){case s.AnnotationEditorParamsType.FREETEXT_SIZE:U(this,J,Rl).call(this,F);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:U(this,Q,Pl).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,Vt._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,Vt._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,i(this,C)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,i(this,$)]]}_translateEmpty(p,F){this._uiManager.translateSelectedEditors(p,F,!0)}getInitialTranslation(){const p=this.parentScale;return[-Vt._internalPadding*p,-(Vt._internalPadding+i(this,C))*p]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",i(this,X)),this.editorDiv.addEventListener("focus",i(this,H)),this.editorDiv.addEventListener("blur",i(this,L)),this.editorDiv.addEventListener("input",i(this,V)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",i(this,Y)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",i(this,X)),this.editorDiv.removeEventListener("focus",i(this,H)),this.editorDiv.removeEventListener("blur",i(this,L)),this.editorDiv.removeEventListener("input",i(this,V)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(p){this._focusEventsAllowed&&(super.focusin(p),p.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var p;if(this.width){U(this,ie,da).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(p=this._initialOptions)!=null&&p.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const p=i(this,D),F=W(this,D,U(this,wt,Ll).call(this).trimEnd());if(p===F)return;const it=ht=>{if(W(this,D,ht),!ht){this.remove();return}U(this,Pt,ca).call(this),this._uiManager.rebuild(this),U(this,Nt,tn).call(this)};this.addCommands({cmd:()=>{it(F)},undo:()=>{it(p)},mustExec:!1}),U(this,Nt,tn).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(p){this.enterInEditMode()}keydown(p){p.target===this.div&&p.key==="Enter"&&(this.enterInEditMode(),p.preventDefault())}editorDivKeydown(p){Vt._keyboardManager.exec(this,p)}editorDivFocus(p){this.isEditing=!0}editorDivBlur(p){this.isEditing=!1}editorDivInput(p){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let p,F;this.width&&(p=this.x,F=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",i(this,Y)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),o.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(ht=>{var pt;return(pt=this.editorDiv)==null?void 0:pt.setAttribute("default-content",ht)}),this.editorDiv.contentEditable=!0;const{style:it}=this.editorDiv;if(it.fontSize=`calc(${i(this,C)}px * var(--scale-factor))`,it.color=i(this,$),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,h.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ht,pt]=this.parentDimensions;if(this.annotationElementId){const{position:Rt}=i(this,B);let[Ut,_t]=this.getInitialTranslation();[Ut,_t]=this.pageTranslationToScreen(Ut,_t);const[zt,Xt]=this.pageDimensions,[ye,Ee]=this.pageTranslation;let Me,ke;switch(this.rotation){case 0:Me=p+(Rt[0]-ye)/zt,ke=F+this.height-(Rt[1]-Ee)/Xt;break;case 90:Me=p+(Rt[0]-ye)/zt,ke=F-(Rt[1]-Ee)/Xt,[Ut,_t]=[_t,-Ut];break;case 180:Me=p-this.width+(Rt[0]-ye)/zt,ke=F-(Rt[1]-Ee)/Xt,[Ut,_t]=[-Ut,-_t];break;case 270:Me=p+(Rt[0]-ye-this.height*Xt)/zt,ke=F+(Rt[1]-Ee-this.width*zt)/Xt,[Ut,_t]=[-_t,Ut];break}this.setAt(Me*ht,ke*pt,Ut,_t)}else this.setAt(p*ht,F*pt,this.width*ht,this.height*pt);U(this,Pt,ca).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(p,F,it){let ht=null;if(p instanceof m.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Rt,fontColor:Ut},rect:_t,rotation:zt,id:Xt},textContent:ye,textPosition:Ee,parent:{page:{pageNumber:Me}}}=p;if(!ye||ye.length===0)return null;ht=p={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(Ut),fontSize:Rt,value:ye.join(`
`),position:Ee,pageIndex:Me-1,rect:_t,rotation:zt,id:Xt,deleted:!1}}const pt=super.deserialize(p,F,it);return W(pt,C,p.fontSize),W(pt,$,s.Util.makeHexColor(...p.color)),W(pt,D,p.value),pt.annotationElementId=p.id||null,W(pt,B,ht),pt}serialize(p=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const F=Vt._internalPadding*this.parentScale,it=this.getRect(F,F),ht=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:i(this,$)),pt={annotationType:s.AnnotationEditorType.FREETEXT,color:ht,fontSize:i(this,C),value:i(this,D),pageIndex:this.pageIndex,rect:it,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return p?pt:this.annotationElementId&&!U(this,Ht,Fl).call(this,pt)?null:(pt.id=this.annotationElementId,pt)}};L=new WeakMap,H=new WeakMap,V=new WeakMap,X=new WeakMap,$=new WeakMap,D=new WeakMap,Y=new WeakMap,C=new WeakMap,B=new WeakMap,J=new WeakSet,Rl=function(p){const F=ht=>{this.editorDiv.style.fontSize=`calc(${ht}px * var(--scale-factor))`,this.translate(0,-(ht-i(this,C))*this.parentScale),W(this,C,ht),U(this,Nt,tn).call(this)},it=i(this,C);this.addCommands({cmd:()=>{F(p)},undo:()=>{F(it)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Q=new WeakSet,Pl=function(p){const F=i(this,$);this.addCommands({cmd:()=>{W(this,$,this.editorDiv.style.color=p)},undo:()=>{W(this,$,this.editorDiv.style.color=F)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},wt=new WeakSet,Ll=function(){const p=this.editorDiv.getElementsByTagName("div");if(p.length===0)return this.editorDiv.innerText;const F=[];for(const it of p)F.push(it.innerText.replace(/\r\n?|\n/,""));return F.join(`
`)},Nt=new WeakSet,tn=function(){const[p,F]=this.parentDimensions;let it;if(this.isAttachedToDOM)it=this.div.getBoundingClientRect();else{const{currentLayer:ht,div:pt}=this,Rt=pt.style.display;pt.style.display="hidden",ht.div.append(this.div),it=pt.getBoundingClientRect(),pt.remove(),pt.style.display=Rt}this.rotation%180===this.parentRotation%180?(this.width=it.width/p,this.height=it.height/F):(this.width=it.height/p,this.height=it.width/F),this.fixAndSetPosition()},Pt=new WeakSet,ca=function(){if(this.editorDiv.replaceChildren(),!!i(this,D))for(const p of i(this,D).split(`
`)){const F=document.createElement("div");F.append(p?document.createTextNode(p):document.createElement("br")),this.editorDiv.append(F)}},Ht=new WeakSet,Fl=function(p){const{value:F,fontSize:it,color:ht,rect:pt,pageIndex:Rt}=i(this,B);return p.value!==F||p.fontSize!==it||p.rect.some((Ut,_t)=>Math.abs(Ut-pt[_t])>=1)||p.color.some((Ut,_t)=>Ut!==ht[_t])||p.pageIndex!==Rt},ie=new WeakSet,da=function(p=!1){if(!this.annotationElementId)return;if(U(this,Nt,tn).call(this),!p&&(this.width===0||this.height===0)){setTimeout(()=>U(this,ie,da).call(this,!0),0);return}const F=Vt._internalPadding*this.parentScale;i(this,B).rect=this.getRect(F,F)},we(Vt,"_freeTextDefaultContent",""),we(Vt,"_internalPadding",0),we(Vt,"_defaultColor",null),we(Vt,"_defaultFontSize",10),we(Vt,"_type","freetext"),we(Vt,"_editorType",s.AnnotationEditorType.FREETEXT);let k=Vt;var w=n(97),T=n(405);const et=class et extends o.AnnotationEditor{constructor(p){var F;super({...p,name:"highlightEditor"});S(this,z);S(this,a);S(this,u);S(this,A);S(this,c);S(this,M);S(this,ne,void 0);S(this,$t,null);S(this,ce,null);S(this,Zt,null);S(this,oe,null);S(this,qt,null);S(this,Ae,null);S(this,pe,null);S(this,se,void 0);S(this,le,null);et._defaultColor||(et._defaultColor=((F=this._uiManager.highlightColors)==null?void 0:F.values().next().value)||"#fff066"),this.color=p.color||et._defaultColor,W(this,se,p.opacity||et._defaultOpacity),W(this,ne,p.boxes||null),this._isDraggable=!1,U(this,z,ua).call(this),U(this,A,Qn).call(this),this.rotate(this.rotation)}static initialize(p){o.AnnotationEditor.initialize(p)}static updateDefaultParams(p,F){switch(p){case s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:et._defaultColor=F;break}}get toolbarPosition(){return i(this,pe)}updateParams(p,F){switch(p){case s.AnnotationEditorParamsType.HIGHLIGHT_COLOR:U(this,a,Il).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,et._defaultColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||et._defaultColor]]}async addEditToolbar(){const p=await super.addEditToolbar();return p?(this._uiManager.highlightColors&&(W(this,ce,new w.ColorPicker({editor:this})),p.addColorPicker(i(this,ce))),p):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(p,F){return super.getRect(p,F,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),U(this,u,pa).call(this)}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(U(this,A,Qn).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(p){var it;let F=!1;this.parent&&!p?U(this,u,pa).call(this):p&&(U(this,A,Qn).call(this,p),F=!this.parent&&((it=this.div)==null?void 0:it.classList.contains("selectedEditor"))),super.setParent(p),F&&this.select()}rotate(p){var it,ht;const{drawLayer:F}=this.parent;F.rotate(i(this,Ae),p),F.rotate(i(this,le),p),F.updateBox(i(this,Ae),U(it=et,f,fa).call(it,this,p)),F.updateBox(i(this,le),U(ht=et,f,fa).call(ht,i(this,Zt).box,p))}render(){if(this.div)return this.div;const p=super.render(),F=W(this,oe,document.createElement("div"));p.append(F),F.className="internal",F.style.clipPath=i(this,$t);const[it,ht]=this.parentDimensions;return this.setDims(this.width*it,this.height*ht),(0,h.bindEvents)(this,i(this,oe),["pointerover","pointerleave"]),this.enableEditing(),p}pointerover(){this.parent.drawLayer.addClass(i(this,le),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(i(this,le),"hovered")}select(){var p,F;super.select(),(p=this.parent)==null||p.drawLayer.removeClass(i(this,le),"hovered"),(F=this.parent)==null||F.drawLayer.addClass(i(this,le),"selected")}unselect(){var p;super.unselect(),(p=this.parent)==null||p.drawLayer.removeClass(i(this,le),"selected")}static deserialize(p,F,it){var ye;const ht=super.deserialize(p,F,it),{rect:pt,color:Rt,quadPoints:Ut}=p;ht.color=s.Util.makeHexColor(...Rt),W(ht,se,p.opacity);const[_t,zt]=ht.pageDimensions;ht.width=(pt[2]-pt[0])/_t,ht.height=(pt[3]-pt[1])/zt;const Xt=W(ht,ne,[]);for(let Ee=0;Ee<Ut.length;Ee+=8)Xt.push({x:Ut[4]/_t,y:1-Ut[Ee+5]/zt,width:(Ut[Ee+2]-Ut[Ee])/_t,height:(Ut[Ee+5]-Ut[Ee+1])/zt});return U(ye=ht,z,ua).call(ye),ht}serialize(p=!1){if(this.isEmpty()||p)return null;const F=this.getRect(0,0),it=o.AnnotationEditor._colorManager.convert(this.color);return{annotationType:s.AnnotationEditorType.HIGHLIGHT,color:it,opacity:i(this,se),quadPoints:U(this,c,Dl).call(this),outlines:U(this,M,Ol).call(this),pageIndex:this.pageIndex,rect:F,rotation:0,structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};ne=new WeakMap,$t=new WeakMap,ce=new WeakMap,Zt=new WeakMap,oe=new WeakMap,qt=new WeakMap,Ae=new WeakMap,pe=new WeakMap,se=new WeakMap,le=new WeakMap,z=new WeakSet,ua=function(){const p=new T.Outliner(i(this,ne),.001);W(this,qt,p.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=i(this,qt).box;const F=new T.Outliner(i(this,ne),.0025,.001,this._uiManager.direction==="ltr");W(this,Zt,F.getOutlines());const{lastPoint:it}=i(this,Zt).box;W(this,pe,[(it[0]-this.x)/this.width,(it[1]-this.y)/this.height])},a=new WeakSet,Il=function(p){const F=this.color;this.addCommands({cmd:()=>{var it;this.color=p,this.parent.drawLayer.changeColor(i(this,Ae),p),(it=i(this,ce))==null||it.updateColor(p)},undo:()=>{var it;this.color=F,this.parent.drawLayer.changeColor(i(this,Ae),F),(it=i(this,ce))==null||it.updateColor(F)},mustExec:!0,type:s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},u=new WeakSet,pa=function(){i(this,Ae)===null||!this.parent||(this.parent.drawLayer.remove(i(this,Ae)),W(this,Ae,null),this.parent.drawLayer.remove(i(this,le)),W(this,le,null))},A=new WeakSet,Qn=function(p=this.parent){i(this,Ae)===null&&({id:Es(this,Ae)._,clipPathId:Es(this,$t)._}=p.drawLayer.highlight(i(this,qt),this.color,i(this,se)),i(this,oe)&&(i(this,oe).style.clipPath=i(this,$t)),W(this,le,p.drawLayer.highlightOutline(i(this,Zt))))},f=new WeakSet,fa=function({x:p,y:F,width:it,height:ht},pt){switch(pt){case 90:return{x:1-F-ht,y:p,width:ht,height:it};case 180:return{x:1-p-it,y:1-F-ht,width:it,height:ht};case 270:return{x:F,y:1-p-it,width:ht,height:it}}return{x:p,y:F,width:it,height:ht}},c=new WeakSet,Dl=function(){const[p,F]=this.pageDimensions,it=i(this,ne),ht=new Array(it.length*8);let pt=0;for(const{x:Rt,y:Ut,width:_t,height:zt}of it){const Xt=Rt*p,ye=(1-Ut-zt)*F;ht[pt]=ht[pt+4]=Xt,ht[pt+1]=ht[pt+3]=ye,ht[pt+2]=ht[pt+6]=Xt+_t*p,ht[pt+5]=ht[pt+7]=ye+zt*F,pt+=8}return ht},M=new WeakSet,Ol=function(){const[p,F]=this.pageDimensions,it=this.width*p,ht=this.height*F,pt=this.x*p,Rt=(1-this.y-this.height)*F,Ut=[];for(const _t of i(this,qt).outlines){const zt=new Array(_t.length);for(let Xt=0;Xt<_t.length;Xt+=2)zt[Xt]=pt+_t[Xt]*it,zt[Xt+1]=Rt+(1-_t[Xt+1])*ht;Ut.push(zt)}return Ut},S(et,f),we(et,"_defaultColor",null),we(et,"_defaultOpacity",1),we(et,"_l10nPromise"),we(et,"_type","highlight"),we(et,"_editorType",s.AnnotationEditorType.HIGHLIGHT);let _=et;var I=n(473);const Fe=class Fe extends o.AnnotationEditor{constructor(p){super({...p,name:"inkEditor"});S(this,It);S(this,Kt);S(this,Qt);S(this,j);S(this,At);S(this,Ot);S(this,E);S(this,v);S(this,q);S(this,at);S(this,kt);S(this,Wt);S(this,Lt);S(this,Gt);S(this,ge);S(this,Re);S(this,De);S(this,Ke);S(this,Qe);S(this,Nn);S(this,Bi);S(this,di);S(this,Fs);S(this,rt,0);S(this,vt,0);S(this,ft,this.canvasPointermove.bind(this));S(this,bt,this.canvasPointerleave.bind(this));S(this,Tt,this.canvasPointerup.bind(this));S(this,St,this.canvasPointerdown.bind(this));S(this,xt,null);S(this,Dt,new Path2D);S(this,nt,!1);S(this,P,!1);S(this,K,!1);S(this,tt,null);S(this,ct,0);S(this,gt,0);S(this,Et,null);this.color=p.color||null,this.thickness=p.thickness||null,this.opacity=p.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(p){o.AnnotationEditor.initialize(p)}static updateDefaultParams(p,F){switch(p){case s.AnnotationEditorParamsType.INK_THICKNESS:Fe._defaultThickness=F;break;case s.AnnotationEditorParamsType.INK_COLOR:Fe._defaultColor=F;break;case s.AnnotationEditorParamsType.INK_OPACITY:Fe._defaultOpacity=F/100;break}}updateParams(p,F){switch(p){case s.AnnotationEditorParamsType.INK_THICKNESS:U(this,It,Nl).call(this,F);break;case s.AnnotationEditorParamsType.INK_COLOR:U(this,Kt,Bl).call(this,F);break;case s.AnnotationEditorParamsType.INK_OPACITY:U(this,Qt,Ul).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,Fe._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,Fe._defaultColor||o.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(Fe._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Fe._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||Fe._defaultColor||o.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Fe._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(U(this,ge,Jn).call(this),U(this,Re,Zn).call(this)),this.isAttachedToDOM||(this.parent.add(this),U(this,De,_i).call(this)),U(this,Fs,wi).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,i(this,xt)&&(clearTimeout(i(this,xt)),W(this,xt,null)),i(this,tt).disconnect(),W(this,tt,null),super.remove())}setParent(p){!this.parent&&p?this._uiManager.removeShouldRescale(this):this.parent&&p===null&&this._uiManager.addShouldRescale(this),super.setParent(p)}onScaleChanging(){const[p,F]=this.parentDimensions,it=this.width*p,ht=this.height*F;this.setDimensions(it,ht)}enableEditMode(){i(this,nt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",i(this,St)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",i(this,St)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){i(this,nt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),W(this,nt,!0),this.div.classList.add("disabled"),U(this,Fs,wi).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(p){this._focusEventsAllowed&&(super.focusin(p),this.enableEditMode())}canvasPointerdown(p){p.button!==0||!this.isInEditMode()||i(this,nt)||(this.setInForeground(),p.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),U(this,Ot,Vl).call(this,p.offsetX,p.offsetY))}canvasPointermove(p){p.preventDefault(),U(this,E,ma).call(this,p.offsetX,p.offsetY)}canvasPointerup(p){p.preventDefault(),U(this,Gt,va).call(this,p)}canvasPointerleave(p){U(this,Gt,va).call(this,p)}get isResizable(){return!this.isEmpty()&&i(this,nt)}render(){if(this.div)return this.div;let p,F;this.width&&(p=this.x,F=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[it,ht,pt,Rt]=U(this,j,jl).call(this);if(this.setAt(it,ht,0,0),this.setDims(pt,Rt),U(this,ge,Jn).call(this),this.width){const[Ut,_t]=this.parentDimensions;this.setAspectRatio(this.width*Ut,this.height*_t),this.setAt(p*Ut,F*_t,this.width*Ut,this.height*_t),W(this,K,!0),U(this,De,_i).call(this),this.setDims(this.width*Ut,this.height*_t),U(this,Lt,xs).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return U(this,Re,Zn).call(this),this.div}setDimensions(p,F){const it=Math.round(p),ht=Math.round(F);if(i(this,ct)===it&&i(this,gt)===ht)return;W(this,ct,it),W(this,gt,ht),this.canvas.style.visibility="hidden";const[pt,Rt]=this.parentDimensions;this.width=p/pt,this.height=F/Rt,this.fixAndSetPosition(),i(this,nt)&&U(this,Ke,ba).call(this,p,F),U(this,De,_i).call(this),U(this,Lt,xs).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(p,F,it){var ti,ps,fs;if(p instanceof m.InkAnnotationElement)return null;const ht=super.deserialize(p,F,it);ht.thickness=p.thickness,ht.color=s.Util.makeHexColor(...p.color),ht.opacity=p.opacity;const[pt,Rt]=ht.pageDimensions,Ut=ht.width*pt,_t=ht.height*Rt,zt=ht.parentScale,Xt=p.thickness/2;W(ht,nt,!0),W(ht,ct,Math.round(Ut)),W(ht,gt,Math.round(_t));const{paths:ye,rect:Ee,rotation:Me}=p;for(let{bezier:He}of ye){He=U(ti=Fe,On,Xl).call(ti,He,Ee,Me);const Bs=[];ht.paths.push(Bs);let Ki=zt*(He[0]-Xt),Qi=zt*(He[1]-Xt);for(let os=2,Kr=He.length;os<Kr;os+=6){const Qr=zt*(He[os]-Xt),Hn=zt*(He[os+1]-Xt),qn=zt*(He[os+2]-Xt),ou=zt*(He[os+3]-Xt),El=zt*(He[os+4]-Xt),xl=zt*(He[os+5]-Xt);Bs.push([[Ki,Qi],[Qr,Hn],[qn,ou],[El,xl]]),Ki=El,Qi=xl}const zn=U(this,ve,Gl).call(this,Bs);ht.bezierPath2D.push(zn)}const ke=U(ps=ht,Bi,ya).call(ps);return W(ht,vt,Math.max(o.AnnotationEditor.MIN_SIZE,ke[2]-ke[0])),W(ht,rt,Math.max(o.AnnotationEditor.MIN_SIZE,ke[3]-ke[1])),U(fs=ht,Ke,ba).call(fs,Ut,_t),ht}serialize(){if(this.isEmpty())return null;const p=this.getRect(0,0),F=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:F,thickness:this.thickness,opacity:this.opacity,paths:U(this,Nn,Yl).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,p),pageIndex:this.pageIndex,rect:p,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};rt=new WeakMap,vt=new WeakMap,ft=new WeakMap,bt=new WeakMap,Tt=new WeakMap,St=new WeakMap,xt=new WeakMap,Dt=new WeakMap,nt=new WeakMap,P=new WeakMap,K=new WeakMap,tt=new WeakMap,ct=new WeakMap,gt=new WeakMap,Et=new WeakMap,It=new WeakSet,Nl=function(p){const F=this.thickness;this.addCommands({cmd:()=>{this.thickness=p,U(this,Fs,wi).call(this)},undo:()=>{this.thickness=F,U(this,Fs,wi).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Kt=new WeakSet,Bl=function(p){const F=this.color;this.addCommands({cmd:()=>{this.color=p,U(this,Lt,xs).call(this)},undo:()=>{this.color=F,U(this,Lt,xs).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Qt=new WeakSet,Ul=function(p){p/=100;const F=this.opacity;this.addCommands({cmd:()=>{this.opacity=p,U(this,Lt,xs).call(this)},undo:()=>{this.opacity=F,U(this,Lt,xs).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},j=new WeakSet,jl=function(){const{parentRotation:p,parentDimensions:[F,it]}=this;switch(p){case 90:return[0,it,it,F];case 180:return[F,it,F,it];case 270:return[F,0,it,F];default:return[0,0,F,it]}},At=new WeakSet,ga=function(){const{ctx:p,color:F,opacity:it,thickness:ht,parentScale:pt,scaleFactor:Rt}=this;p.lineWidth=ht*pt/Rt,p.lineCap="round",p.lineJoin="round",p.miterLimit=10,p.strokeStyle=`${F}${(0,h.opacityToHex)(it)}`},Ot=new WeakSet,Vl=function(p,F){this.canvas.addEventListener("contextmenu",I.noContextMenu),this.canvas.addEventListener("pointerleave",i(this,bt)),this.canvas.addEventListener("pointermove",i(this,ft)),this.canvas.addEventListener("pointerup",i(this,Tt)),this.canvas.removeEventListener("pointerdown",i(this,St)),this.isEditing=!0,i(this,K)||(W(this,K,!0),U(this,De,_i).call(this),this.thickness||(this.thickness=Fe._defaultThickness),this.color||(this.color=Fe._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Fe._defaultOpacity)),this.currentPath.push([p,F]),W(this,P,!1),U(this,At,ga).call(this),W(this,Et,()=>{U(this,at,ql).call(this),i(this,Et)&&window.requestAnimationFrame(i(this,Et))}),window.requestAnimationFrame(i(this,Et))},E=new WeakSet,ma=function(p,F){const[it,ht]=this.currentPath.at(-1);if(this.currentPath.length>1&&p===it&&F===ht)return;const pt=this.currentPath;let Rt=i(this,Dt);if(pt.push([p,F]),W(this,P,!0),pt.length<=2){Rt.moveTo(...pt[0]),Rt.lineTo(p,F);return}pt.length===3&&(W(this,Dt,Rt=new Path2D),Rt.moveTo(...pt[0])),U(this,kt,Wl).call(this,Rt,...pt.at(-3),...pt.at(-2),p,F)},v=new WeakSet,zl=function(){if(this.currentPath.length===0)return;const p=this.currentPath.at(-1);i(this,Dt).lineTo(...p)},q=new WeakSet,Hl=function(p,F){W(this,Et,null),p=Math.min(Math.max(p,0),this.canvas.width),F=Math.min(Math.max(F,0),this.canvas.height),U(this,E,ma).call(this,p,F),U(this,v,zl).call(this);let it;if(this.currentPath.length!==1)it=U(this,Wt,$l).call(this);else{const _t=[p,F];it=[[_t,_t.slice(),_t.slice(),_t]]}const ht=i(this,Dt),pt=this.currentPath;this.currentPath=[],W(this,Dt,new Path2D);const Rt=()=>{this.allRawPaths.push(pt),this.paths.push(it),this.bezierPath2D.push(ht),this.rebuild()},Ut=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(U(this,ge,Jn).call(this),U(this,Re,Zn).call(this)),U(this,Fs,wi).call(this))};this.addCommands({cmd:Rt,undo:Ut,mustExec:!0})},at=new WeakSet,ql=function(){if(!i(this,P))return;W(this,P,!1);const p=Math.ceil(this.thickness*this.parentScale),F=this.currentPath.slice(-3),it=F.map(Rt=>Rt[0]),ht=F.map(Rt=>Rt[1]);Math.min(...it)-p,Math.max(...it)+p,Math.min(...ht)-p,Math.max(...ht)+p;const{ctx:pt}=this;pt.save(),pt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Rt of this.bezierPath2D)pt.stroke(Rt);pt.stroke(i(this,Dt)),pt.restore()},kt=new WeakSet,Wl=function(p,F,it,ht,pt,Rt,Ut){const _t=(F+ht)/2,zt=(it+pt)/2,Xt=(ht+Rt)/2,ye=(pt+Ut)/2;p.bezierCurveTo(_t+2*(ht-_t)/3,zt+2*(pt-zt)/3,Xt+2*(ht-Xt)/3,ye+2*(pt-ye)/3,Xt,ye)},Wt=new WeakSet,$l=function(){const p=this.currentPath;if(p.length<=2)return[[p[0],p[0],p.at(-1),p.at(-1)]];const F=[];let it,[ht,pt]=p[0];for(it=1;it<p.length-2;it++){const[Ee,Me]=p[it],[ke,ti]=p[it+1],ps=(Ee+ke)/2,fs=(Me+ti)/2,He=[ht+2*(Ee-ht)/3,pt+2*(Me-pt)/3],Bs=[ps+2*(Ee-ps)/3,fs+2*(Me-fs)/3];F.push([[ht,pt],He,Bs,[ps,fs]]),[ht,pt]=[ps,fs]}const[Rt,Ut]=p[it],[_t,zt]=p[it+1],Xt=[ht+2*(Rt-ht)/3,pt+2*(Ut-pt)/3],ye=[_t+2*(Rt-_t)/3,zt+2*(Ut-zt)/3];return F.push([[ht,pt],Xt,ye,[_t,zt]]),F},Lt=new WeakSet,xs=function(){if(this.isEmpty()){U(this,Qe,tr).call(this);return}U(this,At,ga).call(this);const{canvas:p,ctx:F}=this;F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,p.width,p.height),U(this,Qe,tr).call(this);for(const it of this.bezierPath2D)F.stroke(it)},Gt=new WeakSet,va=function(p){this.canvas.removeEventListener("pointerleave",i(this,bt)),this.canvas.removeEventListener("pointermove",i(this,ft)),this.canvas.removeEventListener("pointerup",i(this,Tt)),this.canvas.addEventListener("pointerdown",i(this,St)),i(this,xt)&&clearTimeout(i(this,xt)),W(this,xt,setTimeout(()=>{W(this,xt,null),this.canvas.removeEventListener("contextmenu",I.noContextMenu)},10)),U(this,q,Hl).call(this,p.offsetX,p.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ge=new WeakSet,Jn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Re=new WeakSet,Zn=function(){W(this,tt,new ResizeObserver(p=>{const F=p[0].contentRect;F.width&&F.height&&this.setDimensions(F.width,F.height)})),i(this,tt).observe(this.div)},De=new WeakSet,_i=function(){if(!i(this,K))return;const[p,F]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*p),this.canvas.height=Math.ceil(this.height*F),U(this,Qe,tr).call(this)},Ke=new WeakSet,ba=function(p,F){const it=U(this,di,er).call(this),ht=(p-it)/i(this,vt),pt=(F-it)/i(this,rt);this.scaleFactor=Math.min(ht,pt)},Qe=new WeakSet,tr=function(){const p=U(this,di,er).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+p,this.translationY*this.scaleFactor+p)},ve=new WeakSet,Gl=function(p){const F=new Path2D;for(let it=0,ht=p.length;it<ht;it++){const[pt,Rt,Ut,_t]=p[it];it===0&&F.moveTo(...pt),F.bezierCurveTo(Rt[0],Rt[1],Ut[0],Ut[1],_t[0],_t[1])}return F},Ni=new WeakSet,Aa=function(p,F,it){const[ht,pt,Rt,Ut]=F;switch(it){case 0:for(let _t=0,zt=p.length;_t<zt;_t+=2)p[_t]+=ht,p[_t+1]=Ut-p[_t+1];break;case 90:for(let _t=0,zt=p.length;_t<zt;_t+=2){const Xt=p[_t];p[_t]=p[_t+1]+ht,p[_t+1]=Xt+pt}break;case 180:for(let _t=0,zt=p.length;_t<zt;_t+=2)p[_t]=Rt-p[_t],p[_t+1]+=pt;break;case 270:for(let _t=0,zt=p.length;_t<zt;_t+=2){const Xt=p[_t];p[_t]=Rt-p[_t+1],p[_t+1]=Ut-Xt}break;default:throw new Error("Invalid rotation")}return p},On=new WeakSet,Xl=function(p,F,it){const[ht,pt,Rt,Ut]=F;switch(it){case 0:for(let _t=0,zt=p.length;_t<zt;_t+=2)p[_t]-=ht,p[_t+1]=Ut-p[_t+1];break;case 90:for(let _t=0,zt=p.length;_t<zt;_t+=2){const Xt=p[_t];p[_t]=p[_t+1]-pt,p[_t+1]=Xt-ht}break;case 180:for(let _t=0,zt=p.length;_t<zt;_t+=2)p[_t]=Rt-p[_t],p[_t+1]-=pt;break;case 270:for(let _t=0,zt=p.length;_t<zt;_t+=2){const Xt=p[_t];p[_t]=Ut-p[_t+1],p[_t+1]=Rt-Xt}break;default:throw new Error("Invalid rotation")}return p},Nn=new WeakSet,Yl=function(p,F,it,ht){var zt,Xt;const pt=[],Rt=this.thickness/2,Ut=p*F+Rt,_t=p*it+Rt;for(const ye of this.paths){const Ee=[],Me=[];for(let ke=0,ti=ye.length;ke<ti;ke++){const[ps,fs,He,Bs]=ye[ke],Ki=p*ps[0]+Ut,Qi=p*ps[1]+_t,zn=p*fs[0]+Ut,os=p*fs[1]+_t,Kr=p*He[0]+Ut,Qr=p*He[1]+_t,Hn=p*Bs[0]+Ut,qn=p*Bs[1]+_t;ke===0&&(Ee.push(Ki,Qi),Me.push(Ki,Qi)),Ee.push(zn,os,Kr,Qr,Hn,qn),Me.push(zn,os),ke===ti-1&&Me.push(Hn,qn)}pt.push({bezier:U(zt=Fe,Ni,Aa).call(zt,Ee,ht,this.rotation),points:U(Xt=Fe,Ni,Aa).call(Xt,Me,ht,this.rotation)})}return pt},Bi=new WeakSet,ya=function(){let p=1/0,F=-1/0,it=1/0,ht=-1/0;for(const pt of this.paths)for(const[Rt,Ut,_t,zt]of pt){const Xt=s.Util.bezierBoundingBox(...Rt,...Ut,..._t,...zt);p=Math.min(p,Xt[0]),it=Math.min(it,Xt[1]),F=Math.max(F,Xt[2]),ht=Math.max(ht,Xt[3])}return[p,it,F,ht]},di=new WeakSet,er=function(){return i(this,nt)?Math.ceil(this.thickness*this.parentScale):0},Fs=new WeakSet,wi=function(p=!1){if(this.isEmpty())return;if(!i(this,nt)){U(this,Lt,xs).call(this);return}const F=U(this,Bi,ya).call(this),it=U(this,di,er).call(this);W(this,vt,Math.max(o.AnnotationEditor.MIN_SIZE,F[2]-F[0])),W(this,rt,Math.max(o.AnnotationEditor.MIN_SIZE,F[3]-F[1]));const ht=Math.ceil(it+i(this,vt)*this.scaleFactor),pt=Math.ceil(it+i(this,rt)*this.scaleFactor),[Rt,Ut]=this.parentDimensions;this.width=ht/Rt,this.height=pt/Ut,this.setAspectRatio(ht,pt);const _t=this.translationX,zt=this.translationY;this.translationX=-F[0],this.translationY=-F[1],U(this,De,_i).call(this),U(this,Lt,xs).call(this),W(this,ct,ht),W(this,gt,pt),this.setDims(ht,pt);const Xt=p?it/this.scaleFactor/2:0;this.translate(_t-this.translationX-Xt,zt-this.translationY-Xt)},S(Fe,ve),S(Fe,Ni),S(Fe,On),we(Fe,"_defaultColor",null),we(Fe,"_defaultOpacity",1),we(Fe,"_defaultThickness",1),we(Fe,"_type","ink"),we(Fe,"_editorType",s.AnnotationEditorType.INK);let N=Fe;const zi=class zi extends o.AnnotationEditor{constructor(p){super({...p,name:"stampEditor"});S(this,Ks);S(this,Qs);S(this,pi);S(this,ji);S(this,Bn);S(this,Un);S(this,Vi);S(this,fi);S(this,jn);S(this,Ue,null);S(this,ze,null);S(this,Is,null);S(this,bs,null);S(this,Ds,null);S(this,ui,"");S(this,As,null);S(this,Ys,null);S(this,us,null);S(this,rs,!1);S(this,Ui,!1);W(this,bs,p.bitmapUrl),W(this,Ds,p.bitmapFile)}static initialize(p){o.AnnotationEditor.initialize(p)}static get supportedTypes(){const p=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",p.map(F=>`image/${F}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(p){return this.supportedTypes.includes(p)}static paste(p,F){F.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:p.getAsFile()})}remove(){var p,F;i(this,ze)&&(W(this,Ue,null),this._uiManager.imageManager.deleteId(i(this,ze)),(p=i(this,As))==null||p.remove(),W(this,As,null),(F=i(this,Ys))==null||F.disconnect(),W(this,Ys,null),i(this,us)&&(clearTimeout(i(this,us)),W(this,us,null))),super.remove()}rebuild(){if(!this.parent){i(this,ze)&&U(this,pi,sr).call(this);return}super.rebuild(),this.div!==null&&(i(this,ze)&&U(this,pi,sr).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(i(this,Is)||i(this,Ue)||i(this,bs)||i(this,Ds))}get isResizable(){return!0}render(){if(this.div)return this.div;let p,F;if(this.width&&(p=this.x,F=this.y),super.render(),this.div.hidden=!0,i(this,Ue)?U(this,ji,_a).call(this):U(this,pi,sr).call(this),this.width){const[it,ht]=this.parentDimensions;this.setAt(p*it,F*ht,this.width*it,this.height*ht)}return this.div}getImageForAltText(){return i(this,As)}static deserialize(p,F,it){if(p instanceof m.StampAnnotationElement)return null;const ht=super.deserialize(p,F,it),{rect:pt,bitmapUrl:Rt,bitmapId:Ut,isSvg:_t,accessibilityData:zt}=p;Ut&&it.imageManager.isValidId(Ut)?W(ht,ze,Ut):W(ht,bs,Rt),W(ht,rs,_t);const[Xt,ye]=ht.pageDimensions;return ht.width=(pt[2]-pt[0])/Xt,ht.height=(pt[3]-pt[1])/ye,zt&&(ht.altTextData=zt),ht}serialize(p=!1,F=null){if(this.isEmpty())return null;const it={annotationType:s.AnnotationEditorType.STAMP,bitmapId:i(this,ze),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:i(this,rs),structTreeParentId:this._structTreeParentId};if(p)return it.bitmapUrl=U(this,fi,ir).call(this,!0),it.accessibilityData=this.altTextData,it;const{decorative:ht,altText:pt}=this.altTextData;if(!ht&&pt&&(it.accessibilityData={type:"Figure",alt:pt}),F===null)return it;F.stamps||(F.stamps=new Map);const Rt=i(this,rs)?(it.rect[2]-it.rect[0])*(it.rect[3]-it.rect[1]):null;if(!F.stamps.has(i(this,ze)))F.stamps.set(i(this,ze),{area:Rt,serialized:it}),it.bitmap=U(this,fi,ir).call(this,!1);else if(i(this,rs)){const Ut=F.stamps.get(i(this,ze));Rt>Ut.area&&(Ut.area=Rt,Ut.serialized.bitmap.close(),Ut.serialized.bitmap=U(this,fi,ir).call(this,!1))}return it}};Ue=new WeakMap,ze=new WeakMap,Is=new WeakMap,bs=new WeakMap,Ds=new WeakMap,ui=new WeakMap,As=new WeakMap,Ys=new WeakMap,us=new WeakMap,rs=new WeakMap,Ui=new WeakMap,Ks=new WeakSet,en=function(p,F=!1){if(!p){this.remove();return}W(this,Ue,p.bitmap),F||(W(this,ze,p.id),W(this,rs,p.isSvg)),p.file&&W(this,ui,p.file.name),U(this,ji,_a).call(this)},Qs=new WeakSet,sn=function(){W(this,Is,null),this._uiManager.enableWaiting(!1),i(this,As)&&this.div.focus()},pi=new WeakSet,sr=function(){if(i(this,ze)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(i(this,ze)).then(F=>U(this,Ks,en).call(this,F,!0)).finally(()=>U(this,Qs,sn).call(this));return}if(i(this,bs)){const F=i(this,bs);W(this,bs,null),this._uiManager.enableWaiting(!0),W(this,Is,this._uiManager.imageManager.getFromUrl(F).then(it=>U(this,Ks,en).call(this,it)).finally(()=>U(this,Qs,sn).call(this)));return}if(i(this,Ds)){const F=i(this,Ds);W(this,Ds,null),this._uiManager.enableWaiting(!0),W(this,Is,this._uiManager.imageManager.getFromFile(F).then(it=>U(this,Ks,en).call(this,it)).finally(()=>U(this,Qs,sn).call(this)));return}const p=document.createElement("input");p.type="file",p.accept=zi.supportedTypesStr,W(this,Is,new Promise(F=>{p.addEventListener("change",async()=>{if(!p.files||p.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const it=await this._uiManager.imageManager.getFromFile(p.files[0]);U(this,Ks,en).call(this,it)}F()}),p.addEventListener("cancel",()=>{this.remove(),F()})}).finally(()=>U(this,Qs,sn).call(this))),p.click()},ji=new WeakSet,_a=function(){const{div:p}=this;let{width:F,height:it}=i(this,Ue);const[ht,pt]=this.pageDimensions,Rt=.75;if(this.width)F=this.width*ht,it=this.height*pt;else if(F>Rt*ht||it>Rt*pt){const Xt=Math.min(Rt*ht/F,Rt*pt/it);F*=Xt,it*=Xt}const[Ut,_t]=this.parentDimensions;this.setDims(F*Ut/ht,it*_t/pt),this._uiManager.enableWaiting(!1);const zt=W(this,As,document.createElement("canvas"));p.append(zt),p.hidden=!1,U(this,Vi,wa).call(this,F,it),U(this,jn,Jl).call(this),i(this,Ui)||(this.parent.addUndoableEditor(this),W(this,Ui,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),i(this,ui)&&zt.setAttribute("aria-label",i(this,ui))},Bn=new WeakSet,Kl=function(p,F){var Rt;const[it,ht]=this.parentDimensions;this.width=p/it,this.height=F/ht,this.setDims(p,F),(Rt=this._initialOptions)!=null&&Rt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,i(this,us)!==null&&clearTimeout(i(this,us)),W(this,us,setTimeout(()=>{W(this,us,null),U(this,Vi,wa).call(this,p,F)},200))},Un=new WeakSet,Ql=function(p,F){const{width:it,height:ht}=i(this,Ue);let pt=it,Rt=ht,Ut=i(this,Ue);for(;pt>2*p||Rt>2*F;){const _t=pt,zt=Rt;pt>2*p&&(pt=pt>=16384?Math.floor(pt/2)-1:Math.ceil(pt/2)),Rt>2*F&&(Rt=Rt>=16384?Math.floor(Rt/2)-1:Math.ceil(Rt/2));const Xt=new OffscreenCanvas(pt,Rt);Xt.getContext("2d").drawImage(Ut,0,0,_t,zt,0,0,pt,Rt),Ut=Xt.transferToImageBitmap()}return Ut},Vi=new WeakSet,wa=function(p,F){p=Math.ceil(p),F=Math.ceil(F);const it=i(this,As);if(!it||it.width===p&&it.height===F)return;it.width=p,it.height=F;const ht=i(this,rs)?i(this,Ue):U(this,Un,Ql).call(this,p,F),pt=it.getContext("2d");pt.filter=this._uiManager.hcmFilter,pt.drawImage(ht,0,0,ht.width,ht.height,0,0,p,F)},fi=new WeakSet,ir=function(p){if(p){if(i(this,rs)){const it=this._uiManager.imageManager.getSvgUrl(i(this,ze));if(it)return it}const F=document.createElement("canvas");return{width:F.width,height:F.height}=i(this,Ue),F.getContext("2d").drawImage(i(this,Ue),0,0),F.toDataURL()}if(i(this,rs)){const[F,it]=this.pageDimensions,ht=Math.round(this.width*F*I.PixelsPerInch.PDF_TO_CSS_UNITS),pt=Math.round(this.height*it*I.PixelsPerInch.PDF_TO_CSS_UNITS),Rt=new OffscreenCanvas(ht,pt);return Rt.getContext("2d").drawImage(i(this,Ue),0,0,i(this,Ue).width,i(this,Ue).height,0,0,ht,pt),Rt.transferToImageBitmap()}return structuredClone(i(this,Ue))},jn=new WeakSet,Jl=function(){W(this,Ys,new ResizeObserver(p=>{const F=p[0].contentRect;F.width&&F.height&&U(this,Bn,Kl).call(this,F.width,F.height)})),i(this,Ys).observe(this.div)},we(zi,"_type","stamp"),we(zi,"_editorType",s.AnnotationEditorType.STAMP);let R=zi;const as=class as{constructor({uiManager:dt,pageIndex:p,div:F,accessibilityManager:it,annotationLayer:ht,drawLayer:pt,textLayer:Rt,viewport:Ut,l10n:_t}){S(this,$i);S(this,Gi);S(this,Zs);S(this,Xi);S(this,Yi);S(this,Js,void 0);S(this,gi,!1);S(this,ys,null);S(this,Hi,this.pointerup.bind(this));S(this,Vn,this.pointerUpAfterSelection.bind(this));S(this,qi,this.pointerdown.bind(this));S(this,_s,null);S(this,Wi,this.selectionStart.bind(this));S(this,Je,new Map);S(this,Os,!1);S(this,mi,!1);S(this,vi,!1);S(this,ws,null);S(this,me,void 0);const zt=[...i(as,Ns).values()];if(!as._initialized){as._initialized=!0;for(const Xt of zt)Xt.initialize(_t)}dt.registerEditorTypes(zt),W(this,me,dt),this.pageIndex=p,this.div=F,W(this,Js,it),W(this,ys,ht),this.viewport=Ut,W(this,ws,Rt),this.drawLayer=pt,i(this,me).addLayer(this)}get isEmpty(){return i(this,Je).size===0}updateToolbar(dt){i(this,me).updateToolbar(dt)}updateMode(dt=i(this,me).getMode()){switch(U(this,Yi,Ca).call(this),dt){case s.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case s.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case s.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(dt!==s.AnnotationEditorType.NONE){const{classList:p}=this.div;for(const F of i(as,Ns).values())p.toggle(`${F._type}Editing`,dt===F._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(dt){if(i(this,me).getMode()===s.AnnotationEditorType.INK){if(!dt){for(const p of i(this,Je).values())if(p.isEmpty()){p.setInBackground();return}}U(this,Zs,nn).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(dt){i(this,me).setEditingState(dt)}addCommands(dt){i(this,me).addCommands(dt)}togglePointerEvents(dt=!1){this.div.classList.toggle("disabled",!dt)}enable(){this.togglePointerEvents(!0);const dt=new Set;for(const F of i(this,Je).values())F.enableEditing(),F.annotationElementId&&dt.add(F.annotationElementId);if(!i(this,ys))return;const p=i(this,ys).getEditableAnnotations();for(const F of p){if(F.hide(),i(this,me).isDeletedAnnotationElement(F.data.id)||dt.has(F.data.id))continue;const it=this.deserialize(F);it&&(this.addOrRebuild(it),it.enableEditing())}}disable(){var F;W(this,vi,!0),this.togglePointerEvents(!1);const dt=new Set;for(const it of i(this,Je).values()){if(it.disableEditing(),!it.annotationElementId||it.serialize()!==null){dt.add(it.annotationElementId);continue}(F=this.getEditableAnnotation(it.annotationElementId))==null||F.show(),it.remove()}if(i(this,ys)){const it=i(this,ys).getEditableAnnotations();for(const ht of it){const{id:pt}=ht.data;dt.has(pt)||i(this,me).isDeletedAnnotationElement(pt)||ht.show()}}U(this,Yi,Ca).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:p}=this.div;for(const it of i(as,Ns).values())p.remove(`${it._type}Editing`);this.disableTextSelection(),W(this,vi,!1)}getEditableAnnotation(dt){var p;return((p=i(this,ys))==null?void 0:p.getEditableAnnotation(dt))||null}setActiveEditor(dt){i(this,me).getActive()!==dt&&i(this,me).setActiveEditor(dt)}enableTextSelection(){var dt;(dt=i(this,ws))!=null&&dt.div&&document.addEventListener("selectstart",i(this,Wi))}disableTextSelection(){var dt;(dt=i(this,ws))!=null&&dt.div&&document.removeEventListener("selectstart",i(this,Wi))}enableClick(){this.div.addEventListener("pointerdown",i(this,qi)),this.div.addEventListener("pointerup",i(this,Hi))}disableClick(){this.div.removeEventListener("pointerdown",i(this,qi)),this.div.removeEventListener("pointerup",i(this,Hi))}attach(dt){i(this,Je).set(dt.id,dt);const{annotationElementId:p}=dt;p&&i(this,me).isDeletedAnnotationElement(p)&&i(this,me).removeDeletedAnnotationElement(dt)}detach(dt){var p;i(this,Je).delete(dt.id),(p=i(this,Js))==null||p.removePointerInTextLayer(dt.contentDiv),!i(this,vi)&&dt.annotationElementId&&i(this,me).addDeletedAnnotationElement(dt)}remove(dt){this.detach(dt),i(this,me).removeEditor(dt),dt.div.remove(),dt.isAttachedToDOM=!1,i(this,mi)||this.addInkEditorIfNeeded(!1)}changeParent(dt){var p;dt.parent!==this&&(dt.annotationElementId&&(i(this,me).addDeletedAnnotationElement(dt.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(dt),dt.annotationElementId=null),this.attach(dt),(p=dt.parent)==null||p.detach(dt),dt.setParent(this),dt.div&&dt.isAttachedToDOM&&(dt.div.remove(),this.div.append(dt.div)))}add(dt){if(this.changeParent(dt),i(this,me).addEditor(dt),this.attach(dt),!dt.isAttachedToDOM){const p=dt.render();this.div.append(p),dt.isAttachedToDOM=!0}dt.fixAndSetPosition(),dt.onceAdded(),i(this,me).addToAnnotationStorage(dt)}moveEditorInDOM(dt){var F;if(!dt.isAttachedToDOM)return;const{activeElement:p}=document;dt.div.contains(p)&&!i(this,_s)&&(dt._focusEventsAllowed=!1,W(this,_s,setTimeout(()=>{W(this,_s,null),dt.div.contains(document.activeElement)?dt._focusEventsAllowed=!0:(dt.div.addEventListener("focusin",()=>{dt._focusEventsAllowed=!0},{once:!0}),p.focus())},0))),dt._structTreeParentId=(F=i(this,Js))==null?void 0:F.moveElementInDOM(this.div,dt.div,dt.contentDiv,!0)}addOrRebuild(dt){dt.needsToBeRebuilt()?(dt.parent||(dt.parent=this),dt.rebuild()):this.add(dt)}addUndoableEditor(dt){const p=()=>dt._uiManager.rebuild(dt),F=()=>{dt.remove()};this.addCommands({cmd:p,undo:F,mustExec:!1})}getNextId(){return i(this,me).getId()}canCreateNewEmptyEditor(){var dt;return(dt=i(this,$i,Ea))==null?void 0:dt.canCreateNewEmptyEditor()}pasteEditor(dt,p){i(this,me).updateToolbar(dt),i(this,me).updateMode(dt);const{offsetX:F,offsetY:it}=U(this,Xi,Sa).call(this),ht=this.getNextId(),pt=U(this,Gi,xa).call(this,{parent:this,id:ht,x:F,y:it,uiManager:i(this,me),isCentered:!0,...p});pt&&this.add(pt)}deserialize(dt){var p;return((p=i(as,Ns).get(dt.annotationType??dt.annotationEditorType))==null?void 0:p.deserialize(dt,this,i(this,me)))||null}addNewEditor(){U(this,Zs,nn).call(this,U(this,Xi,Sa).call(this),!0)}setSelected(dt){i(this,me).setSelected(dt)}toggleSelected(dt){i(this,me).toggleSelected(dt)}isSelected(dt){return i(this,me).isSelected(dt)}unselect(dt){i(this,me).unselect(dt)}selectionStart(dt){var p;(p=i(this,ws))==null||p.div.addEventListener("pointerup",i(this,Vn),{once:!0})}pointerUpAfterSelection(dt){var Xt;const p=document.getSelection();if(p.rangeCount===0)return;const F=p.getRangeAt(0);if(F.collapsed||!((Xt=i(this,ws))!=null&&Xt.div.contains(F.commonAncestorContainer)))return;const{x:it,y:ht,width:pt,height:Rt}=i(this,ws).div.getBoundingClientRect(),Ut=F.getClientRects();let _t;switch(this.viewport.rotation){case 90:_t=(ye,Ee,Me,ke)=>({x:(Ee-ht)/Rt,y:1-(ye+Me-it)/pt,width:ke/Rt,height:Me/pt});break;case 180:_t=(ye,Ee,Me,ke)=>({x:1-(ye+Me-it)/pt,y:1-(Ee+ke-ht)/Rt,width:Me/pt,height:ke/Rt});break;case 270:_t=(ye,Ee,Me,ke)=>({x:1-(Ee+ke-ht)/Rt,y:(ye-it)/pt,width:ke/Rt,height:Me/pt});break;default:_t=(ye,Ee,Me,ke)=>({x:(ye-it)/pt,y:(Ee-ht)/Rt,width:Me/pt,height:ke/Rt});break}const zt=[];for(const{x:ye,y:Ee,width:Me,height:ke}of Ut)Me===0||ke===0||zt.push(_t(ye,Ee,Me,ke));zt.length!==0&&U(this,Zs,nn).call(this,dt,!1,{boxes:zt}),p.empty()}pointerup(dt){const{isMac:p}=s.FeatureTest.platform;if(!(dt.button!==0||dt.ctrlKey&&p)&&dt.target===this.div&&i(this,Os)){if(W(this,Os,!1),!i(this,gi)){W(this,gi,!0);return}if(i(this,me).getMode()===s.AnnotationEditorType.STAMP){i(this,me).unselectAll();return}U(this,Zs,nn).call(this,dt,!1)}}pointerdown(dt){if(i(this,me).getMode()===s.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),i(this,Os)){W(this,Os,!1);return}const{isMac:p}=s.FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&p||dt.target!==this.div)return;W(this,Os,!0);const F=i(this,me).getActive();W(this,gi,!F||F.isEmpty())}findNewParent(dt,p,F){const it=i(this,me).findParent(p,F);return it===null||it===this?!1:(it.changeParent(dt),!0)}destroy(){var dt,p;((dt=i(this,me).getActive())==null?void 0:dt.parent)===this&&(i(this,me).commitOrRemove(),i(this,me).setActiveEditor(null)),i(this,_s)&&(clearTimeout(i(this,_s)),W(this,_s,null));for(const F of i(this,Je).values())(p=i(this,Js))==null||p.removePointerInTextLayer(F.contentDiv),F.setParent(null),F.isAttachedToDOM=!1,F.div.remove();this.div=null,i(this,Je).clear(),i(this,me).removeLayer(this)}render({viewport:dt}){this.viewport=dt,(0,I.setLayerDimensions)(this.div,dt);for(const p of i(this,me).getEditors(this.pageIndex))this.add(p);this.updateMode()}update({viewport:dt}){i(this,me).commitOrRemove();const p=this.viewport.rotation,F=dt.rotation;if(this.viewport=dt,(0,I.setLayerDimensions)(this.div,{rotation:F}),p!==F)for(const it of i(this,Je).values())it.rotate(F);this.updateMode()}get pageDimensions(){const{pageWidth:dt,pageHeight:p}=this.viewport.rawDims;return[dt,p]}};Js=new WeakMap,gi=new WeakMap,ys=new WeakMap,Hi=new WeakMap,Vn=new WeakMap,qi=new WeakMap,_s=new WeakMap,Wi=new WeakMap,Je=new WeakMap,Os=new WeakMap,mi=new WeakMap,vi=new WeakMap,ws=new WeakMap,me=new WeakMap,Ns=new WeakMap,$i=new WeakSet,Ea=function(){return i(as,Ns).get(i(this,me).getMode())},Gi=new WeakSet,xa=function(dt){const p=i(this,$i,Ea);return p?new p.prototype.constructor(dt):null},Zs=new WeakSet,nn=function(dt,p,F={}){const it=this.getNextId(),ht=U(this,Gi,xa).call(this,{parent:this,id:it,x:dt.offsetX,y:dt.offsetY,uiManager:i(this,me),isCentered:p,...F});return ht&&this.add(ht),ht},Xi=new WeakSet,Sa=function(){const{x:dt,y:p,width:F,height:it}=this.div.getBoundingClientRect(),ht=Math.max(0,dt),pt=Math.max(0,p),Rt=Math.min(window.innerWidth,dt+F),Ut=Math.min(window.innerHeight,p+it),_t=(ht+Rt)/2-dt,zt=(pt+Ut)/2-p,[Xt,ye]=this.viewport.rotation%180===0?[_t,zt]:[zt,_t];return{offsetX:Xt,offsetY:ye}},Yi=new WeakSet,Ca=function(){W(this,mi,!0);for(const dt of i(this,Je).values())dt.isEmpty()&&dt.remove();W(this,mi,!1)},we(as,"_initialized",!1),S(as,Ns,new Map([k,N,R,_].map(dt=>[dt._editorType,dt])));let Z=as},97:(t,e,n)=>{var k,w,T,_,I,N,R,Z,L,H,Ta,X,Ma,D,Zl,C,th;n.d(e,{ColorPicker:()=>m});var s=n(266),o=n(812),h=n(473);const J=class J{constructor({editor:Q=null,uiManager:ut=null}){S(this,H);S(this,X);S(this,D);S(this,C);S(this,k,U(this,D,Zl).bind(this));S(this,w,null);S(this,T,null);S(this,_,void 0);S(this,I,null);S(this,N,!1);S(this,R,!1);S(this,Z,void 0);S(this,L,null);var wt;W(this,R,!Q),W(this,L,(Q==null?void 0:Q._uiManager)||ut),W(this,Z,i(this,L)._eventBus),W(this,_,(Q==null?void 0:Q.color)||((wt=i(this,L))==null?void 0:wt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,s.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["Escape","mac+Escape"],J.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],J.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],J.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],J.prototype._moveToPrevious],[["Home","mac+Home"],J.prototype._moveToBeginning],[["End","mac+End"],J.prototype._moveToEnd]]))}renderButton(){const Q=W(this,w,document.createElement("button"));Q.className="colorPicker",Q.tabIndex="0",Q.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),Q.setAttribute("aria-haspopup",!0),Q.addEventListener("click",U(this,C,th).bind(this));const ut=W(this,T,document.createElement("span"));return ut.className="swatch",ut.style.backgroundColor=i(this,_),Q.append(ut),Q}renderMainDropdown(){const Q=W(this,I,U(this,H,Ta).call(this,s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR));return Q.setAttribute("aria-orientation","horizontal"),Q.setAttribute("aria-labelledby","highlightColorPickerLabel"),Q}_colorSelectFromKeyboard(Q){const ut=Q.target.getAttribute("data-color");ut&&U(this,X,Ma).call(this,ut,Q)}_moveToNext(Q){var ut,wt;if(Q.target===i(this,w)){(ut=i(this,I).firstChild)==null||ut.focus();return}(wt=Q.target.nextSibling)==null||wt.focus()}_moveToPrevious(Q){var ut;(ut=Q.target.previousSibling)==null||ut.focus()}_moveToBeginning(){var Q;(Q=i(this,I).firstChild)==null||Q.focus()}_moveToEnd(){var Q;(Q=i(this,I).lastChild)==null||Q.focus()}hideDropdown(){var Q;(Q=i(this,I))==null||Q.classList.add("hidden")}_hideDropdownFromKeyboard(){i(this,R)||!i(this,I)||i(this,I).classList.contains("hidden")||(this.hideDropdown(),i(this,w).removeEventListener("keydown",i(this,k)),i(this,w).focus({preventScroll:!0,focusVisible:i(this,N)}))}updateColor(Q){if(i(this,T)&&(i(this,T).style.backgroundColor=Q),!i(this,I))return;const ut=i(this,L).highlightColors.values();for(const wt of i(this,I).children)wt.setAttribute("aria-selected",ut.next().value===Q)}destroy(){var Q,ut;(Q=i(this,w))==null||Q.remove(),W(this,w,null),W(this,T,null),(ut=i(this,I))==null||ut.remove(),W(this,I,null)}};k=new WeakMap,w=new WeakMap,T=new WeakMap,_=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakMap,Z=new WeakMap,L=new WeakMap,H=new WeakSet,Ta=function(Q){const ut=document.createElement("div");ut.addEventListener("contextmenu",h.noContextMenu),ut.className="dropdown",ut.role="listbox",ut.setAttribute("aria-multiselectable",!1),ut.setAttribute("aria-orientation","vertical"),ut.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[wt,jt]of i(this,L).highlightColors){const Nt=document.createElement("button");Nt.tabIndex="0",Nt.role="option",Nt.setAttribute("data-color",jt),Nt.title=wt,Nt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${wt}`);const Ft=document.createElement("span");Nt.append(Ft),Ft.className="swatch",Ft.style.backgroundColor=jt,Nt.setAttribute("aria-selected",jt===i(this,_)),Nt.addEventListener("click",U(this,X,Ma).bind(this,Q,jt)),ut.append(Nt)}return ut.addEventListener("keydown",i(this,k)),ut},X=new WeakSet,Ma=function(Q,ut,wt){wt.stopPropagation(),i(this,Z).dispatch("switchannotationeditorparams",{source:this,type:Q,value:ut})},D=new WeakSet,Zl=function(Q){J._keyboardManager.exec(this,Q)},C=new WeakSet,th=function(Q){if(i(this,I)&&!i(this,I).classList.contains("hidden")){this.hideDropdown();return}if(i(this,w).addEventListener("keydown",i(this,k)),W(this,N,Q.detail===0),i(this,I)){i(this,I).classList.remove("hidden");return}const ut=W(this,I,U(this,H,Ta).call(this,s.AnnotationEditorParamsType.HIGHLIGHT_COLOR));i(this,w).append(ut)};let m=J},115:(t,e,n)=>{var _,I,N,R,Z,L,H,V,ka,D,Y,C,B,J,eh,Q,sh,wt,ih,Nt,nr,Pt,nh,Ht,Ra,Jt,Vt,ne,$t,ce,Zt,oe,qt,Ae,pe,se,le,z,b,a,l,u,Pa,A,La,f,Fa,c,Ia,M,rh,et,ah,vt,Da,bt,Oa,St,Na,Dt,oh,P,lh,tt,hh,gt,ch,It,Ba,Kt,rn;n.d(e,{AnnotationEditor:()=>w});var s=n(812),o=n(266),h=n(473);const $=class ${constructor(j){S(this,V);S(this,_,"");S(this,I,!1);S(this,N,null);S(this,R,null);S(this,Z,null);S(this,L,!1);S(this,H,null);W(this,H,j)}static initialize(j){$._l10nPromise||($._l10nPromise=j)}async render(){const j=W(this,N,document.createElement("button"));j.className="altText";const ot=await $._l10nPromise.get("pdfjs-editor-alt-text-button-label");j.textContent=ot,j.setAttribute("aria-label",ot),j.tabIndex="0",j.addEventListener("contextmenu",h.noContextMenu),j.addEventListener("pointerdown",mt=>mt.stopPropagation());const At=mt=>{mt.preventDefault(),i(this,H)._uiManager.editAltText(i(this,H))};return j.addEventListener("click",At,{capture:!0}),j.addEventListener("keydown",mt=>{mt.target===j&&mt.key==="Enter"&&(W(this,L,!0),At(mt))}),await U(this,V,ka).call(this),j}finish(){i(this,N)&&(i(this,N).focus({focusVisible:i(this,L)}),W(this,L,!1))}get data(){return{altText:i(this,_),decorative:i(this,I)}}set data({altText:j,decorative:ot}){i(this,_)===j&&i(this,I)===ot||(W(this,_,j),W(this,I,ot),U(this,V,ka).call(this))}toggle(j=!1){i(this,N)&&(!j&&i(this,Z)&&(clearTimeout(i(this,Z)),W(this,Z,null)),i(this,N).disabled=!j)}destroy(){var j;(j=i(this,N))==null||j.remove(),W(this,N,null),W(this,R,null)}};_=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakMap,Z=new WeakMap,L=new WeakMap,H=new WeakMap,V=new WeakSet,ka=async function(){var At,mt;const j=i(this,N);if(!j)return;if(!i(this,_)&&!i(this,I)){j.classList.remove("done"),(At=i(this,R))==null||At.remove();return}j.classList.add("done"),$._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(Ot=>{j.setAttribute("aria-label",Ot)});let ot=i(this,R);if(!ot){W(this,R,ot=document.createElement("span")),ot.className="tooltip",ot.setAttribute("role","tooltip");const Ot=ot.id=`alt-text-tooltip-${i(this,H).id}`;j.setAttribute("aria-describedby",Ot);const Mt=100;j.addEventListener("mouseenter",()=>{W(this,Z,setTimeout(()=>{W(this,Z,null),i(this,R).classList.add("show"),i(this,H)._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:i(this,H).editorType,data:{action:"alt_text_tooltip"}}})},Mt))}),j.addEventListener("mouseleave",()=>{var E;i(this,Z)&&(clearTimeout(i(this,Z)),W(this,Z,null)),(E=i(this,R))==null||E.classList.remove("show")})}ot.innerText=i(this,I)?await $._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):i(this,_),ot.parentNode||j.append(ot),(mt=i(this,H).getImageForAltText())==null||mt.setAttribute("aria-describedby",ot.id)},we($,"_l10nPromise",null);let m=$;const ie=class ie{constructor(j){S(this,Q);S(this,wt);S(this,Nt);S(this,Pt);S(this,Ht);S(this,D,null);S(this,Y,null);S(this,C,void 0);S(this,B,null);W(this,C,j)}render(){const j=W(this,D,document.createElement("div"));j.className="editToolbar",j.addEventListener("contextmenu",h.noContextMenu),j.addEventListener("pointerdown",U(ie,J,eh));const ot=W(this,B,document.createElement("div"));ot.className="buttons",j.append(ot);const At=i(this,C).toolbarPosition;if(At){const{style:mt}=j,Ot=i(this,C)._uiManager.direction==="ltr"?1-At[0]:At[0];mt.insetInlineEnd=`${100*Ot}%`,mt.top=`calc(${100*At[1]}% + var(--editor-toolbar-vert-offset))`}return U(this,Pt,nh).call(this),j}hide(){var j;i(this,D).classList.add("hidden"),(j=i(this,Y))==null||j.hideDropdown()}show(){i(this,D).classList.remove("hidden")}addAltTextButton(j){U(this,Nt,nr).call(this,j),i(this,B).prepend(j,i(this,Ht,Ra))}addColorPicker(j){W(this,Y,j);const ot=j.renderButton();U(this,Nt,nr).call(this,ot),i(this,B).prepend(ot,i(this,Ht,Ra))}remove(){var j;i(this,D).remove(),(j=i(this,Y))==null||j.destroy(),W(this,Y,null)}};D=new WeakMap,Y=new WeakMap,C=new WeakMap,B=new WeakMap,J=new WeakSet,eh=function(j){j.stopPropagation()},Q=new WeakSet,sh=function(j){i(this,C)._focusEventsAllowed=!1,j.preventDefault(),j.stopPropagation()},wt=new WeakSet,ih=function(j){i(this,C)._focusEventsAllowed=!0,j.preventDefault(),j.stopPropagation()},Nt=new WeakSet,nr=function(j){j.addEventListener("focusin",U(this,Q,sh).bind(this),{capture:!0}),j.addEventListener("focusout",U(this,wt,ih).bind(this),{capture:!0}),j.addEventListener("contextmenu",h.noContextMenu)},Pt=new WeakSet,nh=function(){const j=document.createElement("button");j.className="delete",j.tabIndex=0,j.setAttribute("data-l10n-id",`pdfjs-editor-remove-${i(this,C).editorType}-button`),U(this,Nt,nr).call(this,j),j.addEventListener("click",ot=>{i(this,C)._uiManager.delete()}),i(this,B).append(j)},Ht=new WeakSet,Ra=function(){const j=document.createElement("div");return j.className="divider",j},S(ie,J);let k=ie;const Qt=class Qt{constructor(j){S(this,u);S(this,A);S(this,c);S(this,M);S(this,et);S(this,vt);S(this,bt);S(this,St);S(this,Dt);S(this,P);S(this,tt);S(this,gt);S(this,It);S(this,Kt);S(this,Jt,null);S(this,Vt,null);S(this,ne,!1);S(this,$t,null);S(this,ce,null);S(this,Zt,this.focusin.bind(this));S(this,oe,this.focusout.bind(this));S(this,qt,null);S(this,Ae,"");S(this,pe,!1);S(this,se,!1);S(this,le,!1);S(this,z,!1);S(this,b,null);we(this,"_initialOptions",Object.create(null));we(this,"_uiManager",null);we(this,"_focusEventsAllowed",!0);we(this,"_l10nPromise",null);S(this,a,!1);S(this,l,Qt._zIndex++);this.constructor===Qt&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=j.parent,this.id=j.id,this.width=this.height=null,this.pageIndex=j.parent.pageIndex,this.name=j.name,this.div=null,this._uiManager=j.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=j.isCentered,this._structTreeParentId=null;const{rotation:ot,rawDims:{pageWidth:At,pageHeight:mt,pageX:Ot,pageY:Mt}}=this.parent.viewport;this.rotation=ot,this.pageRotation=(360+ot-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[At,mt],this.pageTranslation=[Ot,Mt];const[E,r]=this.parentDimensions;this.x=j.x/E,this.y=j.y/r,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const j=Qt.prototype._resizeWithKeyboard,ot=s.AnnotationEditorUIManager.TRANSLATE_SMALL,At=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_resizerKeyboardManager",new s.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],j,{args:[-ot,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],j,{args:[-At,0]}],[["ArrowRight","mac+ArrowRight"],j,{args:[ot,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],j,{args:[At,0]}],[["ArrowUp","mac+ArrowUp"],j,{args:[0,-ot]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],j,{args:[0,-At]}],[["ArrowDown","mac+ArrowDown"],j,{args:[0,ot]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],j,{args:[0,At]}],[["Escape","mac+Escape"],Qt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(j){const ot=new T({id:j.parent.getNextId(),parent:j.parent,uiManager:j._uiManager});ot.annotationElementId=j.annotationElementId,ot.deleted=!0,ot._uiManager.addToAnnotationStorage(ot)}static initialize(j,ot=null){if(Qt._l10nPromise||(Qt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(mt=>[mt,j.get(mt.replaceAll(/([A-Z])/g,Ot=>`-${Ot.toLowerCase()}`))]))),ot==null?void 0:ot.strings)for(const mt of ot.strings)Qt._l10nPromise.set(mt,j.get(mt));if(Qt._borderLineWidth!==-1)return;const At=getComputedStyle(document.documentElement);Qt._borderLineWidth=parseFloat(At.getPropertyValue("--outline-width"))||0}static updateDefaultParams(j,ot){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(j){return!1}static paste(j,ot){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return i(this,a)}set _isDraggable(j){var ot;W(this,a,j),(ot=this.div)==null||ot.classList.toggle("draggable",j)}get isEnterHandled(){return!0}center(){const[j,ot]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*ot/(j*2),this.y+=this.width*j/(ot*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*ot/(j*2),this.y-=this.width*j/(ot*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(j){this._uiManager.addCommands(j)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=i(this,l)}setParent(j){j!==null?(this.pageIndex=j.pageIndex,this.pageDimensions=j.pageDimensions):U(this,Kt,rn).call(this),this.parent=j}focusin(j){this._focusEventsAllowed&&(i(this,pe)?W(this,pe,!1):this.parent.setSelected(this))}focusout(j){var ot,At;!this._focusEventsAllowed||!this.isAttachedToDOM||(ot=j.relatedTarget)!=null&&ot.closest(`#${this.id}`)||(j.preventDefault(),(At=this.parent)!=null&&At.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(j,ot,At,mt){const[Ot,Mt]=this.parentDimensions;[At,mt]=this.screenToPageTranslation(At,mt),this.x=(j+At)/Ot,this.y=(ot+mt)/Mt,this.fixAndSetPosition()}translate(j,ot){U(this,u,Pa).call(this,this.parentDimensions,j,ot)}translateInPage(j,ot){U(this,u,Pa).call(this,this.pageDimensions,j,ot),this.div.scrollIntoView({block:"nearest"})}drag(j,ot){const[At,mt]=this.parentDimensions;if(this.x+=j/At,this.y+=ot/mt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:O}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,O)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Ot,y:Mt}=this;const[E,r]=U(this,A,La).call(this);Ot+=E,Mt+=r,this.div.style.left=`${(100*Ot).toFixed(2)}%`,this.div.style.top=`${(100*Mt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(j=this.rotation){const[ot,At]=this.pageDimensions;let{x:mt,y:Ot,width:Mt,height:E}=this;switch(Mt*=ot,E*=At,mt*=ot,Ot*=At,j){case 0:mt=Math.max(0,Math.min(ot-Mt,mt)),Ot=Math.max(0,Math.min(At-E,Ot));break;case 90:mt=Math.max(0,Math.min(ot-E,mt)),Ot=Math.min(At,Math.max(Mt,Ot));break;case 180:mt=Math.min(ot,Math.max(Mt,mt)),Ot=Math.min(At,Math.max(E,Ot));break;case 270:mt=Math.min(ot,Math.max(E,mt)),Ot=Math.max(0,Math.min(At-Mt,Ot));break}this.x=mt/=ot,this.y=Ot/=At;const[r,v]=U(this,A,La).call(this);mt+=r,Ot+=v;const{style:O}=this.div;O.left=`${(100*mt).toFixed(2)}%`,O.top=`${(100*Ot).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(j,ot){var At;return U(At=Qt,f,Fa).call(At,j,ot,this.parentRotation)}pageTranslationToScreen(j,ot){var At;return U(At=Qt,f,Fa).call(At,j,ot,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:j,pageDimensions:[ot,At]}=this,mt=ot*j,Ot=At*j;return o.FeatureTest.isCSSRoundSupported?[Math.round(mt),Math.round(Ot)]:[mt,Ot]}setDims(j,ot){const[At,mt]=this.parentDimensions;this.div.style.width=`${(100*j/At).toFixed(2)}%`,i(this,ne)||(this.div.style.height=`${(100*ot/mt).toFixed(2)}%`)}fixDims(){const{style:j}=this.div,{height:ot,width:At}=j,mt=At.endsWith("%"),Ot=!i(this,ne)&&ot.endsWith("%");if(mt&&Ot)return;const[Mt,E]=this.parentDimensions;mt||(j.width=`${(100*parseFloat(At)/Mt).toFixed(2)}%`),!i(this,ne)&&!Ot&&(j.height=`${(100*parseFloat(ot)/E).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var j;(j=i(this,Vt))==null||j.finish()}async addEditToolbar(){return i(this,qt)||i(this,le)?i(this,qt):(W(this,qt,new k(this)),this.div.append(i(this,qt).render()),i(this,Vt)&&i(this,qt).addAltTextButton(await i(this,Vt).render()),i(this,qt))}removeEditToolbar(){var j;i(this,qt)&&(i(this,qt).remove(),W(this,qt,null),(j=i(this,Vt))==null||j.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){i(this,Vt)||(m.initialize(Qt._l10nPromise),W(this,Vt,new m(this)),await this.addEditToolbar())}get altTextData(){var j;return(j=i(this,Vt))==null?void 0:j.data}set altTextData(j){i(this,Vt)&&(i(this,Vt).data=j)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",i(this,Zt)),this.div.addEventListener("focusout",i(this,oe));const[j,ot]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*ot/j).toFixed(2)}%`,this.div.style.maxHeight=`${(100*j/ot).toFixed(2)}%`);const[At,mt]=this.getInitialTranslation();return this.translate(At,mt),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(j){const{isMac:ot}=o.FeatureTest.platform;if(j.button!==0||j.ctrlKey&&ot){j.preventDefault();return}if(W(this,pe,!0),this._isDraggable){U(this,Dt,oh).call(this,j);return}U(this,St,Na).call(this,j)}moveInDOM(){i(this,b)&&clearTimeout(i(this,b)),W(this,b,setTimeout(()=>{var j;W(this,b,null),(j=this.parent)==null||j.moveEditorInDOM(this)},0))}_setParentAndPosition(j,ot,At){j.changeParent(this),this.x=ot,this.y=At,this.fixAndSetPosition()}getRect(j,ot,At=this.rotation){const mt=this.parentScale,[Ot,Mt]=this.pageDimensions,[E,r]=this.pageTranslation,v=j/mt,O=ot/mt,q=this.x*Ot,st=this.y*Mt,at=this.width*Ot,yt=this.height*Mt;switch(At){case 0:return[q+v+E,Mt-st-O-yt+r,q+v+at+E,Mt-st-O+r];case 90:return[q+O+E,Mt-st+v+r,q+O+yt+E,Mt-st+v+at+r];case 180:return[q-v-at+E,Mt-st+O+r,q-v+E,Mt-st+O+yt+r];case 270:return[q-O-yt+E,Mt-st-v-at+r,q-O+E,Mt-st-v+r];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(j,ot){const[At,mt,Ot,Mt]=j,E=Ot-At,r=Mt-mt;switch(this.rotation){case 0:return[At,ot-Mt,E,r];case 90:return[At,ot-mt,r,E];case 180:return[Ot,ot-mt,E,r];case 270:return[Ot,ot-Mt,r,E];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){W(this,le,!0)}disableEditMode(){W(this,le,!1)}isInEditMode(){return i(this,le)}shouldGetKeyboardEvents(){return i(this,z)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var j,ot;(j=this.div)==null||j.addEventListener("focusin",i(this,Zt)),(ot=this.div)==null||ot.addEventListener("focusout",i(this,oe))}rotate(j){}serialize(j=!1,ot=null){(0,o.unreachable)("An editor must be serializable")}static deserialize(j,ot,At){const mt=new this.prototype.constructor({parent:ot,id:ot.getNextId(),uiManager:At});mt.rotation=j.rotation;const[Ot,Mt]=mt.pageDimensions,[E,r,v,O]=mt.getRectInCurrentCoords(j.rect,Mt);return mt.x=E/Ot,mt.y=r/Mt,mt.width=v/Ot,mt.height=O/Mt,mt}remove(){this.div.removeEventListener("focusin",i(this,Zt)),this.div.removeEventListener("focusout",i(this,oe)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),i(this,b)&&(clearTimeout(i(this,b)),W(this,b,null)),U(this,Kt,rn).call(this),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(U(this,M,rh).call(this),i(this,$t).classList.remove("hidden"),(0,s.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(j){if(!this.isResizable||j.target!==this.div||j.key!=="Enter")return;this._uiManager.setSelected(this),W(this,ce,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const ot=i(this,$t).children;if(!i(this,Jt)){W(this,Jt,Array.from(ot));const Mt=U(this,P,lh).bind(this),E=U(this,tt,hh).bind(this);for(const r of i(this,Jt)){const v=r.getAttribute("data-resizer-name");r.setAttribute("role","spinbutton"),r.addEventListener("keydown",Mt),r.addEventListener("blur",E),r.addEventListener("focus",U(this,gt,ch).bind(this,v)),Qt._l10nPromise.get(`pdfjs-editor-resizer-label-${v}`).then(O=>r.setAttribute("aria-label",O))}}const At=i(this,Jt)[0];let mt=0;for(const Mt of ot){if(Mt===At)break;mt++}const Ot=(360-this.rotation+this.parentRotation)%360/90*(i(this,Jt).length/4);if(Ot!==mt){if(Ot<mt)for(let E=0;E<mt-Ot;E++)i(this,$t).append(i(this,$t).firstChild);else if(Ot>mt)for(let E=0;E<Ot-mt;E++)i(this,$t).firstChild.before(i(this,$t).lastChild);let Mt=0;for(const E of ot){const r=i(this,Jt)[Mt++].getAttribute("data-resizer-name");Qt._l10nPromise.get(`pdfjs-editor-resizer-label-${r}`).then(v=>E.setAttribute("aria-label",v))}}U(this,It,Ba).call(this,0),W(this,z,!0),i(this,$t).firstChild.focus({focusVisible:!0}),j.preventDefault(),j.stopImmediatePropagation()}_resizeWithKeyboard(j,ot){i(this,z)&&U(this,bt,Oa).call(this,i(this,Ae),{movementX:j,movementY:ot})}_stopResizingWithKeyboard(){U(this,Kt,rn).call(this),this.div.focus()}select(){var j,ot;if(this.makeResizable(),(j=this.div)==null||j.classList.add("selectedEditor"),!i(this,qt)){this.addEditToolbar().then(()=>{var At,mt;(At=this.div)!=null&&At.classList.contains("selectedEditor")&&((mt=i(this,qt))==null||mt.show())});return}(ot=i(this,qt))==null||ot.show()}unselect(){var j,ot,At,mt;(j=i(this,$t))==null||j.classList.add("hidden"),(ot=this.div)==null||ot.classList.remove("selectedEditor"),(At=this.div)!=null&&At.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),(mt=i(this,qt))==null||mt.hide()}updateParams(j,ot){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return i(this,se)}set isEditing(j){W(this,se,j),this.parent&&(j?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(j,ot){W(this,ne,!0);const At=j/ot,{style:mt}=this.div;mt.aspectRatio=At,mt.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}};Jt=new WeakMap,Vt=new WeakMap,ne=new WeakMap,$t=new WeakMap,ce=new WeakMap,Zt=new WeakMap,oe=new WeakMap,qt=new WeakMap,Ae=new WeakMap,pe=new WeakMap,se=new WeakMap,le=new WeakMap,z=new WeakMap,b=new WeakMap,a=new WeakMap,l=new WeakMap,u=new WeakSet,Pa=function([j,ot],At,mt){[At,mt]=this.screenToPageTranslation(At,mt),this.x+=At/j,this.y+=mt/ot,this.fixAndSetPosition()},A=new WeakSet,La=function(){const[j,ot]=this.parentDimensions,{_borderLineWidth:At}=Qt,mt=At/j,Ot=At/ot;switch(this.rotation){case 90:return[-mt,Ot];case 180:return[mt,Ot];case 270:return[mt,-Ot];default:return[-mt,-Ot]}},f=new WeakSet,Fa=function(j,ot,At){switch(At){case 90:return[ot,-j];case 180:return[-j,-ot];case 270:return[-ot,j];default:return[j,ot]}},c=new WeakSet,Ia=function(j){switch(j){case 90:{const[ot,At]=this.pageDimensions;return[0,-ot/At,At/ot,0]}case 180:return[-1,0,0,-1];case 270:{const[ot,At]=this.pageDimensions;return[0,ot/At,-At/ot,0]}default:return[1,0,0,1]}},M=new WeakSet,rh=function(){if(i(this,$t))return;W(this,$t,document.createElement("div")),i(this,$t).classList.add("resizers");const j=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const ot of j){const At=document.createElement("div");i(this,$t).append(At),At.classList.add("resizer",ot),At.setAttribute("data-resizer-name",ot),At.addEventListener("pointerdown",U(this,et,ah).bind(this,ot)),At.addEventListener("contextmenu",h.noContextMenu),At.tabIndex=-1}this.div.prepend(i(this,$t))},et=new WeakSet,ah=function(j,ot){var yt;ot.preventDefault();const{isMac:At}=o.FeatureTest.platform;if(ot.button!==0||ot.ctrlKey&&At)return;(yt=i(this,Vt))==null||yt.toggle(!1);const mt=U(this,bt,Oa).bind(this,j),Ot=this._isDraggable;this._isDraggable=!1;const Mt={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",mt,Mt);const E=this.x,r=this.y,v=this.width,O=this.height,q=this.parent.div.style.cursor,st=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(ot.target).cursor;const at=()=>{var kt;this.parent.togglePointerEvents(!0),(kt=i(this,Vt))==null||kt.toggle(!0),this._isDraggable=Ot,window.removeEventListener("pointerup",at),window.removeEventListener("blur",at),window.removeEventListener("pointermove",mt,Mt),this.parent.div.style.cursor=q,this.div.style.cursor=st,U(this,vt,Da).call(this,E,r,v,O)};window.addEventListener("pointerup",at),window.addEventListener("blur",at)},vt=new WeakSet,Da=function(j,ot,At,mt){const Ot=this.x,Mt=this.y,E=this.width,r=this.height;Ot===j&&Mt===ot&&E===At&&r===mt||this.addCommands({cmd:()=>{this.width=E,this.height=r,this.x=Ot,this.y=Mt;const[v,O]=this.parentDimensions;this.setDims(v*E,O*r),this.fixAndSetPosition()},undo:()=>{this.width=At,this.height=mt,this.x=j,this.y=ot;const[v,O]=this.parentDimensions;this.setDims(v*At,O*mt),this.fixAndSetPosition()},mustExec:!0})},bt=new WeakSet,Oa=function(j,ot){const[At,mt]=this.parentDimensions,Ot=this.x,Mt=this.y,E=this.width,r=this.height,v=Qt.MIN_SIZE/At,O=Qt.MIN_SIZE/mt,q=ve=>Math.round(ve*1e4)/1e4,st=U(this,c,Ia).call(this,this.rotation),at=(ve,Te)=>[st[0]*ve+st[2]*Te,st[1]*ve+st[3]*Te],yt=U(this,c,Ia).call(this,360-this.rotation),kt=(ve,Te)=>[yt[0]*ve+yt[2]*Te,yt[1]*ve+yt[3]*Te];let Ct,Wt,Bt=!1,Lt=!1;switch(j){case"topLeft":Bt=!0,Ct=(ve,Te)=>[0,0],Wt=(ve,Te)=>[ve,Te];break;case"topMiddle":Ct=(ve,Te)=>[ve/2,0],Wt=(ve,Te)=>[ve/2,Te];break;case"topRight":Bt=!0,Ct=(ve,Te)=>[ve,0],Wt=(ve,Te)=>[0,Te];break;case"middleRight":Lt=!0,Ct=(ve,Te)=>[ve,Te/2],Wt=(ve,Te)=>[0,Te/2];break;case"bottomRight":Bt=!0,Ct=(ve,Te)=>[ve,Te],Wt=(ve,Te)=>[0,0];break;case"bottomMiddle":Ct=(ve,Te)=>[ve/2,Te],Wt=(ve,Te)=>[ve/2,0];break;case"bottomLeft":Bt=!0,Ct=(ve,Te)=>[0,Te],Wt=(ve,Te)=>[ve,0];break;case"middleLeft":Lt=!0,Ct=(ve,Te)=>[0,Te/2],Wt=(ve,Te)=>[ve,Te/2];break}const ee=Ct(E,r),Gt=Wt(E,r);let de=at(...Gt);const ge=q(Ot+de[0]),Ce=q(Mt+de[1]);let Re=1,Ze=1,[De,Ne]=this.screenToPageTranslation(ot.movementX,ot.movementY);if([De,Ne]=kt(De/At,Ne/mt),Bt){const ve=Math.hypot(E,r);Re=Ze=Math.max(Math.min(Math.hypot(Gt[0]-ee[0]-De,Gt[1]-ee[1]-Ne)/ve,1/E,1/r),v/E,O/r)}else Lt?Re=Math.max(v,Math.min(1,Math.abs(Gt[0]-ee[0]-De)))/E:Ze=Math.max(O,Math.min(1,Math.abs(Gt[1]-ee[1]-Ne)))/r;const Ke=q(E*Re),Xs=q(r*Ze);de=at(...Wt(Ke,Xs));const Qe=ge-de[0],vs=Ce-de[1];this.width=Ke,this.height=Xs,this.x=Qe,this.y=vs,this.setDims(At*Ke,mt*Xs),this.fixAndSetPosition()},St=new WeakSet,Na=function(j){const{isMac:ot}=o.FeatureTest.platform;j.ctrlKey&&!ot||j.shiftKey||j.metaKey&&ot?this.parent.toggleSelected(this):this.parent.setSelected(this)},Dt=new WeakSet,oh=function(j){const ot=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let At,mt;ot&&(At={passive:!0,capture:!0},mt=Mt=>{const[E,r]=this.screenToPageTranslation(Mt.movementX,Mt.movementY);this._uiManager.dragSelectedEditors(E,r)},window.addEventListener("pointermove",mt,At));const Ot=()=>{window.removeEventListener("pointerup",Ot),window.removeEventListener("blur",Ot),ot&&window.removeEventListener("pointermove",mt,At),W(this,pe,!1),this._uiManager.endDragSession()||U(this,St,Na).call(this,j)};window.addEventListener("pointerup",Ot),window.addEventListener("blur",Ot)},P=new WeakSet,lh=function(j){Qt._resizerKeyboardManager.exec(this,j)},tt=new WeakSet,hh=function(j){var ot;i(this,z)&&((ot=j.relatedTarget)==null?void 0:ot.parentNode)!==i(this,$t)&&U(this,Kt,rn).call(this)},gt=new WeakSet,ch=function(j){W(this,Ae,i(this,z)?j:"")},It=new WeakSet,Ba=function(j){if(i(this,Jt))for(const ot of i(this,Jt))ot.tabIndex=j},Kt=new WeakSet,rn=function(){if(W(this,z,!1),U(this,It,Ba).call(this,-1),i(this,ce)){const{savedX:j,savedY:ot,savedWidth:At,savedHeight:mt}=i(this,ce);U(this,vt,Da).call(this,j,ot,At,mt),W(this,ce,null)}},S(Qt,f),we(Qt,"_borderLineWidth",-1),we(Qt,"_colorManager",new s.ColorManager),we(Qt,"_zIndex",1);let w=Qt;class T extends w{constructor(j){super(j),this.annotationElementId=j.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},405:(t,e,n)=>{var o,h,m,k,dh,T,rr,I,uh,R,ph,L,Ua;n.d(e,{Outliner:()=>s});class s{constructor(X,$=0,D=0,Y=!0){S(this,k);S(this,T);S(this,I);S(this,R);S(this,L);S(this,o,void 0);S(this,h,[]);S(this,m,[]);let C=1/0,B=-1/0,J=1/0,lt=-1/0;const Q=10**-4;for(const{x:Yt,y:Ht,width:ue,height:ie}of X){const Jt=Math.floor((Yt-$)/Q)*Q,Vt=Math.ceil((Yt+ue+$)/Q)*Q,ne=Math.floor((Ht-$)/Q)*Q,$t=Math.ceil((Ht+ie+$)/Q)*Q,ce=[Jt,ne,$t,!0],Zt=[Vt,ne,$t,!1];i(this,h).push(ce,Zt),C=Math.min(C,Jt),B=Math.max(B,Vt),J=Math.min(J,ne),lt=Math.max(lt,$t)}const ut=B-C+2*D,wt=lt-J+2*D,jt=C-D,Nt=J-D,Ft=i(this,h).at(Y?-1:-2),Pt=[Ft[0],Ft[2]];for(const Yt of i(this,h)){const[Ht,ue,ie]=Yt;Yt[0]=(Ht-jt)/ut,Yt[1]=(ue-Nt)/wt,Yt[2]=(ie-Nt)/wt}W(this,o,{x:jt,y:Nt,width:ut,height:wt,lastPoint:Pt})}getOutlines(){i(this,h).sort(($,D)=>$[0]-D[0]||$[1]-D[1]||$[2]-D[2]);const X=[];for(const $ of i(this,h))$[3]?(X.push(...U(this,L,Ua).call(this,$)),U(this,I,uh).call(this,$)):(U(this,R,ph).call(this,$),X.push(...U(this,L,Ua).call(this,$)));return U(this,k,dh).call(this,X)}}o=new WeakMap,h=new WeakMap,m=new WeakMap,k=new WeakSet,dh=function(X){const $=[],D=new Set;for(const B of X){const[J,lt,Q]=B;$.push([J,lt,B],[J,Q,B])}$.sort((B,J)=>B[1]-J[1]||B[0]-J[0]);for(let B=0,J=$.length;B<J;B+=2){const lt=$[B][2],Q=$[B+1][2];lt.push(Q),Q.push(lt),D.add(lt),D.add(Q)}const Y=[];let C;for(;D.size>0;){const B=D.values().next().value;let[J,lt,Q,ut,wt]=B;D.delete(B);let jt=J,Nt=lt;for(C=[J,Q],Y.push(C);;){let Ft;if(D.has(ut))Ft=ut;else if(D.has(wt))Ft=wt;else break;D.delete(Ft),[J,lt,Q,ut,wt]=Ft,jt!==J&&(C.push(jt,Nt,J,Nt===lt?lt:Q),jt=J),Nt=Nt===lt?Q:lt}C.push(jt,Nt)}return{outlines:Y,box:i(this,o)}},T=new WeakSet,rr=function(X){const $=i(this,m);let D=0,Y=$.length-1;for(;D<=Y;){const C=D+Y>>1,B=$[C][0];if(B===X)return C;B<X?D=C+1:Y=C-1}return Y+1},I=new WeakSet,uh=function([,X,$]){const D=U(this,T,rr).call(this,X);i(this,m).splice(D,0,[X,$])},R=new WeakSet,ph=function([,X,$]){const D=U(this,T,rr).call(this,X);for(let Y=D;Y<i(this,m).length;Y++){const[C,B]=i(this,m)[Y];if(C!==X)break;if(C===X&&B===$){i(this,m).splice(Y,1);return}}for(let Y=D-1;Y>=0;Y--){const[C,B]=i(this,m)[Y];if(C!==X)break;if(C===X&&B===$){i(this,m).splice(Y,1);return}}},L=new WeakSet,Ua=function(X){const[$,D,Y]=X,C=[[$,D,Y]],B=U(this,T,rr).call(this,Y);for(let J=0;J<B;J++){const[lt,Q]=i(this,m)[J];for(let ut=0,wt=C.length;ut<wt;ut++){const[,jt,Nt]=C[ut];if(!(Q<=jt||Nt<=lt)){if(jt>=lt){if(Nt>Q)C[ut][1]=Q;else{if(wt===1)return[];C.splice(ut,1),ut--,wt--}continue}C[ut][2]=lt,Nt>Q&&C.push([$,Q,Nt])}}}return C}},812:(t,e,n)=>{var R,Z,L,H,V,ja,D,Y,C,B,J,fh,ut,wt,jt,Nt,Ft,Pt,Yt,Ht,ue,ie,Jt,Vt,ne,$t,ce,Zt,oe,qt,Ae,pe,se,le,z,b,a,l,u,x,A,y,f,d,c,g,M,G,et,rt,gh,ft,Va,Tt,za,xt,ar,nt,Ha,K,qa,ct,ts,Et,an,te,mh,_e,vh,re,Wa,ot,on,mt,$a;n.d(e,{AnnotationEditorUIManager:()=>N,ColorManager:()=>I,KeyboardManager:()=>_,bindEvents:()=>h,opacityToHex:()=>m});var s=n(266),o=n(473);function h(E,r,v){for(const O of v)r.addEventListener(O,E[O].bind(E))}function m(E){return Math.round(Math.min(255,Math.max(1,255*E))).toString(16).padStart(2,"0")}class k{constructor(){S(this,R,0)}getId(){return`${s.AnnotationEditorPrefix}${Es(this,R)._++}`}}R=new WeakMap;const $=class ${constructor(){S(this,V);S(this,Z,(0,s.getUuid)());S(this,L,0);S(this,H,null)}static get _isSVGFittingCanvas(){const r='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',v=new OffscreenCanvas(1,3).getContext("2d"),O=new Image;O.src=r;const q=O.decode().then(()=>(v.drawImage(O,0,0,1,1,0,0,1,3),new Uint32Array(v.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",q)}async getFromFile(r){const{lastModified:v,name:O,size:q,type:st}=r;return U(this,V,ja).call(this,`${v}_${O}_${q}_${st}`,r)}async getFromUrl(r){return U(this,V,ja).call(this,r,r)}async getFromId(r){i(this,H)||W(this,H,new Map);const v=i(this,H).get(r);return v?v.bitmap?(v.refCounter+=1,v):v.file?this.getFromFile(v.file):this.getFromUrl(v.url):null}getSvgUrl(r){const v=i(this,H).get(r);return v!=null&&v.isSvg?v.svgUrl:null}deleteId(r){i(this,H)||W(this,H,new Map);const v=i(this,H).get(r);v&&(v.refCounter-=1,v.refCounter===0&&(v.bitmap=null))}isValidId(r){return r.startsWith(`image_${i(this,Z)}_`)}};Z=new WeakMap,L=new WeakMap,H=new WeakMap,V=new WeakSet,ja=async function(r,v){i(this,H)||W(this,H,new Map);let O=i(this,H).get(r);if(O===null)return null;if(O!=null&&O.bitmap)return O.refCounter+=1,O;try{O||(O={bitmap:null,id:`image_${i(this,Z)}_${Es(this,L)._++}`,refCounter:0,isSvg:!1});let q;if(typeof v=="string"?(O.url=v,q=await(0,o.fetchData)(v,"blob")):q=O.file=v,q.type==="image/svg+xml"){const st=$._isSVGFittingCanvas,at=new FileReader,yt=new Image,kt=new Promise((Ct,Wt)=>{yt.onload=()=>{O.bitmap=yt,O.isSvg=!0,Ct()},at.onload=async()=>{const Bt=O.svgUrl=at.result;yt.src=await st?`${Bt}#svgView(preserveAspectRatio(none))`:Bt},yt.onerror=at.onerror=Wt});at.readAsDataURL(q),await kt}else O.bitmap=await createImageBitmap(q);O.refCounter=1}catch(q){console.error(q),O=null}return i(this,H).set(r,O),O&&i(this,H).set(O.id,O),O};let w=$;class T{constructor(r=128){S(this,D,[]);S(this,Y,!1);S(this,C,void 0);S(this,B,-1);W(this,C,r)}add({cmd:r,undo:v,mustExec:O,type:q=NaN,overwriteIfSameType:st=!1,keepUndo:at=!1}){if(O&&r(),i(this,Y))return;const yt={cmd:r,undo:v,type:q};if(i(this,B)===-1){i(this,D).length>0&&(i(this,D).length=0),W(this,B,0),i(this,D).push(yt);return}if(st&&i(this,D)[i(this,B)].type===q){at&&(yt.undo=i(this,D)[i(this,B)].undo),i(this,D)[i(this,B)]=yt;return}const kt=i(this,B)+1;kt===i(this,C)?i(this,D).splice(0,1):(W(this,B,kt),kt<i(this,D).length&&i(this,D).splice(kt)),i(this,D).push(yt)}undo(){i(this,B)!==-1&&(W(this,Y,!0),i(this,D)[i(this,B)].undo(),W(this,Y,!1),W(this,B,i(this,B)-1))}redo(){i(this,B)<i(this,D).length-1&&(W(this,B,i(this,B)+1),W(this,Y,!0),i(this,D)[i(this,B)].cmd(),W(this,Y,!1))}hasSomethingToUndo(){return i(this,B)!==-1}hasSomethingToRedo(){return i(this,B)<i(this,D).length-1}destroy(){W(this,D,null)}}D=new WeakMap,Y=new WeakMap,C=new WeakMap,B=new WeakMap;class _{constructor(r){S(this,J);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:v}=s.FeatureTest.platform;for(const[O,q,st={}]of r)for(const at of O){const yt=at.startsWith("mac+");v&&yt?(this.callbacks.set(at.slice(4),{callback:q,options:st}),this.allKeys.add(at.split("+").at(-1))):!v&&!yt&&(this.callbacks.set(at,{callback:q,options:st}),this.allKeys.add(at.split("+").at(-1)))}}exec(r,v){if(!this.allKeys.has(v.key))return;const O=this.callbacks.get(U(this,J,fh).call(this,v));if(!O)return;const{callback:q,options:{bubbles:st=!1,args:at=[],checker:yt=null}}=O;yt&&!yt(r,v)||(q.bind(r,...at,v)(),st||(v.stopPropagation(),v.preventDefault()))}}J=new WeakSet,fh=function(r){r.altKey&&this.buffer.push("alt"),r.ctrlKey&&this.buffer.push("ctrl"),r.metaKey&&this.buffer.push("meta"),r.shiftKey&&this.buffer.push("shift"),this.buffer.push(r.key);const v=this.buffer.join("+");return this.buffer.length=0,v};const Q=class Q{get _colors(){const r=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(r),(0,s.shadow)(this,"_colors",r)}convert(r){const v=(0,o.getRGB)(r);if(!window.matchMedia("(forced-colors: active)").matches)return v;for(const[O,q]of this._colors)if(q.every((st,at)=>st===v[at]))return Q._colorsMapping.get(O);return v}getHexCode(r){const v=this._colors.get(r);return v?s.Util.makeHexColor(...v):r}};we(Q,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let I=Q;const Mt=class Mt{constructor(r,v,O,q,st,at,yt){S(this,rt);S(this,ft);S(this,Tt);S(this,xt);S(this,nt);S(this,K);S(this,ct);S(this,Et);S(this,te);S(this,_e);S(this,re);S(this,ot);S(this,mt);S(this,ut,null);S(this,wt,new Map);S(this,jt,new Map);S(this,Nt,null);S(this,Ft,null);S(this,Pt,new T);S(this,Yt,0);S(this,Ht,new Set);S(this,ue,null);S(this,ie,null);S(this,Jt,new Set);S(this,Vt,null);S(this,ne,null);S(this,$t,null);S(this,ce,new k);S(this,Zt,!1);S(this,oe,!1);S(this,qt,null);S(this,Ae,null);S(this,pe,s.AnnotationEditorType.NONE);S(this,se,new Set);S(this,le,null);S(this,z,this.blur.bind(this));S(this,b,this.focus.bind(this));S(this,a,this.copy.bind(this));S(this,l,this.cut.bind(this));S(this,u,this.paste.bind(this));S(this,x,this.keydown.bind(this));S(this,A,this.onEditingAction.bind(this));S(this,y,this.onPageChanging.bind(this));S(this,f,this.onScaleChanging.bind(this));S(this,d,this.onRotationChanging.bind(this));S(this,c,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});S(this,g,[0,0]);S(this,M,null);S(this,G,null);S(this,et,null);W(this,G,r),W(this,et,v),W(this,Nt,O),this._eventBus=q,this._eventBus._on("editingaction",i(this,A)),this._eventBus._on("pagechanging",i(this,y)),this._eventBus._on("scalechanging",i(this,f)),this._eventBus._on("rotationchanging",i(this,d)),W(this,Ft,st.annotationStorage),W(this,Vt,st.filterFactory),W(this,le,at),W(this,$t,yt||null),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const r=Mt.prototype,v=at=>i(at,G).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&at.hasSomethingToControl(),O=(at,{target:yt})=>{if(yt instanceof HTMLInputElement){const{type:kt}=yt;return kt!=="text"&&kt!=="number"}return!0},q=this.TRANSLATE_SMALL,st=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new _([[["ctrl+a","mac+meta+a"],r.selectAll,{checker:O}],[["ctrl+z","mac+meta+z"],r.undo,{checker:O}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],r.redo,{checker:O}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],r.delete,{checker:O}],[["Enter","mac+Enter"],r.addNewEditorFromKeyboard,{checker:(at,{target:yt})=>!(yt instanceof HTMLButtonElement)&&i(at,G).contains(yt)&&!at.isEnterHandled}],[[" ","mac+ "],r.addNewEditorFromKeyboard,{checker:at=>i(at,G).contains(document.activeElement)}],[["Escape","mac+Escape"],r.unselectAll],[["ArrowLeft","mac+ArrowLeft"],r.translateSelectedEditors,{args:[-q,0],checker:v}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r.translateSelectedEditors,{args:[-st,0],checker:v}],[["ArrowRight","mac+ArrowRight"],r.translateSelectedEditors,{args:[q,0],checker:v}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r.translateSelectedEditors,{args:[st,0],checker:v}],[["ArrowUp","mac+ArrowUp"],r.translateSelectedEditors,{args:[0,-q],checker:v}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r.translateSelectedEditors,{args:[0,-st],checker:v}],[["ArrowDown","mac+ArrowDown"],r.translateSelectedEditors,{args:[0,q],checker:v}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r.translateSelectedEditors,{args:[0,st],checker:v}]]))}destroy(){var r;U(this,xt,ar).call(this),U(this,ft,Va).call(this),this._eventBus._off("editingaction",i(this,A)),this._eventBus._off("pagechanging",i(this,y)),this._eventBus._off("scalechanging",i(this,f)),this._eventBus._off("rotationchanging",i(this,d));for(const v of i(this,jt).values())v.destroy();i(this,jt).clear(),i(this,wt).clear(),i(this,Jt).clear(),W(this,ut,null),i(this,se).clear(),i(this,Pt).destroy(),(r=i(this,Nt))==null||r.destroy(),i(this,ne)&&(clearTimeout(i(this,ne)),W(this,ne,null)),i(this,M)&&(clearTimeout(i(this,M)),W(this,M,null))}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",i(this,le)?i(this,Vt).addHCMFilter(i(this,le).foreground,i(this,le).background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(i(this,G)).direction)}get highlightColors(){return(0,s.shadow)(this,"highlightColors",i(this,$t)?new Map(i(this,$t).split(",").map(r=>r.split("=").map(v=>v.trim()))):null)}setMainHighlightColorPicker(r){W(this,Ae,r)}editAltText(r){var v;(v=i(this,Nt))==null||v.editAltText(this,r)}onPageChanging({pageNumber:r}){W(this,Yt,r-1)}focusMainContainer(){i(this,G).focus()}findParent(r,v){for(const O of i(this,jt).values()){const{x:q,y:st,width:at,height:yt}=O.div.getBoundingClientRect();if(r>=q&&r<=q+at&&v>=st&&v<=st+yt)return O}return null}disableUserSelect(r=!1){i(this,et).classList.toggle("noUserSelect",r)}addShouldRescale(r){i(this,Jt).add(r)}removeShouldRescale(r){i(this,Jt).delete(r)}onScaleChanging({scale:r}){this.commitOrRemove(),this.viewParameters.realScale=r*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const v of i(this,Jt))v.onScaleChanging()}onRotationChanging({pagesRotation:r}){this.commitOrRemove(),this.viewParameters.rotation=r}addToAnnotationStorage(r){!r.isEmpty()&&i(this,Ft)&&!i(this,Ft).has(r.id)&&i(this,Ft).setValue(r.id,r)}blur(){if(!this.hasSelection)return;const{activeElement:r}=document;for(const v of i(this,se))if(v.div.contains(r)){W(this,qt,[v,r]),v._focusEventsAllowed=!1;break}}focus(){if(!i(this,qt))return;const[r,v]=i(this,qt);W(this,qt,null),v.addEventListener("focusin",()=>{r._focusEventsAllowed=!0},{once:!0}),v.focus()}addEditListeners(){U(this,Tt,za).call(this),U(this,nt,Ha).call(this)}removeEditListeners(){U(this,xt,ar).call(this),U(this,K,qa).call(this)}copy(r){var O;if(r.preventDefault(),(O=i(this,ut))==null||O.commitOrRemove(),!this.hasSelection)return;const v=[];for(const q of i(this,se)){const st=q.serialize(!0);st&&v.push(st)}v.length!==0&&r.clipboardData.setData("application/pdfjs",JSON.stringify(v))}cut(r){this.copy(r),this.delete()}paste(r){r.preventDefault();const{clipboardData:v}=r;for(const st of v.items)for(const at of i(this,ie))if(at.isHandlingMimeForPasting(st.type)){at.paste(st,this.currentLayer);return}let O=v.getData("application/pdfjs");if(!O)return;try{O=JSON.parse(O)}catch(st){(0,s.warn)(`paste: "${st.message}".`);return}if(!Array.isArray(O))return;this.unselectAll();const q=this.currentLayer;try{const st=[];for(const kt of O){const Ct=q.deserialize(kt);if(!Ct)return;st.push(Ct)}const at=()=>{for(const kt of st)U(this,re,Wa).call(this,kt);U(this,mt,$a).call(this,st)},yt=()=>{for(const kt of st)kt.remove()};this.addCommands({cmd:at,undo:yt,mustExec:!0})}catch(st){(0,s.warn)(`paste: "${st.message}".`)}}keydown(r){this.isEditorHandlingKeyboard||Mt._keyboardManager.exec(this,r)}onEditingAction(r){["undo","redo","delete","selectAll"].includes(r.name)&&this[r.name]()}setEditingState(r){r?(U(this,rt,gh).call(this),U(this,Tt,za).call(this),U(this,nt,Ha).call(this),U(this,ct,ts).call(this,{isEditing:i(this,pe)!==s.AnnotationEditorType.NONE,isEmpty:U(this,ot,on).call(this),hasSomethingToUndo:i(this,Pt).hasSomethingToUndo(),hasSomethingToRedo:i(this,Pt).hasSomethingToRedo(),hasSelectedEditor:!1})):(U(this,ft,Va).call(this),U(this,xt,ar).call(this),U(this,K,qa).call(this),U(this,ct,ts).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(r){if(!i(this,ie)){W(this,ie,r);for(const v of i(this,ie))U(this,Et,an).call(this,v.defaultPropertiesToUpdate)}}getId(){return i(this,ce).getId()}get currentLayer(){return i(this,jt).get(i(this,Yt))}getLayer(r){return i(this,jt).get(r)}get currentPageIndex(){return i(this,Yt)}addLayer(r){i(this,jt).set(r.pageIndex,r),i(this,Zt)?r.enable():r.disable()}removeLayer(r){i(this,jt).delete(r.pageIndex)}updateMode(r,v=null,O=!1){if(i(this,pe)!==r){if(W(this,pe,r),r===s.AnnotationEditorType.NONE){this.setEditingState(!1),U(this,_e,vh).call(this);return}this.setEditingState(!0),U(this,te,mh).call(this),this.unselectAll();for(const q of i(this,jt).values())q.updateMode(r);if(!v&&O){this.addNewEditorFromKeyboard();return}if(v){for(const q of i(this,wt).values())if(q.annotationElementId===v){this.setSelected(q),q.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(r){r!==i(this,pe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:r})}updateParams(r,v){var O;if(i(this,ie)){switch(r){case s.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(O=i(this,Ae))==null||O.updateColor(v);break}for(const q of i(this,se))q.updateParams(r,v);for(const q of i(this,ie))q.updateDefaultParams(r,v)}}enableWaiting(r=!1){if(i(this,oe)!==r){W(this,oe,r);for(const v of i(this,jt).values())r?v.disableClick():v.enableClick(),v.div.classList.toggle("waiting",r)}}getEditors(r){const v=[];for(const O of i(this,wt).values())O.pageIndex===r&&v.push(O);return v}getEditor(r){return i(this,wt).get(r)}addEditor(r){i(this,wt).set(r.id,r)}removeEditor(r){var v;r.div.contains(document.activeElement)&&(i(this,ne)&&clearTimeout(i(this,ne)),W(this,ne,setTimeout(()=>{this.focusMainContainer(),W(this,ne,null)},0))),i(this,wt).delete(r.id),this.unselect(r),(!r.annotationElementId||!i(this,Ht).has(r.annotationElementId))&&((v=i(this,Ft))==null||v.remove(r.id))}addDeletedAnnotationElement(r){i(this,Ht).add(r.annotationElementId),r.deleted=!0}isDeletedAnnotationElement(r){return i(this,Ht).has(r)}removeDeletedAnnotationElement(r){i(this,Ht).delete(r.annotationElementId),r.deleted=!1}setActiveEditor(r){i(this,ut)!==r&&(W(this,ut,r),r&&U(this,Et,an).call(this,r.propertiesToUpdate))}toggleSelected(r){if(i(this,se).has(r)){i(this,se).delete(r),r.unselect(),U(this,ct,ts).call(this,{hasSelectedEditor:this.hasSelection});return}i(this,se).add(r),r.select(),U(this,Et,an).call(this,r.propertiesToUpdate),U(this,ct,ts).call(this,{hasSelectedEditor:!0})}setSelected(r){for(const v of i(this,se))v!==r&&v.unselect();i(this,se).clear(),i(this,se).add(r),r.select(),U(this,Et,an).call(this,r.propertiesToUpdate),U(this,ct,ts).call(this,{hasSelectedEditor:!0})}isSelected(r){return i(this,se).has(r)}get firstSelectedEditor(){return i(this,se).values().next().value}unselect(r){r.unselect(),i(this,se).delete(r),U(this,ct,ts).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return i(this,se).size!==0}get isEnterHandled(){return i(this,se).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){i(this,Pt).undo(),U(this,ct,ts).call(this,{hasSomethingToUndo:i(this,Pt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:U(this,ot,on).call(this)})}redo(){i(this,Pt).redo(),U(this,ct,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:i(this,Pt).hasSomethingToRedo(),isEmpty:U(this,ot,on).call(this)})}addCommands(r){i(this,Pt).add(r),U(this,ct,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:U(this,ot,on).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const r=[...i(this,se)],v=()=>{for(const q of r)q.remove()},O=()=>{for(const q of r)U(this,re,Wa).call(this,q)};this.addCommands({cmd:v,undo:O,mustExec:!0})}commitOrRemove(){var r;(r=i(this,ut))==null||r.commitOrRemove()}hasSomethingToControl(){return i(this,ut)||this.hasSelection}selectAll(){for(const r of i(this,se))r.commit();U(this,mt,$a).call(this,i(this,wt).values())}unselectAll(){if(!(i(this,ut)&&(i(this,ut).commitOrRemove(),i(this,pe)!==s.AnnotationEditorType.NONE))&&this.hasSelection){for(const r of i(this,se))r.unselect();i(this,se).clear(),U(this,ct,ts).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(r,v,O=!1){if(O||this.commitOrRemove(),!this.hasSelection)return;i(this,g)[0]+=r,i(this,g)[1]+=v;const[q,st]=i(this,g),at=[...i(this,se)];i(this,M)&&clearTimeout(i(this,M)),W(this,M,setTimeout(()=>{W(this,M,null),i(this,g)[0]=i(this,g)[1]=0,this.addCommands({cmd:()=>{for(const kt of at)i(this,wt).has(kt.id)&&kt.translateInPage(q,st)},undo:()=>{for(const kt of at)i(this,wt).has(kt.id)&&kt.translateInPage(-q,-st)},mustExec:!1})},1e3));for(const kt of at)kt.translateInPage(r,v)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),W(this,ue,new Map);for(const r of i(this,se))i(this,ue).set(r,{savedX:r.x,savedY:r.y,savedPageIndex:r.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!i(this,ue))return!1;this.disableUserSelect(!1);const r=i(this,ue);W(this,ue,null);let v=!1;for(const[{x:q,y:st,pageIndex:at},yt]of r)yt.newX=q,yt.newY=st,yt.newPageIndex=at,v||(v=q!==yt.savedX||st!==yt.savedY||at!==yt.savedPageIndex);if(!v)return!1;const O=(q,st,at,yt)=>{if(i(this,wt).has(q.id)){const kt=i(this,jt).get(yt);kt?q._setParentAndPosition(kt,st,at):(q.pageIndex=yt,q.x=st,q.y=at)}};return this.addCommands({cmd:()=>{for(const[q,{newX:st,newY:at,newPageIndex:yt}]of r)O(q,st,at,yt)},undo:()=>{for(const[q,{savedX:st,savedY:at,savedPageIndex:yt}]of r)O(q,st,at,yt)},mustExec:!0}),!0}dragSelectedEditors(r,v){if(i(this,ue))for(const O of i(this,ue).keys())O.drag(r,v)}rebuild(r){if(r.parent===null){const v=this.getLayer(r.pageIndex);v?(v.changeParent(r),v.addOrRebuild(r)):(this.addEditor(r),this.addToAnnotationStorage(r),r.rebuild())}else r.parent.addOrRebuild(r)}get isEditorHandlingKeyboard(){var r;return((r=this.getActive())==null?void 0:r.shouldGetKeyboardEvents())||i(this,se).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(r){return i(this,ut)===r}getActive(){return i(this,ut)}getMode(){return i(this,pe)}get imageManager(){return(0,s.shadow)(this,"imageManager",new w)}};ut=new WeakMap,wt=new WeakMap,jt=new WeakMap,Nt=new WeakMap,Ft=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,Ht=new WeakMap,ue=new WeakMap,ie=new WeakMap,Jt=new WeakMap,Vt=new WeakMap,ne=new WeakMap,$t=new WeakMap,ce=new WeakMap,Zt=new WeakMap,oe=new WeakMap,qt=new WeakMap,Ae=new WeakMap,pe=new WeakMap,se=new WeakMap,le=new WeakMap,z=new WeakMap,b=new WeakMap,a=new WeakMap,l=new WeakMap,u=new WeakMap,x=new WeakMap,A=new WeakMap,y=new WeakMap,f=new WeakMap,d=new WeakMap,c=new WeakMap,g=new WeakMap,M=new WeakMap,G=new WeakMap,et=new WeakMap,rt=new WeakSet,gh=function(){window.addEventListener("focus",i(this,b)),window.addEventListener("blur",i(this,z))},ft=new WeakSet,Va=function(){window.removeEventListener("focus",i(this,b)),window.removeEventListener("blur",i(this,z))},Tt=new WeakSet,za=function(){window.addEventListener("keydown",i(this,x))},xt=new WeakSet,ar=function(){window.removeEventListener("keydown",i(this,x))},nt=new WeakSet,Ha=function(){document.addEventListener("copy",i(this,a)),document.addEventListener("cut",i(this,l)),document.addEventListener("paste",i(this,u))},K=new WeakSet,qa=function(){document.removeEventListener("copy",i(this,a)),document.removeEventListener("cut",i(this,l)),document.removeEventListener("paste",i(this,u))},ct=new WeakSet,ts=function(r){Object.entries(r).some(([v,O])=>i(this,c)[v]!==O)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(i(this,c),r)})},Et=new WeakSet,an=function(r){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:r})},te=new WeakSet,mh=function(){if(!i(this,Zt)){W(this,Zt,!0);for(const r of i(this,jt).values())r.enable()}},_e=new WeakSet,vh=function(){if(this.unselectAll(),i(this,Zt)){W(this,Zt,!1);for(const r of i(this,jt).values())r.disable()}},re=new WeakSet,Wa=function(r){const v=i(this,jt).get(r.pageIndex);v?v.addOrRebuild(r):this.addEditor(r)},ot=new WeakSet,on=function(){if(i(this,wt).size===0)return!0;if(i(this,wt).size===1)for(const r of i(this,wt).values())return r.isEmpty();return!1},mt=new WeakSet,$a=function(r){i(this,se).clear();for(const v of r)v.isEmpty()||(i(this,se).add(v),v.select());U(this,ct,ts).call(this,{hasSelectedEditor:!0})},we(Mt,"TRANSLATE_SMALL",1),we(Mt,"TRANSLATE_BIG",10);let N=Mt},171:(t,e,n)=>{n.d(e,{PDFFetchStream:()=>w});var s=n(266),o=n(253);function h(I,N,R){return{method:"GET",headers:I,signal:R.signal,mode:"cors",credentials:N?"include":"same-origin",redirect:"follow"}}function m(I){const N=new Headers;for(const R in I){const Z=I[R];Z!==void 0&&N.append(R,Z)}return N}function k(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,s.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class w{constructor(N){this.source=N,this.isHttp=/^https?:/i.test(N.url),this.httpHeaders=this.isHttp&&N.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var N;return((N=this._fullRequestReader)==null?void 0:N._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(N,R){if(R<=this._progressiveDataLength)return null;const Z=new _(this,N,R);return this._rangeRequestReaders.push(Z),Z}cancelAllRequests(N){var R;(R=this._fullRequestReader)==null||R.cancel(N);for(const Z of this._rangeRequestReaders.slice(0))Z.cancel(N)}}class T{constructor(N){this._stream=N,this._reader=null,this._loaded=0,this._filename=null;const R=N.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=new s.PromiseCapability,this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=m(this._stream.httpHeaders);const Z=R.url;fetch(Z,h(this._headers,this._withCredentials,this._abortController)).then(L=>{if(!(0,o.validateResponseStatus)(L.status))throw(0,o.createResponseStatusError)(L.status,Z);this._reader=L.body.getReader(),this._headersCapability.resolve();const H=$=>L.headers.get($),{allowRangeRequests:V,suggestedLength:X}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:H,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=V,this._contentLength=X||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(H),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Z;await this._headersCapability.promise;const{value:N,done:R}=await this._reader.read();return R?{value:N,done:R}:(this._loaded+=N.byteLength,(Z=this.onProgress)==null||Z.call(this,{loaded:this._loaded,total:this._contentLength}),{value:k(N),done:!1})}cancel(N){var R;(R=this._reader)==null||R.cancel(N),this._abortController.abort()}}class _{constructor(N,R,Z){this._stream=N,this._reader=null,this._loaded=0;const L=N.source;this._withCredentials=L.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!L.disableStream,this._abortController=new AbortController,this._headers=m(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${Z-1}`);const H=L.url;fetch(H,h(this._headers,this._withCredentials,this._abortController)).then(V=>{if(!(0,o.validateResponseStatus)(V.status))throw(0,o.createResponseStatusError)(V.status,H);this._readCapability.resolve(),this._reader=V.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Z;await this._readCapability.promise;const{value:N,done:R}=await this._reader.read();return R?{value:N,done:R}:(this._loaded+=N.byteLength,(Z=this.onProgress)==null||Z.call(this,{loaded:this._loaded}),{value:k(N),done:!1})}cancel(N){var R;(R=this._reader)==null||R.cancel(N),this._abortController.abort()}}},742:(t,e,n)=>{var m;n.d(e,{FontFaceObject:()=>h,FontLoader:()=>o});var s=n(266);class o{constructor({ownerDocument:w=globalThis.document,styleElement:T=null}){S(this,m,new Set);this._document=w,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(w){this.nativeFontFaces.add(w),this._document.fonts.add(w)}removeNativeFontFace(w){this.nativeFontFaces.delete(w),this._document.fonts.delete(w)}insertRule(w){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const T=this.styleElement.sheet;T.insertRule(w,T.cssRules.length)}clear(){for(const w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.clear(),i(this,m).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:w,_inspectFont:T}){if(!(!w||i(this,m).has(w.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:I,style:N}=w,R=new FontFace(_,I,N);this.addNativeFontFace(R);try{await R.load(),i(this,m).add(_),T==null||T(w)}catch{(0,s.warn)(`Cannot load system font: ${w.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(R)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(w){if(w.attached||w.missingFile&&!w.systemFontInfo)return;if(w.attached=!0,w.systemFontInfo){await this.loadSystemFont(w);return}if(this.isFontLoadingAPISupported){const _=w.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(I){throw(0,s.warn)(`Failed to load font '${_.family}': '${I}'.`),w.disableFontFace=!0,I}}return}const T=w.createFontFaceRule();if(T){if(this.insertRule(T),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const I=this._queueLoadingCallback(_);this._prepareFontLoadEvent(w,I)})}}get isFontLoadingAPISupported(){var T;const w=!!((T=this._document)!=null&&T.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",w)}get isSyncFontLoadingSupported(){let w=!1;return(s.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(w=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){function T(){for((0,s.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;_.length>0&&_[0].done;){const N=_.shift();setTimeout(N.callback,0)}}const{loadingRequests:_}=this,I={done:!1,complete:T,callback:w};return _.push(I),I}get _loadTestFont(){const w=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",w)}_prepareFontLoadEvent(w,T){function _(Q,ut){return Q.charCodeAt(ut)<<24|Q.charCodeAt(ut+1)<<16|Q.charCodeAt(ut+2)<<8|Q.charCodeAt(ut+3)&255}function I(Q,ut,wt,jt){const Nt=Q.substring(0,ut),Ft=Q.substring(ut+wt);return Nt+jt+Ft}let N,R;const Z=this._document.createElement("canvas");Z.width=1,Z.height=1;const L=Z.getContext("2d");let H=0;function V(Q,ut){if(++H>30){(0,s.warn)("Load test font never loaded."),ut();return}if(L.font="30px "+Q,L.fillText(".",0,20),L.getImageData(0,0,1,1).data[3]>0){ut();return}setTimeout(V.bind(null,Q,ut))}const X=`lt${Date.now()}${this.loadTestFontId++}`;let $=this._loadTestFont;$=I($,976,X.length,X);const D=16,Y=1482184792;let C=_($,D);for(N=0,R=X.length-3;N<R;N+=4)C=C-Y+_(X,N)|0;N<X.length&&(C=C-Y+_(X+"XXX",N)|0),$=I($,D,4,(0,s.string32)(C));const B=`url(data:font/opentype;base64,${btoa($)});`,J=`@font-face {font-family:"${X}";src:${B}}`;this.insertRule(J);const lt=this._document.createElement("div");lt.style.visibility="hidden",lt.style.width=lt.style.height="10px",lt.style.position="absolute",lt.style.top=lt.style.left="0px";for(const Q of[w.loadedName,X]){const ut=this._document.createElement("span");ut.textContent="Hi",ut.style.fontFamily=Q,lt.append(ut)}this._document.body.append(lt),V(X,()=>{lt.remove(),T.complete()})}}m=new WeakMap;class h{constructor(w,{isEvalSupported:T=!0,disableFontFace:_=!1,ignoreErrors:I=!1,inspectFont:N=null}){this.compiledGlyphs=Object.create(null);for(const R in w)this[R]=w[R];this.isEvalSupported=T!==!1,this.disableFontFace=_===!0,this.ignoreErrors=I===!0,this._inspectFont=N}createNativeFontFace(){var T;if(!this.data||this.disableFontFace)return null;let w;if(!this.cssFontInfo)w=new FontFace(this.loadedName,this.data,{});else{const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}return(T=this._inspectFont)==null||T.call(this,this),w}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const w=(0,s.bytesToString)(this.data),T=`url(data:${this.mimetype};base64,${btoa(w)});`;let _;if(!this.cssFontInfo)_=`@font-face {font-family:"${this.loadedName}";src:${T}}`;else{let N=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(N+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${N}src:${T}}`}return(I=this._inspectFont)==null||I.call(this,this,T),_}getPathGenerator(w,T){if(this.compiledGlyphs[T]!==void 0)return this.compiledGlyphs[T];let _;try{_=w.get(this.loadedName+"_path_"+T)}catch(I){if(!this.ignoreErrors)throw I;return(0,s.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[T]=function(N,R){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const I=[];for(const N of _){const R=N.args!==void 0?N.args.join(","):"";I.push("c.",N.cmd,"(",R,`);
`)}return this.compiledGlyphs[T]=new Function("c","size",I.join(""))}return this.compiledGlyphs[T]=function(I,N){for(const R of _)R.cmd==="scale"&&(R.args=[N,-N]),I[R.cmd].apply(I,R.args)}}}},472:(t,e,n)=>{var h,m;n.d(e,{Metadata:()=>o});var s=n(266);class o{constructor({parsedData:w,rawData:T}){S(this,h,void 0);S(this,m,void 0);W(this,h,w),W(this,m,T)}getRaw(){return i(this,m)}get(w){return i(this,h).get(w)??null}getAll(){return(0,s.objectFromMap)(i(this,h))}has(w){return i(this,h).has(w)}}h=new WeakMap,m=new WeakMap},474:(t,e,n)=>{n.d(e,{PDFNetworkStream:()=>T});var s=n(266),o=n(253);const h=200,m=206;function k(N){const R=N.response;return typeof R!="string"?R:(0,s.stringToBytes)(R).buffer}class w{constructor(R,Z={}){this.url=R,this.isHttp=/^https?:/i.test(R),this.httpHeaders=this.isHttp&&Z.httpHeaders||Object.create(null),this.withCredentials=Z.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(R,Z,L){const H={begin:R,end:Z};for(const V in L)H[V]=L[V];return this.request(H)}requestFull(R){return this.request(R)}request(R){const Z=new XMLHttpRequest,L=this.currXhrId++,H=this.pendingRequests[L]={xhr:Z};Z.open("GET",this.url),Z.withCredentials=this.withCredentials;for(const V in this.httpHeaders){const X=this.httpHeaders[V];X!==void 0&&Z.setRequestHeader(V,X)}return this.isHttp&&"begin"in R&&"end"in R?(Z.setRequestHeader("Range",`bytes=${R.begin}-${R.end-1}`),H.expectedStatus=m):H.expectedStatus=h,Z.responseType="arraybuffer",R.onError&&(Z.onerror=function(V){R.onError(Z.status)}),Z.onreadystatechange=this.onStateChange.bind(this,L),Z.onprogress=this.onProgress.bind(this,L),H.onHeadersReceived=R.onHeadersReceived,H.onDone=R.onDone,H.onError=R.onError,H.onProgress=R.onProgress,Z.send(null),L}onProgress(R,Z){var H;const L=this.pendingRequests[R];L&&((H=L.onProgress)==null||H.call(L,Z))}onStateChange(R,Z){var $,D,Y;const L=this.pendingRequests[R];if(!L)return;const H=L.xhr;if(H.readyState>=2&&L.onHeadersReceived&&(L.onHeadersReceived(),delete L.onHeadersReceived),H.readyState!==4||!(R in this.pendingRequests))return;if(delete this.pendingRequests[R],H.status===0&&this.isHttp){($=L.onError)==null||$.call(L,H.status);return}const V=H.status||h;if(!(V===h&&L.expectedStatus===m)&&V!==L.expectedStatus){(D=L.onError)==null||D.call(L,H.status);return}const X=k(H);if(V===m){const C=H.getResponseHeader("Content-Range"),B=/bytes (\d+)-(\d+)\/(\d+)/.exec(C);L.onDone({begin:parseInt(B[1],10),chunk:X})}else X?L.onDone({begin:0,chunk:X}):(Y=L.onError)==null||Y.call(L,H.status)}getRequestXhr(R){return this.pendingRequests[R].xhr}isPendingRequest(R){return R in this.pendingRequests}abortRequest(R){const Z=this.pendingRequests[R].xhr;delete this.pendingRequests[R],Z.abort()}}class T{constructor(R){this._source=R,this._manager=new w(R.url,{httpHeaders:R.httpHeaders,withCredentials:R.withCredentials}),this._rangeChunkSize=R.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(R){const Z=this._rangeRequestReaders.indexOf(R);Z>=0&&this._rangeRequestReaders.splice(Z,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _(this._manager,this._source),this._fullRequestReader}getRangeReader(R,Z){const L=new I(this._manager,R,Z);return L.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(L),L}cancelAllRequests(R){var Z;(Z=this._fullRequestReader)==null||Z.cancel(R);for(const L of this._rangeRequestReaders.slice(0))L.cancel(R)}}class _{constructor(R,Z){this._manager=R;const L={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Z.url,this._fullRequestId=R.requestFull(L),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=Z.disableRange||!1,this._contentLength=Z.length,this._rangeChunkSize=Z.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const R=this._fullRequestId,Z=this._manager.getRequestXhr(R),L=X=>Z.getResponseHeader(X),{allowRangeRequests:H,suggestedLength:V}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:L,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});H&&(this._isRangeSupported=!0),this._contentLength=V||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(L),this._isRangeSupported&&this._manager.abortRequest(R),this._headersReceivedCapability.resolve()}_onDone(R){if(R&&(this._requests.length>0?this._requests.shift().resolve({value:R.chunk,done:!1}):this._cachedChunks.push(R.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Z of this._requests)Z.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(R){this._storedError=(0,o.createResponseStatusError)(R,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Z of this._requests)Z.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(R){var Z;(Z=this.onProgress)==null||Z.call(this,{loaded:R.loaded,total:R.lengthComputable?R.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const R=new s.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0,this._headersReceivedCapability.reject(R);for(const Z of this._requests)Z.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(R,Z,L){this._manager=R;const H={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._requestId=R.requestRange(Z,L,H),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var R;(R=this.onClosed)==null||R.call(this,this)}_onDone(R){const Z=R.chunk;this._requests.length>0?this._requests.shift().resolve({value:Z,done:!1}):this._queuedChunk=Z,this._done=!0;for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(R){this._storedError=(0,o.createResponseStatusError)(R,this._url);for(const Z of this._requests)Z.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(R){var Z;this.isStreamingSupported||((Z=this.onProgress)==null||Z.call(this,{loaded:R.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Z=this._queuedChunk;return this._queuedChunk=null,{value:Z,done:!1}}if(this._done)return{value:void 0,done:!0};const R=new s.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const Z of this._requests)Z.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},253:(t,e,n)=>{n.d(e,{createResponseStatusError:()=>w,extractFilenameFromHeader:()=>k,validateRangeRequestCapabilities:()=>m,validateResponseStatus:()=>T});var s=n(266);function o(_){let I=!0,N=R("filename\\*","i").exec(_);if(N){N=N[1];let D=V(N);return D=unescape(D),D=X(D),D=$(D),L(D)}if(N=H(_),N){const D=$(N);return L(D)}if(N=R("filename","i").exec(_),N){N=N[1];let D=V(N);return D=$(D),L(D)}function R(D,Y){return new RegExp("(?:^|;)\\s*"+D+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Y)}function Z(D,Y){if(D){if(!/^[\x00-\xFF]+$/.test(Y))return Y;try{const C=new TextDecoder(D,{fatal:!0}),B=(0,s.stringToBytes)(Y);Y=C.decode(B),I=!1}catch{}}return Y}function L(D){return I&&/[\x80-\xff]/.test(D)&&(D=Z("utf-8",D),I&&(D=Z("iso-8859-1",D))),D}function H(D){const Y=[];let C;const B=R("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(C=B.exec(D))!==null;){let[,lt,Q,ut]=C;if(lt=parseInt(lt,10),lt in Y){if(lt===0)break;continue}Y[lt]=[Q,ut]}const J=[];for(let lt=0;lt<Y.length&&lt in Y;++lt){let[Q,ut]=Y[lt];ut=V(ut),Q&&(ut=unescape(ut),lt===0&&(ut=X(ut))),J.push(ut)}return J.join("")}function V(D){if(D.startsWith('"')){const Y=D.slice(1).split('\\"');for(let C=0;C<Y.length;++C){const B=Y[C].indexOf('"');B!==-1&&(Y[C]=Y[C].slice(0,B),Y.length=C+1),Y[C]=Y[C].replaceAll(/\\(.)/g,"$1")}D=Y.join('"')}return D}function X(D){const Y=D.indexOf("'");if(Y===-1)return D;const C=D.slice(0,Y),B=D.slice(Y+1).replace(/^[^']*'/,"");return Z(C,B)}function $(D){return!D.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(D)?D:D.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Y,C,B,J){if(B==="q"||B==="Q")return J=J.replaceAll("_"," "),J=J.replaceAll(/=([0-9a-fA-F]{2})/g,function(lt,Q){return String.fromCharCode(parseInt(Q,16))}),Z(C,J);try{J=atob(J)}catch{}return Z(C,J)})}return""}var h=n(473);function m({getResponseHeader:_,isHttp:I,rangeChunkSize:N,disableRange:R}){const Z={allowRangeRequests:!1,suggestedLength:void 0},L=parseInt(_("Content-Length"),10);return!Number.isInteger(L)||(Z.suggestedLength=L,L<=2*N)||R||!I||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(Z.allowRangeRequests=!0),Z}function k(_){const I=_("Content-Disposition");if(I){let N=o(I);if(N.includes("%"))try{N=decodeURIComponent(N)}catch{}if((0,h.isPdfFile)(N))return N}return null}function w(_,I){return _===404||_===0&&I.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+I+'".'):new s.UnexpectedResponseException(`Unexpected server response (${_}) while retrieving PDF "${I}".`,_)}function T(_){return _===200||_===206}},498:(t,e,n)=>{n.a(t,async(s,o)=>{try{let k=function(Y){const C=N.parse(Y);return C.protocol==="file:"||C.host?C:/^[a-z]:[/\\]/i.test(Y)?N.parse(`file:///${Y}`):(C.host||(C.protocol="file:"),C)},w=function(Y,C){return{protocol:Y.protocol,auth:Y.auth,host:Y.hostname,port:Y.port,path:Y.path,method:"GET",headers:C}};n.d(e,{PDFNodeStream:()=>Z});var h=n(266),m=n(253);let T,_,I,N;h.isNodeJS&&(T=await Ls(()=>import("./__vite-browser-external-BIHI7g3E.js"),__vite__mapDeps([])),_=await Ls(()=>import("./__vite-browser-external-BIHI7g3E.js"),__vite__mapDeps([])),I=await Ls(()=>import("./__vite-browser-external-BIHI7g3E.js"),__vite__mapDeps([])),N=await Ls(()=>import("./__vite-browser-external-BIHI7g3E.js"),__vite__mapDeps([])));const R=/^file:\/\/\/[a-zA-Z]:\//;class Z{constructor(C){this.source=C,this.url=k(C.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new $(this):new V(this),this._fullRequestReader}getRangeReader(C,B){if(B<=this._progressiveDataLength)return null;const J=this.isFsUrl?new D(this,C,B):new X(this,C,B);return this._rangeRequestReaders.push(J),J}cancelAllRequests(C){var B;(B=this._fullRequestReader)==null||B.cancel(C);for(const J of this._rangeRequestReaders.slice(0))J.cancel(C)}}class L{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null;const B=C.source;this._contentLength=B.length,this._loaded=0,this._filename=null,this._disableRange=B.disableRange||!1,this._rangeChunkSize=B.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!B.disableStream,this._isRangeSupported=!B.disableRange,this._readableStream=null,this._readCapability=new h.PromiseCapability,this._headersCapability=new h.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var B;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=C.length,(B=this.onProgress)==null||B.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",B=>{this._error(B)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new h.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class H{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new h.PromiseCapability;const B=C.source;this._isStreamingSupported=!B.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var B;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=C.length,(B=this.onProgress)==null||B.call(this,{loaded:this._loaded}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",B=>{this._error(B)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class V extends L{constructor(C){super(C);const B=J=>{if(J.statusCode===404){const wt=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=wt,this._headersCapability.reject(wt);return}this._headersCapability.resolve(),this._setReadableStream(J);const lt=wt=>this._readableStream.headers[wt.toLowerCase()],{allowRangeRequests:Q,suggestedLength:ut}=(0,m.validateRangeRequestCapabilities)({getResponseHeader:lt,isHttp:C.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Q,this._contentLength=ut||this._contentLength,this._filename=(0,m.extractFilenameFromHeader)(lt)};this._request=null,this._url.protocol==="http:"?this._request=_.request(w(this._url,C.httpHeaders),B):this._request=I.request(w(this._url,C.httpHeaders),B),this._request.on("error",J=>{this._storedError=J,this._headersCapability.reject(J)}),this._request.end()}}class X extends H{constructor(C,B,J){super(C),this._httpHeaders={};for(const Q in C.httpHeaders){const ut=C.httpHeaders[Q];ut!==void 0&&(this._httpHeaders[Q]=ut)}this._httpHeaders.Range=`bytes=${B}-${J-1}`;const lt=Q=>{if(Q.statusCode===404){const ut=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ut;return}this._setReadableStream(Q)};this._request=null,this._url.protocol==="http:"?this._request=_.request(w(this._url,this._httpHeaders),lt):this._request=I.request(w(this._url,this._httpHeaders),lt),this._request.on("error",Q=>{this._storedError=Q}),this._request.end()}}class $ extends L{constructor(C){super(C);let B=decodeURIComponent(this._url.path);R.test(this._url.href)&&(B=B.replace(/^\//,"")),T.lstat(B,(J,lt)=>{if(J){J.code==="ENOENT"&&(J=new h.MissingPDFException(`Missing PDF "${B}".`)),this._storedError=J,this._headersCapability.reject(J);return}this._contentLength=lt.size,this._setReadableStream(T.createReadStream(B)),this._headersCapability.resolve()})}}class D extends H{constructor(C,B,J){super(C);let lt=decodeURIComponent(this._url.path);R.test(this._url.href)&&(lt=lt.replace(/^\//,"")),this._setReadableStream(T.createReadStream(lt,{start:B,end:J-1}))}}o()}catch(k){o(k)}},1)},738:(t,e,n)=>{n.a(t,async(s,o)=>{try{n.d(e,{NodeCMapReaderFactory:()=>R,NodeCanvasFactory:()=>N,NodeFilterFactory:()=>I,NodeStandardFontDataFactory:()=>Z});var h=n(822),m=n(266);let k,w,T;if(m.isNodeJS){k=await Ls(()=>import("./__vite-browser-external-BIHI7g3E.js"),__vite__mapDeps([]));try{w=await Ls(()=>import("./__vite-browser-external-BIHI7g3E.js"),__vite__mapDeps([]))}catch{}try{T=await Ls(()=>import("./path2d-polyfill.min-k9LGsq8g.js"),__vite__mapDeps([]))}catch{}}const _=function(L){return new Promise((H,V)=>{k.readFile(L,(X,$)=>{if(X||!$){V(new Error(X));return}H(new Uint8Array($))})})};class I extends h.BaseFilterFactory{}class N extends h.BaseCanvasFactory{_createCanvas(H,V){return w.createCanvas(H,V)}}class R extends h.BaseCMapReaderFactory{_fetchData(H,V){return _(H).then(X=>({cMapData:X,compressionType:V}))}}class Z extends h.BaseStandardFontDataFactory{_fetchData(H){return _(H)}}o()}catch(k){o(k)}},1)},890:(t,e,n)=>{var w,T,_,I,N,R,Ga;n.d(e,{OptionalContentConfig:()=>k});var s=n(266),o=n(825);const h=Symbol("INTERNAL");class m{constructor(H,V){S(this,w,!0);this.name=H,this.intent=V}get visible(){return i(this,w)}_setVisible(H,V){H!==h&&(0,s.unreachable)("Internal method `_setVisible` called."),W(this,w,V)}}w=new WeakMap;class k{constructor(H){S(this,R);S(this,T,null);S(this,_,new Map);S(this,I,null);S(this,N,null);if(this.name=null,this.creator=null,H!==null){this.name=H.name,this.creator=H.creator,W(this,N,H.order);for(const V of H.groups)i(this,_).set(V.id,new m(V.name,V.intent));if(H.baseState==="OFF")for(const V of i(this,_).values())V._setVisible(h,!1);for(const V of H.on)i(this,_).get(V)._setVisible(h,!0);for(const V of H.off)i(this,_).get(V)._setVisible(h,!1);W(this,I,this.getHash())}}isVisible(H){if(i(this,_).size===0)return!0;if(!H)return(0,s.warn)("Optional content group not defined."),!0;if(H.type==="OCG")return i(this,_).has(H.id)?i(this,_).get(H.id).visible:((0,s.warn)(`Optional content group not found: ${H.id}`),!0);if(H.type==="OCMD"){if(H.expression)return U(this,R,Ga).call(this,H.expression);if(!H.policy||H.policy==="AnyOn"){for(const V of H.ids){if(!i(this,_).has(V))return(0,s.warn)(`Optional content group not found: ${V}`),!0;if(i(this,_).get(V).visible)return!0}return!1}else if(H.policy==="AllOn"){for(const V of H.ids){if(!i(this,_).has(V))return(0,s.warn)(`Optional content group not found: ${V}`),!0;if(!i(this,_).get(V).visible)return!1}return!0}else if(H.policy==="AnyOff"){for(const V of H.ids){if(!i(this,_).has(V))return(0,s.warn)(`Optional content group not found: ${V}`),!0;if(!i(this,_).get(V).visible)return!0}return!1}else if(H.policy==="AllOff"){for(const V of H.ids){if(!i(this,_).has(V))return(0,s.warn)(`Optional content group not found: ${V}`),!0;if(i(this,_).get(V).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${H.policy}.`),!0}return(0,s.warn)(`Unknown group type ${H.type}.`),!0}setVisibility(H,V=!0){if(!i(this,_).has(H)){(0,s.warn)(`Optional content group not found: ${H}`);return}i(this,_).get(H)._setVisible(h,!!V),W(this,T,null)}get hasInitialVisibility(){return i(this,I)===null||this.getHash()===i(this,I)}getOrder(){return i(this,_).size?i(this,N)?i(this,N).slice():[...i(this,_).keys()]:null}getGroups(){return i(this,_).size>0?(0,s.objectFromMap)(i(this,_)):null}getGroup(H){return i(this,_).get(H)||null}getHash(){if(i(this,T)!==null)return i(this,T);const H=new o.MurmurHash3_64;for(const[V,X]of i(this,_))H.update(`${V}:${X.visible}`);return W(this,T,H.hexdigest())}}T=new WeakMap,_=new WeakMap,I=new WeakMap,N=new WeakMap,R=new WeakSet,Ga=function(H){const V=H.length;if(V<2)return!0;const X=H[0];for(let $=1;$<V;$++){const D=H[$];let Y;if(Array.isArray(D))Y=U(this,R,Ga).call(this,D);else if(i(this,_).has(D))Y=i(this,_).get(D).visible;else return(0,s.warn)(`Optional content group not found: ${D}`),!0;switch(X){case"And":if(!Y)return!1;break;case"Or":if(Y)return!0;break;case"Not":return!Y;default:return!0}}return X==="And"}},739:(t,e,n)=>{n.d(e,{renderTextLayer:()=>L,updateTextLayer:()=>H});var s=n(266),o=n(473);const h=1e5,m=30,k=.8,w=new Map;function T(V,X){let $;if(X&&s.FeatureTest.isOffscreenCanvasSupported)$=new OffscreenCanvas(V,V).getContext("2d",{alpha:!1});else{const D=document.createElement("canvas");D.width=D.height=V,$=D.getContext("2d",{alpha:!1})}return $}function _(V,X){const $=w.get(V);if($)return $;const D=T(m,X);D.font=`${m}px ${V}`;const Y=D.measureText("");let C=Y.fontBoundingBoxAscent,B=Math.abs(Y.fontBoundingBoxDescent);if(C){const lt=C/(C+B);return w.set(V,lt),D.canvas.width=D.canvas.height=0,lt}D.strokeStyle="red",D.clearRect(0,0,m,m),D.strokeText("g",0,0);let J=D.getImageData(0,0,m,m).data;B=0;for(let lt=J.length-1-3;lt>=0;lt-=4)if(J[lt]>0){B=Math.ceil(lt/4/m);break}D.clearRect(0,0,m,m),D.strokeText("A",0,m),J=D.getImageData(0,0,m,m).data,C=0;for(let lt=0,Q=J.length;lt<Q;lt+=4)if(J[lt]>0){C=m-Math.floor(lt/4/m);break}if(D.canvas.width=D.canvas.height=0,C){const lt=C/(C+B);return w.set(V,lt),lt}return w.set(V,k),k}function I(V,X,$){const D=document.createElement("span"),Y={angle:0,canvasWidth:0,hasText:X.str!=="",hasEOL:X.hasEOL,fontSize:0};V._textDivs.push(D);const C=s.Util.transform(V._transform,X.transform);let B=Math.atan2(C[1],C[0]);const J=$[X.fontName];J.vertical&&(B+=Math.PI/2);const lt=V._fontInspectorEnabled&&J.fontSubstitution||J.fontFamily,Q=Math.hypot(C[2],C[3]),ut=Q*_(lt,V._isOffscreenCanvasSupported);let wt,jt;B===0?(wt=C[4],jt=C[5]-ut):(wt=C[4]+ut*Math.sin(B),jt=C[5]-ut*Math.cos(B));const Nt="calc(var(--scale-factor)*",Ft=D.style;V._container===V._rootContainer?(Ft.left=`${(100*wt/V._pageWidth).toFixed(2)}%`,Ft.top=`${(100*jt/V._pageHeight).toFixed(2)}%`):(Ft.left=`${Nt}${wt.toFixed(2)}px)`,Ft.top=`${Nt}${jt.toFixed(2)}px)`),Ft.fontSize=`${Nt}${Q.toFixed(2)}px)`,Ft.fontFamily=lt,Y.fontSize=Q,D.setAttribute("role","presentation"),D.textContent=X.str,D.dir=X.dir,V._fontInspectorEnabled&&(D.dataset.fontName=J.fontSubstitutionLoadedName||X.fontName),B!==0&&(Y.angle=B*(180/Math.PI));let Pt=!1;if(X.str.length>1)Pt=!0;else if(X.str!==" "&&X.transform[0]!==X.transform[3]){const Yt=Math.abs(X.transform[0]),Ht=Math.abs(X.transform[3]);Yt!==Ht&&Math.max(Yt,Ht)/Math.min(Yt,Ht)>1.5&&(Pt=!0)}Pt&&(Y.canvasWidth=J.vertical?X.height:X.width),V._textDivProperties.set(D,Y),V._isReadableStream&&V._layoutText(D)}function N(V){const{div:X,scale:$,properties:D,ctx:Y,prevFontSize:C,prevFontFamily:B}=V,{style:J}=X;let lt="";if(D.canvasWidth!==0&&D.hasText){const{fontFamily:Q}=J,{canvasWidth:ut,fontSize:wt}=D;(C!==wt||B!==Q)&&(Y.font=`${wt*$}px ${Q}`,V.prevFontSize=wt,V.prevFontFamily=Q);const{width:jt}=Y.measureText(X.textContent);jt>0&&(lt=`scaleX(${ut*$/jt})`)}D.angle!==0&&(lt=`rotate(${D.angle}deg) ${lt}`),lt.length>0&&(J.transform=lt)}function R(V){if(V._canceled)return;const X=V._textDivs,$=V._capability;if(X.length>h){$.resolve();return}if(!V._isReadableStream)for(const D of X)V._layoutText(D);$.resolve()}class Z{constructor({textContentSource:X,container:$,viewport:D,textDivs:Y,textDivProperties:C,textContentItemsStr:B,isOffscreenCanvasSupported:J}){var jt;this._textContentSource=X,this._isReadableStream=X instanceof ReadableStream,this._container=this._rootContainer=$,this._textDivs=Y||[],this._textContentItemsStr=B||[],this._isOffscreenCanvasSupported=J,this._fontInspectorEnabled=!!((jt=globalThis.FontInspector)!=null&&jt.enabled),this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:D.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T(0,J)};const{pageWidth:lt,pageHeight:Q,pageX:ut,pageY:wt}=D.rawDims;this._transform=[1,0,0,-1,-ut,wt+Q],this._pageWidth=lt,this._pageHeight=Q,(0,o.setLayerDimensions)($,D),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(X,$){for(const D of X){if(D.str===void 0){if(D.type==="beginMarkedContentProps"||D.type==="beginMarkedContent"){const Y=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),D.id!==null&&this._container.setAttribute("id",`${D.id}`),Y.append(this._container)}else D.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(D.str),I(this,D,$)}}_layoutText(X){const $=this._layoutTextParams.properties=this._textDivProperties.get(X);if(this._layoutTextParams.div=X,N(this._layoutTextParams),$.hasText&&this._container.append(X),$.hasEOL){const D=document.createElement("br");D.setAttribute("role","presentation"),this._container.append(D)}}_render(){const X=new s.PromiseCapability;let $=Object.create(null);if(this._isReadableStream){const D=()=>{this._reader.read().then(({value:Y,done:C})=>{if(C){X.resolve();return}Object.assign($,Y.styles),this._processItems(Y.items,$),D()},X.reject)};this._reader=this._textContentSource.getReader(),D()}else if(this._textContentSource){const{items:D,styles:Y}=this._textContentSource;this._processItems(D,Y),X.resolve()}else throw new Error('No "textContentSource" parameter specified.');X.promise.then(()=>{$=null,R(this)},this._capability.reject)}}function L(V){const X=new Z(V);return X._render(),X}function H({container:V,viewport:X,textDivs:$,textDivProperties:D,isOffscreenCanvasSupported:Y,mustRotate:C=!0,mustRescale:B=!0}){if(C&&(0,o.setLayerDimensions)(V,{rotation:X.rotation}),B){const J=T(0,Y),lt={prevFontSize:null,prevFontFamily:null,div:null,scale:X.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:J};for(const Q of $)lt.properties=D.get(Q),lt.div=Q,N(lt)}}},92:(t,e,n)=>{n.d(e,{PDFDataTransportStream:()=>h});var s=n(266),o=n(473);class h{constructor({length:T,initialData:_,progressiveDone:I=!1,contentDispositionFilename:N=null,disableRange:R=!1,disableStream:Z=!1},L){if((0,s.assert)(L,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=N,(_==null?void 0:_.length)>0){const H=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;this._queuedChunks.push(H)}this._pdfDataRangeTransport=L,this._isStreamingSupported=!Z,this._isRangeSupported=!R,this._contentLength=T,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((H,V)=>{this._onReceiveData({begin:H,chunk:V})}),this._pdfDataRangeTransport.addProgressListener((H,V)=>{this._onProgress({loaded:H,total:V})}),this._pdfDataRangeTransport.addProgressiveReadListener(H=>{this._onReceiveData({chunk:H})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:T,chunk:_}){const I=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;if(T===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const N=this._rangeReaders.some(function(R){return R._begin!==T?!1:(R._enqueue(I),!0)});(0,s.assert)(N,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var T;return((T=this._fullRequestReader)==null?void 0:T._loaded)??0}_onProgress(T){var _,I,N,R;T.total===void 0?(I=(_=this._rangeReaders[0])==null?void 0:_.onProgress)==null||I.call(_,{loaded:T.loaded}):(R=(N=this._fullRequestReader)==null?void 0:N.onProgress)==null||R.call(N,{loaded:T.loaded,total:T.total})}_onProgressiveDone(){var T;(T=this._fullRequestReader)==null||T.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(T){const _=this._rangeReaders.indexOf(T);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const T=this._queuedChunks;return this._queuedChunks=null,new m(this,T,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(T,_){if(_<=this._progressiveDataLength)return null;const I=new k(this,T,_);return this._pdfDataRangeTransport.requestDataRange(T,_),this._rangeReaders.push(I),I}cancelAllRequests(T){var _;(_=this._fullRequestReader)==null||_.cancel(T);for(const I of this._rangeReaders.slice(0))I.cancel(T);this._pdfDataRangeTransport.abort()}}class m{constructor(T,_,I=!1,N=null){this._stream=T,this._done=I||!1,this._filename=(0,o.isPdfFile)(N)?N:null,this._queuedChunks=_||[],this._loaded=0;for(const R of this._queuedChunks)this._loaded+=R.byteLength;this._requests=[],this._headersReady=Promise.resolve(),T._fullRequestReader=this,this.onProgress=null}_enqueue(T){this._done||(this._requests.length>0?this._requests.shift().resolve({value:T,done:!1}):this._queuedChunks.push(T),this._loaded+=T.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new s.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k{constructor(T,_,I){this._stream=T,this._begin=_,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(T){if(!this._done){if(this._requests.length===0)this._queuedChunk=T;else{this._requests.shift().resolve({value:T,done:!1});for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new s.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},368:(t,e,n)=>{n.d(e,{GlobalWorkerOptions:()=>s});const s=Object.create(null);s.workerPort=null,s.workerSrc=""},160:(t,e,n)=>{n.d(e,{XfaLayer:()=>o});var s=n(521);class o{static setupStorage(m,k,w,T,_){const I=T.getValue(k,{value:null});switch(w.name){case"textarea":if(I.value!==null&&(m.textContent=I.value),_==="print")break;m.addEventListener("input",N=>{T.setValue(k,{value:N.target.value})});break;case"input":if(w.attributes.type==="radio"||w.attributes.type==="checkbox"){if(I.value===w.attributes.xfaOn?m.setAttribute("checked",!0):I.value===w.attributes.xfaOff&&m.removeAttribute("checked"),_==="print")break;m.addEventListener("change",N=>{T.setValue(k,{value:N.target.checked?N.target.getAttribute("xfaOn"):N.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&m.setAttribute("value",I.value),_==="print")break;m.addEventListener("input",N=>{T.setValue(k,{value:N.target.value})})}break;case"select":if(I.value!==null){m.setAttribute("value",I.value);for(const N of w.children)N.attributes.value===I.value?N.attributes.selected=!0:N.attributes.hasOwnProperty("selected")&&delete N.attributes.selected}m.addEventListener("input",N=>{const R=N.target.options,Z=R.selectedIndex===-1?"":R[R.selectedIndex].value;T.setValue(k,{value:Z})});break}}static setAttributes({html:m,element:k,storage:w=null,intent:T,linkService:_}){const{attributes:I}=k,N=m instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${T}`);for(const[R,Z]of Object.entries(I))if(Z!=null)switch(R){case"class":Z.length&&m.setAttribute(R,Z.join(" "));break;case"dataId":break;case"id":m.setAttribute("data-element-id",Z);break;case"style":Object.assign(m.style,Z);break;case"textContent":m.textContent=Z;break;default:(!N||R!=="href"&&R!=="newWindow")&&m.setAttribute(R,Z)}N&&_.addLinkAttributes(m,I.href,I.newWindow),w&&I.dataId&&this.setupStorage(m,I.dataId,k,w)}static render(m){var H,V;const k=m.annotationStorage,w=m.linkService,T=m.xfaHtml,_=m.intent||"display",I=document.createElement(T.name);T.attributes&&this.setAttributes({html:I,element:T,intent:_,linkService:w});const N=_!=="richText",R=m.div;if(R.append(I),m.viewport){const X=`matrix(${m.viewport.transform.join(",")})`;R.style.transform=X}N&&R.setAttribute("class","xfaLayer xfaFont");const Z=[];if(T.children.length===0){if(T.value){const X=document.createTextNode(T.value);I.append(X),N&&s.XfaText.shouldBuildText(T.name)&&Z.push(X)}return{textDivs:Z}}const L=[[T,-1,I]];for(;L.length>0;){const[X,$,D]=L.at(-1);if($+1===X.children.length){L.pop();continue}const Y=X.children[++L.at(-1)[1]];if(Y===null)continue;const{name:C}=Y;if(C==="#text"){const J=document.createTextNode(Y.value);Z.push(J),D.append(J);continue}const B=(H=Y==null?void 0:Y.attributes)!=null&&H.xmlns?document.createElementNS(Y.attributes.xmlns,C):document.createElement(C);if(D.append(B),Y.attributes&&this.setAttributes({html:B,element:Y,storage:k,intent:_,linkService:w}),((V=Y.children)==null?void 0:V.length)>0)L.push([Y,-1,B]);else if(Y.value){const J=document.createTextNode(Y.value);N&&s.XfaText.shouldBuildText(C)&&Z.push(J),B.append(J)}}for(const X of R.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))X.setAttribute("readOnly",!0);return{textDivs:Z}}static update(m){const k=`matrix(${m.viewport.transform.join(",")})`;m.div.style.transform=k,m.div.hidden=!1}}},521:(t,e,n)=>{n.d(e,{XfaText:()=>s});class s{static textContent(h){const m=[],k={items:m,styles:Object.create(null)};function w(T){var N;if(!T)return;let _=null;const I=T.name;if(I==="#text")_=T.value;else if(s.shouldBuildText(I))(N=T==null?void 0:T.attributes)!=null&&N.textContent?_=T.attributes.textContent:T.value&&(_=T.value);else return;if(_!==null&&m.push({str:_}),!!T.children)for(const R of T.children)w(R)}return w(h),k}static shouldBuildText(h){return!(h==="textarea"||h==="input"||h==="option"||h==="select")}}},907:(t,e,n)=>{n.a(t,async(s,o)=>{try{n.d(e,{AbortException:()=>h.AbortException,AnnotationEditorLayer:()=>T.AnnotationEditorLayer,AnnotationEditorParamsType:()=>h.AnnotationEditorParamsType,AnnotationEditorType:()=>h.AnnotationEditorType,AnnotationEditorUIManager:()=>_.AnnotationEditorUIManager,AnnotationLayer:()=>I.AnnotationLayer,AnnotationMode:()=>h.AnnotationMode,CMapCompressionType:()=>h.CMapCompressionType,ColorPicker:()=>N.ColorPicker,DOMSVGFactory:()=>k.DOMSVGFactory,DrawLayer:()=>R.DrawLayer,FeatureTest:()=>h.FeatureTest,GlobalWorkerOptions:()=>Z.GlobalWorkerOptions,ImageKind:()=>h.ImageKind,InvalidPDFException:()=>h.InvalidPDFException,MissingPDFException:()=>h.MissingPDFException,OPS:()=>h.OPS,Outliner:()=>L.Outliner,PDFDataRangeTransport:()=>m.PDFDataRangeTransport,PDFDateString:()=>k.PDFDateString,PDFWorker:()=>m.PDFWorker,PasswordResponses:()=>h.PasswordResponses,PermissionFlag:()=>h.PermissionFlag,PixelsPerInch:()=>k.PixelsPerInch,PromiseCapability:()=>h.PromiseCapability,RenderingCancelledException:()=>k.RenderingCancelledException,UnexpectedResponseException:()=>h.UnexpectedResponseException,Util:()=>h.Util,VerbosityLevel:()=>h.VerbosityLevel,XfaLayer:()=>H.XfaLayer,build:()=>m.build,createValidAbsoluteUrl:()=>h.createValidAbsoluteUrl,fetchData:()=>k.fetchData,getDocument:()=>m.getDocument,getFilenameFromUrl:()=>k.getFilenameFromUrl,getPdfFilenameFromUrl:()=>k.getPdfFilenameFromUrl,getXfaPageViewport:()=>k.getXfaPageViewport,isDataScheme:()=>k.isDataScheme,isPdfFile:()=>k.isPdfFile,noContextMenu:()=>k.noContextMenu,normalizeUnicode:()=>h.normalizeUnicode,renderTextLayer:()=>w.renderTextLayer,setLayerDimensions:()=>k.setLayerDimensions,shadow:()=>h.shadow,updateTextLayer:()=>w.updateTextLayer,version:()=>m.version});var h=n(266),m=n(406),k=n(473),w=n(739),T=n(629),_=n(812),I=n(640),N=n(97),R=n(423),Z=n(368),L=n(405),H=n(160),V=s([m]);m=(V.then?(await V)():V)[0];const X="4.0.379",$="9e14d04fd";o()}catch(X){o(X)}})},694:(t,e,n)=>{var w,bh,_,Ah,N,or;n.d(e,{MessageHandler:()=>k});var s=n(266);const o={UNKNOWN:0,DATA:1,ERROR:2},h={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function m(Z){switch(Z instanceof Error||typeof Z=="object"&&Z!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Z.name){case"AbortException":return new s.AbortException(Z.message);case"MissingPDFException":return new s.MissingPDFException(Z.message);case"PasswordException":return new s.PasswordException(Z.message,Z.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(Z.message,Z.status);case"UnknownErrorException":return new s.UnknownErrorException(Z.message,Z.details);default:return new s.UnknownErrorException(Z.message,Z.toString())}}class k{constructor(L,H,V){S(this,w);S(this,_);S(this,N);this.sourceName=L,this.targetName=H,this.comObj=V,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=X=>{const $=X.data;if($.targetName!==this.sourceName)return;if($.stream){U(this,_,Ah).call(this,$);return}if($.callback){const Y=$.callbackId,C=this.callbackCapabilities[Y];if(!C)throw new Error(`Cannot resolve callback ${Y}`);if(delete this.callbackCapabilities[Y],$.callback===o.DATA)C.resolve($.data);else if($.callback===o.ERROR)C.reject(m($.reason));else throw new Error("Unexpected callback case");return}const D=this.actionHandler[$.action];if(!D)throw new Error(`Unknown action from worker: ${$.action}`);if($.callbackId){const Y=this.sourceName,C=$.sourceName;new Promise(function(B){B(D($.data))}).then(function(B){V.postMessage({sourceName:Y,targetName:C,callback:o.DATA,callbackId:$.callbackId,data:B})},function(B){V.postMessage({sourceName:Y,targetName:C,callback:o.ERROR,callbackId:$.callbackId,reason:m(B)})});return}if($.streamId){U(this,w,bh).call(this,$);return}D($.data)},V.addEventListener("message",this._onComObjOnMessage)}on(L,H){const V=this.actionHandler;if(V[L])throw new Error(`There is already an actionName called "${L}"`);V[L]=H}send(L,H,V){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:L,data:H},V)}sendWithPromise(L,H,V){const X=this.callbackId++,$=new s.PromiseCapability;this.callbackCapabilities[X]=$;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:L,callbackId:X,data:H},V)}catch(D){$.reject(D)}return $.promise}sendWithStream(L,H,V,X){const $=this.streamId++,D=this.sourceName,Y=this.targetName,C=this.comObj;return new ReadableStream({start:B=>{const J=new s.PromiseCapability;return this.streamControllers[$]={controller:B,startCall:J,pullCall:null,cancelCall:null,isClosed:!1},C.postMessage({sourceName:D,targetName:Y,action:L,streamId:$,data:H,desiredSize:B.desiredSize},X),J.promise},pull:B=>{const J=new s.PromiseCapability;return this.streamControllers[$].pullCall=J,C.postMessage({sourceName:D,targetName:Y,stream:h.PULL,streamId:$,desiredSize:B.desiredSize}),J.promise},cancel:B=>{(0,s.assert)(B instanceof Error,"cancel must have a valid reason");const J=new s.PromiseCapability;return this.streamControllers[$].cancelCall=J,this.streamControllers[$].isClosed=!0,C.postMessage({sourceName:D,targetName:Y,stream:h.CANCEL,streamId:$,reason:m(B)}),J.promise}},V)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}w=new WeakSet,bh=function(L){const H=L.streamId,V=this.sourceName,X=L.sourceName,$=this.comObj,D=this,Y=this.actionHandler[L.action],C={enqueue(B,J=1,lt){if(this.isCancelled)return;const Q=this.desiredSize;this.desiredSize-=J,Q>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),$.postMessage({sourceName:V,targetName:X,stream:h.ENQUEUE,streamId:H,chunk:B},lt)},close(){this.isCancelled||(this.isCancelled=!0,$.postMessage({sourceName:V,targetName:X,stream:h.CLOSE,streamId:H}),delete D.streamSinks[H])},error(B){(0,s.assert)(B instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,$.postMessage({sourceName:V,targetName:X,stream:h.ERROR,streamId:H,reason:m(B)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:L.desiredSize,ready:null};C.sinkCapability.resolve(),C.ready=C.sinkCapability.promise,this.streamSinks[H]=C,new Promise(function(B){B(Y(L.data,C))}).then(function(){$.postMessage({sourceName:V,targetName:X,stream:h.START_COMPLETE,streamId:H,success:!0})},function(B){$.postMessage({sourceName:V,targetName:X,stream:h.START_COMPLETE,streamId:H,reason:m(B)})})},_=new WeakSet,Ah=function(L){const H=L.streamId,V=this.sourceName,X=L.sourceName,$=this.comObj,D=this.streamControllers[H],Y=this.streamSinks[H];switch(L.stream){case h.START_COMPLETE:L.success?D.startCall.resolve():D.startCall.reject(m(L.reason));break;case h.PULL_COMPLETE:L.success?D.pullCall.resolve():D.pullCall.reject(m(L.reason));break;case h.PULL:if(!Y){$.postMessage({sourceName:V,targetName:X,stream:h.PULL_COMPLETE,streamId:H,success:!0});break}Y.desiredSize<=0&&L.desiredSize>0&&Y.sinkCapability.resolve(),Y.desiredSize=L.desiredSize,new Promise(function(C){var B;C((B=Y.onPull)==null?void 0:B.call(Y))}).then(function(){$.postMessage({sourceName:V,targetName:X,stream:h.PULL_COMPLETE,streamId:H,success:!0})},function(C){$.postMessage({sourceName:V,targetName:X,stream:h.PULL_COMPLETE,streamId:H,reason:m(C)})});break;case h.ENQUEUE:if((0,s.assert)(D,"enqueue should have stream controller"),D.isClosed)break;D.controller.enqueue(L.chunk);break;case h.CLOSE:if((0,s.assert)(D,"close should have stream controller"),D.isClosed)break;D.isClosed=!0,D.controller.close(),U(this,N,or).call(this,D,H);break;case h.ERROR:(0,s.assert)(D,"error should have stream controller"),D.controller.error(m(L.reason)),U(this,N,or).call(this,D,H);break;case h.CANCEL_COMPLETE:L.success?D.cancelCall.resolve():D.cancelCall.reject(m(L.reason)),U(this,N,or).call(this,D,H);break;case h.CANCEL:if(!Y)break;new Promise(function(C){var B;C((B=Y.onCancel)==null?void 0:B.call(Y,m(L.reason)))}).then(function(){$.postMessage({sourceName:V,targetName:X,stream:h.CANCEL_COMPLETE,streamId:H,success:!0})},function(C){$.postMessage({sourceName:V,targetName:X,stream:h.CANCEL_COMPLETE,streamId:H,reason:m(C)})}),Y.sinkCapability.reject(m(L.reason)),Y.isCancelled=!0,delete this.streamSinks[H];break;default:throw new Error("Unexpected stream case")}},N=new WeakSet,or=async function(L,H){var V,X,$;await Promise.allSettled([(V=L.startCall)==null?void 0:V.promise,(X=L.pullCall)==null?void 0:X.promise,($=L.cancelCall)==null?void 0:$.promise]),delete this.streamControllers[H]}},825:(t,e,n)=>{n.d(e,{MurmurHash3_64:()=>k});var s=n(266);const o=3285377520,h=4294901760,m=65535;class k{constructor(T){this.h1=T?T&4294967295:o,this.h2=T?T&4294967295:o}update(T){let _,I;if(typeof T=="string"){_=new Uint8Array(T.length*2),I=0;for(let B=0,J=T.length;B<J;B++){const lt=T.charCodeAt(B);lt<=255?_[I++]=lt:(_[I++]=lt>>>8,_[I++]=lt&255)}}else if((0,s.isArrayBuffer)(T))_=T.slice(),I=_.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const N=I>>2,R=I-N*4,Z=new Uint32Array(_.buffer,0,N);let L=0,H=0,V=this.h1,X=this.h2;const $=3432918353,D=461845907,Y=$&m,C=D&m;for(let B=0;B<N;B++)B&1?(L=Z[B],L=L*$&h|L*Y&m,L=L<<15|L>>>17,L=L*D&h|L*C&m,V^=L,V=V<<13|V>>>19,V=V*5+3864292196):(H=Z[B],H=H*$&h|H*Y&m,H=H<<15|H>>>17,H=H*D&h|H*C&m,X^=H,X=X<<13|X>>>19,X=X*5+3864292196);switch(L=0,R){case 3:L^=_[N*4+2]<<16;case 2:L^=_[N*4+1]<<8;case 1:L^=_[N*4],L=L*$&h|L*Y&m,L=L<<15|L>>>17,L=L*D&h|L*C&m,N&1?V^=L:X^=L}this.h1=V,this.h2=X}hexdigest(){let T=this.h1,_=this.h2;return T^=_>>>1,T=T*3981806797&h|T*36045&m,_=_*4283543511&h|((_<<16|T>>>16)*2950163797&h)>>>16,T^=_>>>1,T=T*444984403&h|T*60499&m,_=_*3301882366&h|((_<<16|T>>>16)*3120437893&h)>>>16,T^=_>>>1,(T>>>0).toString(16).padStart(8,"0")+(_>>>0).toString(16).padStart(8,"0")}}},266:(t,e,n)=>{var f;n.d(e,{AbortException:()=>ne,AnnotationBorderStyleType:()=>V,AnnotationEditorParamsType:()=>N,AnnotationEditorPrefix:()=>_,AnnotationEditorType:()=>I,AnnotationMode:()=>T,AnnotationPrefix:()=>y,AnnotationType:()=>H,BaseException:()=>Pt,CMapCompressionType:()=>$,FONT_IDENTITY_MATRIX:()=>h,FeatureTest:()=>pe,FormatError:()=>Vt,IDENTITY_MATRIX:()=>o,ImageKind:()=>L,InvalidPDFException:()=>ue,LINE_FACTOR:()=>k,MAX_IMAGE_SIZE_TO_CACHE:()=>m,MissingPDFException:()=>ie,OPS:()=>D,PasswordException:()=>Yt,PasswordResponses:()=>Y,PermissionFlag:()=>R,PromiseCapability:()=>a,RenderingIntentFlag:()=>w,TextRenderingMode:()=>Z,UnexpectedResponseException:()=>Jt,UnknownErrorException:()=>Ht,Util:()=>le,VerbosityLevel:()=>X,assert:()=>wt,bytesToString:()=>$t,createValidAbsoluteUrl:()=>Nt,getUuid:()=>A,getVerbosityLevel:()=>J,info:()=>lt,isArrayBuffer:()=>b,isNodeJS:()=>s,normalizeUnicode:()=>x,objectFromMap:()=>oe,setVerbosityLevel:()=>B,shadow:()=>Ft,string32:()=>Zt,stringToBytes:()=>ce,unreachable:()=>ut,warn:()=>Q});const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),o=[1,0,0,1,0,0],h=[.001,0,0,.001,0,0],m=1e7,k=1.35,w={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},T={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_="pdfjs_internal_editor_",I={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},N={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},R={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Z={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},L={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},H={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},V={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},X={ERRORS:0,WARNINGS:1,INFOS:5},$={NONE:0,BINARY:1},D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},Y={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let C=X.WARNINGS;function B(d){Number.isInteger(d)&&(C=d)}function J(){return C}function lt(d){C>=X.INFOS&&console.log(`Info: ${d}`)}function Q(d){C>=X.WARNINGS&&console.log(`Warning: ${d}`)}function ut(d){throw new Error(d)}function wt(d,c){d||ut(c)}function jt(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Nt(d,c=null,g=null){var M;if(!d)return null;try{if(g&&typeof d=="string"&&(g.addDefaultProtocol&&d.startsWith("www.")&&((M=d.match(/\./g))==null?void 0:M.length)>=2&&(d=`http://${d}`),g.tryConvertEncoding))try{d=z(d)}catch{}const G=c?new URL(d,c):new URL(d);if(jt(G))return G}catch{}return null}function Ft(d,c,g,M=!1){return Object.defineProperty(d,c,{value:g,enumerable:!M,configurable:!0,writable:!1}),g}const Pt=function(){function d(c,g){this.constructor===d&&ut("Cannot initialize BaseException."),this.message=c,this.name=g}return d.prototype=new Error,d.constructor=d,d}();class Yt extends Pt{constructor(c,g){super(c,"PasswordException"),this.code=g}}class Ht extends Pt{constructor(c,g){super(c,"UnknownErrorException"),this.details=g}}class ue extends Pt{constructor(c){super(c,"InvalidPDFException")}}class ie extends Pt{constructor(c){super(c,"MissingPDFException")}}class Jt extends Pt{constructor(c,g){super(c,"UnexpectedResponseException"),this.status=g}}class Vt extends Pt{constructor(c){super(c,"FormatError")}}class ne extends Pt{constructor(c){super(c,"AbortException")}}function $t(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&ut("Invalid argument for bytesToString");const c=d.length,g=8192;if(c<g)return String.fromCharCode.apply(null,d);const M=[];for(let G=0;G<c;G+=g){const et=Math.min(G+g,c),rt=d.subarray(G,et);M.push(String.fromCharCode.apply(null,rt))}return M.join("")}function ce(d){typeof d!="string"&&ut("Invalid argument for stringToBytes");const c=d.length,g=new Uint8Array(c);for(let M=0;M<c;++M)g[M]=d.charCodeAt(M)&255;return g}function Zt(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function oe(d){const c=Object.create(null);for(const[g,M]of d)c[g]=M;return c}function qt(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function Ae(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return Ft(this,"isLittleEndian",qt())}static get isEvalSupported(){return Ft(this,"isEvalSupported",Ae())}static get isOffscreenCanvasSupported(){return Ft(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ft(this,"platform",{isMac:navigator.platform.includes("Mac")}):Ft(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var c,g;return Ft(this,"isCSSRoundSupported",(g=(c=globalThis.CSS)==null?void 0:c.supports)==null?void 0:g.call(c,"width: round(1.5px, 1px)"))}}const se=[...Array(256).keys()].map(d=>d.toString(16).padStart(2,"0"));class le{static makeHexColor(c,g,M){return`#${se[c]}${se[g]}${se[M]}`}static scaleMinMax(c,g){let M;c[0]?(c[0]<0&&(M=g[0],g[0]=g[1],g[1]=M),g[0]*=c[0],g[1]*=c[0],c[3]<0&&(M=g[2],g[2]=g[3],g[3]=M),g[2]*=c[3],g[3]*=c[3]):(M=g[0],g[0]=g[2],g[2]=M,M=g[1],g[1]=g[3],g[3]=M,c[1]<0&&(M=g[2],g[2]=g[3],g[3]=M),g[2]*=c[1],g[3]*=c[1],c[2]<0&&(M=g[0],g[0]=g[1],g[1]=M),g[0]*=c[2],g[1]*=c[2]),g[0]+=c[4],g[1]+=c[4],g[2]+=c[5],g[3]+=c[5]}static transform(c,g){return[c[0]*g[0]+c[2]*g[1],c[1]*g[0]+c[3]*g[1],c[0]*g[2]+c[2]*g[3],c[1]*g[2]+c[3]*g[3],c[0]*g[4]+c[2]*g[5]+c[4],c[1]*g[4]+c[3]*g[5]+c[5]]}static applyTransform(c,g){const M=c[0]*g[0]+c[1]*g[2]+g[4],G=c[0]*g[1]+c[1]*g[3]+g[5];return[M,G]}static applyInverseTransform(c,g){const M=g[0]*g[3]-g[1]*g[2],G=(c[0]*g[3]-c[1]*g[2]+g[2]*g[5]-g[4]*g[3])/M,et=(-c[0]*g[1]+c[1]*g[0]+g[4]*g[1]-g[5]*g[0])/M;return[G,et]}static getAxialAlignedBoundingBox(c,g){const M=this.applyTransform(c,g),G=this.applyTransform(c.slice(2,4),g),et=this.applyTransform([c[0],c[3]],g),rt=this.applyTransform([c[2],c[1]],g);return[Math.min(M[0],G[0],et[0],rt[0]),Math.min(M[1],G[1],et[1],rt[1]),Math.max(M[0],G[0],et[0],rt[0]),Math.max(M[1],G[1],et[1],rt[1])]}static inverseTransform(c){const g=c[0]*c[3]-c[1]*c[2];return[c[3]/g,-c[1]/g,-c[2]/g,c[0]/g,(c[2]*c[5]-c[4]*c[3])/g,(c[4]*c[1]-c[5]*c[0])/g]}static singularValueDecompose2dScale(c){const g=[c[0],c[2],c[1],c[3]],M=c[0]*g[0]+c[1]*g[2],G=c[0]*g[1]+c[1]*g[3],et=c[2]*g[0]+c[3]*g[2],rt=c[2]*g[1]+c[3]*g[3],vt=(M+rt)/2,ft=Math.sqrt((M+rt)**2-4*(M*rt-et*G))/2,bt=vt+ft||1,Tt=vt-ft||1;return[Math.sqrt(bt),Math.sqrt(Tt)]}static normalizeRect(c){const g=c.slice(0);return c[0]>c[2]&&(g[0]=c[2],g[2]=c[0]),c[1]>c[3]&&(g[1]=c[3],g[3]=c[1]),g}static intersect(c,g){const M=Math.max(Math.min(c[0],c[2]),Math.min(g[0],g[2])),G=Math.min(Math.max(c[0],c[2]),Math.max(g[0],g[2]));if(M>G)return null;const et=Math.max(Math.min(c[1],c[3]),Math.min(g[1],g[3])),rt=Math.min(Math.max(c[1],c[3]),Math.max(g[1],g[3]));return et>rt?null:[M,et,G,rt]}static bezierBoundingBox(c,g,M,G,et,rt,vt,ft){const bt=[],Tt=[[],[]];let St,xt,Dt,nt,P,K,tt,ct;for(let te=0;te<2;++te){if(te===0?(xt=6*c-12*M+6*et,St=-3*c+9*M-9*et+3*vt,Dt=3*M-3*c):(xt=6*g-12*G+6*rt,St=-3*g+9*G-9*rt+3*ft,Dt=3*G-3*g),Math.abs(St)<1e-12){if(Math.abs(xt)<1e-12)continue;nt=-Dt/xt,0<nt&&nt<1&&bt.push(nt);continue}tt=xt*xt-4*Dt*St,ct=Math.sqrt(tt),!(tt<0)&&(P=(-xt+ct)/(2*St),0<P&&P<1&&bt.push(P),K=(-xt-ct)/(2*St),0<K&&K<1&&bt.push(K))}let gt=bt.length,Et;const It=gt;for(;gt--;)nt=bt[gt],Et=1-nt,Tt[0][gt]=Et*Et*Et*c+3*Et*Et*nt*M+3*Et*nt*nt*et+nt*nt*nt*vt,Tt[1][gt]=Et*Et*Et*g+3*Et*Et*nt*G+3*Et*nt*nt*rt+nt*nt*nt*ft;return Tt[0][It]=c,Tt[1][It]=g,Tt[0][It+1]=vt,Tt[1][It+1]=ft,Tt[0].length=Tt[1].length=It+2,[Math.min(...Tt[0]),Math.min(...Tt[1]),Math.max(...Tt[0]),Math.max(...Tt[1])]}}function z(d){return decodeURIComponent(escape(d))}function b(d){return typeof d=="object"&&(d==null?void 0:d.byteLength)!==void 0}class a{constructor(){S(this,f,!1);this.promise=new Promise((c,g)=>{this.resolve=M=>{W(this,f,!0),c(M)},this.reject=M=>{W(this,f,!0),g(M)}})}get settled(){return i(this,f)}}f=new WeakMap;let l=null,u=null;function x(d){return l||(l=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,u=new Map([["\uFB05","\u017Ft"]])),d.replaceAll(l,(c,g,M)=>g?g.normalize("NFKC"):u.get(M))}function A(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const d=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(d);else for(let c=0;c<32;c++)d[c]=Math.floor(Math.random()*255);return $t(d)}const y="pdfjs_internal_id_"}},wl={};function Gs(t){var e=wl[t];if(e!==void 0)return e.exports;var n=wl[t]={exports:{}};return Gd[t](n,n.exports,Gs),n.exports}(()=>{var t=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",e=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=h=>{h&&h.d<1&&(h.d=1,h.forEach(m=>m.r--),h.forEach(m=>m.r--?m.r++:m()))},o=h=>h.map(m=>{if(m!==null&&typeof m=="object"){if(m[t])return m;if(m.then){var k=[];k.d=0,m.then(_=>{w[e]=_,s(k)},_=>{w[n]=_,s(k)});var w={};return w[t]=_=>_(k),w}}var T={};return T[t]=_=>{},T[e]=m,T});Gs.a=(h,m,k)=>{var w;k&&((w=[]).d=-1);var T=new Set,_=h.exports,I,N,R,Z=new Promise((L,H)=>{R=H,N=L});Z[e]=_,Z[t]=L=>(w&&L(w),T.forEach(L),Z.catch(H=>{})),h.exports=Z,m(L=>{I=o(L);var H,V=()=>I.map($=>{if($[n])throw $[n];return $[e]}),X=new Promise($=>{H=()=>$(V),H.r=0;var D=Y=>Y!==w&&!T.has(Y)&&(T.add(Y),Y&&!Y.d&&(H.r++,Y.push(H)));I.map(Y=>Y[t](D))});return H.r?X:V()},L=>(L?R(Z[n]=L):N(_),s(w))),w&&w.d<0&&(w.d=0)}})(),Gs.d=(t,e)=>{for(var n in e)Gs.o(e,n)&&!Gs.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},Gs.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var he=Gs(907);he=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=he),he.AbortException,he.AnnotationEditorLayer,he.AnnotationEditorParamsType,he.AnnotationEditorType,he.AnnotationEditorUIManager,he.AnnotationLayer,he.AnnotationMode,he.CMapCompressionType,he.ColorPicker,he.DOMSVGFactory,he.DrawLayer,he.FeatureTest;var Xd=he.GlobalWorkerOptions;he.ImageKind,he.InvalidPDFException,he.MissingPDFException,he.OPS,he.Outliner,he.PDFDataRangeTransport,he.PDFDateString,he.PDFWorker,he.PasswordResponses,he.PermissionFlag,he.PixelsPerInch,he.PromiseCapability,he.RenderingCancelledException,he.UnexpectedResponseException,he.Util,he.VerbosityLevel,he.XfaLayer,he.build,he.createValidAbsoluteUrl,he.fetchData;var Yd=he.getDocument;he.getFilenameFromUrl,he.getPdfFilenameFromUrl,he.getXfaPageViewport,he.isDataScheme,he.isPdfFile,he.noContextMenu,he.normalizeUnicode,he.renderTextLayer,he.setLayerDimensions,he.shadow,he.updateTextLayer,he.version;const Kd=(t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n},Qd=t=>(uc("data-v-c5ecf139"),t=t(),pc(),t),Jd={class:"container"},Zd={class:"pdf-viewer"},tu={class:"puzzles"},eu=["src"],su=Qd(()=>We("h2",null,"FEN Notation",-1)),iu={class:"fen-list"},nu={tabindex:"0"},ru={__name:"App",setup(t){const e="/juegas-ajedrez/";Xd.workerSrc=`${e}assets/pdfjs/pdf.worker.mjs`;const n=yn([]),s=yn(1),o=yn(null),h=yn(null);function m(){console.log("OpenCV loaded and ready.")}async function k(C){const B=await o.value.getPage(C),J=B.getViewport({scale:3}),lt=h.value,Q=lt.getContext("2d",{willReadFrequently:!0});lt.height=J.height,lt.width=J.width;const ut={canvasContext:Q,viewport:J};await B.render(ut).promise,n.value=[],await w(lt)}async function w(C){if(!cv||!cv.imread){console.error("OpenCV not loaded or not initialized properly.");return}const B=cv.imread(C),J=cv.imread(C),lt=new cv.Mat;cv.cvtColor(J,lt,cv.COLOR_RGBA2GRAY);const Q=new cv.Mat,ut=new cv.Size(5,5);cv.GaussianBlur(lt,Q,ut,5,5,cv.BORDER_DEFAULT),lt.delete();const wt=new cv.Mat;cv.Canny(Q,wt,50,50),Q.delete();const jt=new cv.Size(3,3),Nt=cv.getStructuringElement(cv.MORPH_RECT,jt),Ft=new cv.Mat;cv.dilate(wt,Ft,Nt,new cv.Point(-1,-1),1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),Nt.delete(),wt.delete();const Pt=new cv.Size(2,2),Yt=cv.getStructuringElement(cv.MORPH_RECT,Pt),Ht=new cv.Mat;cv.erode(Ft,Ht,Yt,new cv.Point(-1,-1),1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),Yt.delete(),Ft.delete();const ue=new cv.MatVector,ie=new cv.Mat;cv.findContours(Ht,ue,ie,cv.RETR_TREE,cv.CHAIN_APPROX_SIMPLE),Ht.delete(),console.log("Contours found: ",ue.size());const Jt=R(ue);ue.delete();const Vt=Z(Jt,J,1,40);console.log("Contours (Filter - Relative Area): ",Vt.size()),Jt.delete();const ne=V(Vt,1);console.log("Contours (Filter - Area Frequency): ",ne.size()),Vt.delete();let $t=X(ne);for(let ce=0;ce<ne.size();++ce){let Zt=new cv.Scalar(0,255,0,255);cv.drawContours(J,ne,ce,Zt,2,cv.LINE_8,ie,0)}T(J,$t,5),cv.imshow(C,J),(await N(B,$t)).forEach((ce,Zt)=>{const{topLeft:oe,bottomRight:qt}=$t[Zt];n.value.push({url:ce,fen:"",points:{topLeft:oe,bottomRight:qt}})}),_(n.value),B.delete(),J.delete(),ie.delete(),ne.delete()}function T(C,B,J=5){B.forEach(({topLeft:lt,bottomRight:Q})=>{const ut=new cv.Point(lt.x,lt.y),wt=new cv.Point(Q.x,Q.y),jt=new cv.Scalar(255,0,0,255),Nt=new cv.Scalar(0,0,255,255);cv.circle(C,ut,J,jt,-1),cv.circle(C,wt,J,Nt,-1)})}async function _(C){for(let B=0;B<C.length;B++){const J=I(C[B].url),lt=new FormData;lt.append("image",J,`image${B}.png`);try{const Q=await(await fetch("https://web-vrnocjtpaa-an.a.run.app/board_to_fen",{method:"POST",body:lt})).json();Q.status==="success"?C[B].fen=Q.fen:console.error("Error fetching FEN notation:",Q)}catch(Q){console.error("Failed to upload image or fetch FEN",Q)}}}function I(C){const B=atob(C.split(",")[1]),J=C.split(",")[0].split(":")[1].split(";")[0],lt=new ArrayBuffer(B.length),Q=new Uint8Array(lt);for(let ut=0;ut<B.length;ut++)Q[ut]=B.charCodeAt(ut);return new Blob([lt],{type:J})}async function N(C,B){const J=[];for(let{topLeft:lt,bottomRight:Q}of B){const ut=lt.x,wt=lt.y,jt=Q.x-lt.x,Nt=Q.y-lt.y,Ft=new cv.Rect(ut,wt,jt,Nt),Pt=C.roi(Ft),Yt=document.createElement("canvas");cv.imshow(Yt,Pt);const Ht=Yt.toDataURL();J.push(Ht),Pt.delete()}return J}function R(C){let B=[];for(let lt=0;lt<C.size();lt++){const Q=C.get(lt),ut=cv.contourArea(Q);B.push({area:ut,index:lt})}B.sort((lt,Q)=>Q.area-lt.area);let J=new cv.MatVector;return B.forEach(lt=>{J.push_back(C.get(lt.index))}),J}function Z(C,B,J=1,lt=100){let Q=new cv.MatVector,ut=B.rows*B.cols,wt=J/100*ut,jt=lt/100*ut;for(let Nt=0;Nt<C.size();++Nt){let Ft=C.get(Nt),Pt=cv.contourArea(Ft);Pt>=wt&&Pt<=jt&&Q.push_back(Ft)}return Q}function L(C,B,J){for(let lt of B.keys()){let Q=(lt+C)/2;if(Math.abs(lt-C)<=Q*(J/100))return lt}return null}function H(C,B){let J=new Map;for(let lt=0;lt<C.size();++lt){let Q=C.get(lt),ut=cv.contourArea(Q),wt=L(ut,J,B);wt!==null?J.has(wt)?J.get(wt).push(Q):J.set(wt,[Q]):J.set(ut,[Q])}return J}function V(C,B=1){let J=H(C,B),lt=null,Q=0;for(let wt of J.values())wt.length>Q&&(lt=wt,Q=wt.length);let ut=new cv.MatVector;return lt!==null&&lt.forEach(wt=>ut.push_back(wt)),ut}function X(C){let B=[];for(let J=0;J<C.size();++J){let lt=C.get(J),Q=cv.minAreaRect(lt),ut=cv.RotatedRect.points(Q).map(Ft=>({x:Math.round(Ft.x),y:Math.round(Ft.y)})),wt=ut.reduce((Ft,Pt)=>({x:Math.min(Ft.x,Pt.x),y:Math.min(Ft.y,Pt.y)}),{x:1/0,y:1/0}),jt=ut.reduce((Ft,Pt)=>({x:Math.max(Ft.x,Pt.x),y:Math.max(Ft.y,Pt.y)}),{x:-1/0,y:-1/0}),Nt=jt.y-wt.y;B.push({topLeft:wt,bottomRight:jt,contourHeight:Nt})}return B.sort((J,lt)=>{let Q=.1*J.contourHeight,ut=.1*lt.contourHeight,wt=(Q+ut)/2;return Math.abs(J.topLeft.y-lt.topLeft.y)<=wt?J.topLeft.x-lt.topLeft.x:J.topLeft.y-lt.topLeft.y}),B.map(({topLeft:J,bottomRight:lt})=>({topLeft:J,bottomRight:lt}))}function $(C){const B=C.target.files[0];if(B){const J=new FileReader;J.onload=async lt=>{const Q=new Uint8Array(lt.target.result);o.value=Mr(await Yd({data:Q}).promise),s.value=1,k(s.value)},J.readAsArrayBuffer(B)}}function D(){s.value<o.value.numPages&&(s.value++,k(s.value))}function Y(){s.value>1&&(s.value--,k(s.value))}return Uo(async()=>{cv.onRuntimeInitialized=()=>m()}),(C,B)=>(Li(),Ii("div",Jd,[We("div",Zd,[We("input",{type:"file",onChange:$,accept:"application/pdf"},null,32),We("div",null,[We("canvas",{ref_key:"canvasRef",ref:h,willReadFrequently:"true"},null,512)]),We("button",{onClick:Y},"Previous"),We("button",{onClick:D},"Next")]),We("ul",tu,[(Li(!0),Ii(is,null,Vo(n.value,(J,lt)=>(Li(),Ii("li",{tabindex:"0",key:lt},[We("article",null,[We("h1",null,"Puzzle "+so(lt+1),1),We("img",{src:J.url,alt:"Cropped area"},null,8,eu),su,We("p",null,[We("ol",iu,[(Li(!0),Ii(is,null,Vo(J.fen.split("/"),(Q,ut)=>(Li(),Ii("li",nu,so(Q),1))),256))])])])]))),128))])]))}},au=Kd(ru,[["__scopeId","data-v-c5ecf139"]]);zd(au).mount("#app")})();
